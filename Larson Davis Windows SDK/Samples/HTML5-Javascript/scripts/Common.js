/*! Copyright 2014-2015 PCB Piezotronics
	Original dev by Brent Iverson
	*/
function getErrStr(n){var t="No Error";return(n&ErrorFlags.FlashReadFailure)>0?t="FlashReadFailure":(n&ErrorFlags.FlashReadDismissed)>0?t="FlashReadDismissed":(n&ErrorFlags.FileSystemCorrupt)>0?t="FileSystemCorrupt":(n&ErrorFlags.SerialNumberError)>0?t="SerialNumberError":(n&ErrorFlags.NoUserSDCard)>0?t="NoUserSDCard":(n&ErrorFlags.NoSensorConnected)>0?t="NoSensorConnected":ckUpg(n)&&(t="Something with Upgrade"),t}function ckUpg(n){return(n&ErrorFlags.UC)>0?!0:!1}function stopTheGrabbing(n){n!=undefined?setTimeout(function(){stopGrabbing=!0},n):stopGrabbing=!0}function hideFtrMenuBtn(){$("#imgMenu").hide();TopBar.hide()}function getModel(){if(SystemProperties!==undefined&&SystemProperties.TAG_MODEL!==undefined&&SystemProperties.TAG_MODEL!=="")Model=SystemProperties.TAG_MODEL.trim();else{queryStr==undefined&&(queryStr=window.location.href.toLowerCase());var n=queryStr.indexOf("lxt");n!=-1?Model=queryStr.indexOf("se",n)!=-1?"LxT SE":"LxT":(n=queryStr.indexOf("hvm"))>=0?(Model=queryStr.indexOf("100",n)>=0?"HVM100":"HVM200",SystemProperties.TAG_MODEL=Model):(Model=queryStr.indexOf("831c")>=0?"831C":"831",SystemProperties.TAG_MODEL=Model)}SetModelNumber();typeof _831CUpdateTags!="undefined"&&_831CUpdateTags()}function SetModelNumber(){switch(Model.toLowerCase().trim()){case"831":ModelNumber=m831;document.title="Model 831";break;case"831c":ModelNumber=m831C;window.IsRemote&&(document.title="SoundAdvisor\u2122");break;case"lxt se":ModelNumber=mLxTSE;document.title="SoundExpert\u00ae;";break;case"lxt":case"lxt1":case"lxt2":ModelNumber=mLxT;document.title="SoundTrack LxT\u00ae";break;case"hvm100":ModelNumber=mHVM100;break;case"hvm200":ModelNumber=mHVM200;break;default:ModelNumber=mUnknown}}function Is831C(){return Model.indexOf("831C")>=0}function Is831(){return Model.indexOf("831")>=0}function IsLxT(){return Model.toLowerCase().indexOf("lxt")>=0}function IsLxTse(){return IsLxT()?Model.toLowerCase().indexOf("se")>=0:!1}function IsHvm(){return Model.toLowerCase().indexOf("hvm")>=0}function IsHvm100(){return Model.toLowerCase().indexOf("hvm100")>=0}function IsHvm200(){return IsHvm()&&Model.indexOf("200")>=0}function SecsToHHMM(n){var i=new Date(1970,0,1),t;return i.setSeconds(n),t=i.toTimeString().substr(0,5),n>86399&&(t=Math.floor((i-Date.parse("1/1/70"))/36e5)+t.substr(2)),t}function SecsToHHMMSS(n){var i=new Date(1970,0,1),t;return i.setSeconds(n),t=i.toTimeString().substr(0,8),n>86399&&(t=Math.floor((i-Date.parse("1/1/70"))/36e5)+t.substr(2)),t}function SecsToHHMMSSP(n){var i=new Date(1970,0,1),t;return i.setMilliseconds(n*1e3),t=i.format(timeFm),n>86399&&(t=Math.floor((i-Date.parse("1/1/70"))/36e5)+t.substr(2)),t}function SecsToDate(n){var t=new Date(1970,0,1);return t.setSeconds(n),SystemProperties.TAG_DISPLAY_DATE?t.format("d-m-Y"):t.format("Y-m-d")}function SecsToDateTime(n,t){var i=new Date(1970,0,1);return i.setSeconds(n),SystemProperties.TAG_DISPLAY_DATE||t==1?i.format("d-m-Y H:i:s"):i.format("Y-m-d H:i:s")}function SecsToShortDateTime(n){var t=new Date(1970,0,1);return t.setSeconds(n),SystemProperties.TAG_DISPLAY_DATE?t.format("d-m-Y H:i"):t.format("Y-m-d H:i")}function ConfigFrameSizeAndScroll(n){var t=screenHeight*.71;n=="#About"?$(n).css("height",screenHeight*.745+21):oldSetup?$(n).css("height","250px"):IsHvm()?$(n).css("height",screenHeight*.775):$(n).css("height",screenHeight*.775);$(n).css("overflow-y","scroll");$(n).css("overflow-x","hidden")}function isSysKey(n){var t=!1;if(n>=16&&n<=18||n>=35&&n<=40||n>=112&&n<=123)t=!0;else switch(n){case 9:case 13:case 20:case 27:t=!0;break;default:t=!1}return t}function onlyDecimal(n){n.keypress(function(n){var t=n.keyCode?n.keyCode:n.which;return t==13?!0:t>=48&&t<=57||t==44||t==46||t==45?!0:(n.preventDefault(),!1)})}function onlyAlphaNumeric(n,t){t==undefined&&(t="^[a-zA-Z0-9_]+$");n.data("rx",t);n.keypress(function(n){var t=$(this).data("rx"),i=new RegExp(t),r=String.fromCharCode(n.charCode?n.charCode:n.which);return i.test(r)?!0:(n.preventDefault(),!1)})}function errorHandling(n,t){var i="Error in:"+n+" with: ";return t.Result!=undefined&&t.Result.indexOf("Error")>=0?(i+=t.Result,t.Message!=undefined&&(i+=" - Message: "+t.Message),console.log("%c   "+i,"color:rgb(200, 10, 10); font-size: 11pt; background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAAYCAYAAAAmoYOZAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94BCQABJm+eBXkAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABRlJREFUeNrt3d1PHFUYx/HvmRmWgQUKlEJbKFhKXywVaWstaqI1XmhUqIYYNfqvGf0LTDQaa60WrRWqxUqt0FZKRV76Crssu9vdnZ1zvOClaowXxrv9fZKTmczM1XP1yzNnnjHOOcd/5JxbX+CA5VuLjI58TqGU49CR4/T2H0dERESk0gR/CUzrR7N58g83/3bBOseDXJYL506zODFCmJ+lq7ON37+/q4AlIiIilR2w3N8ylNm4aDZurnWr8Aw4cNYS2ZhLF8f4/aezRHcu0d/dSHNyB6srOaYmf1J1RUREpLID1lpqWotYuWwWZx11DQ1/amvFOGOxeBg8ZqavMnnhCzIz5+ndVcPOvh2UyhELt1L8trDC1bmcqisiIiIVHrAc2Dhi9Px5zpw+TalY4ulnT/DciRMkk0mcA+N8UvfvMf71Z6zMjtGRzHDsUCM2SHB/Kc/c7SWuLmaYT3k8fmJY1RUREZGKZKy1Dhyp5WU+/uhDzn09QlyK8DyfXLHEo72HeGpggIHjA/xwfoSFyW9IlmY5/lg7Cd+Qy+S5czfDzGKOSzN3iOq72H/0BU4Ov0H7zlZVWERERCovYJVKRXdh9DvOfnmGqSsTbG1uwvd8jIFybCkUCuTzOdq2NpMs3+bFJ5rp3tmEJWDpfpq5xRTX5lb59b6jYftu+geeZ99jR+je3UlzU6MqLCIiIpUXsD54/z138cIYxBFhddXDzew8HMNgraVYWKWqlGZPk8++riRVHszOr3BlPk+uuo1tXfs5euwYe3r20NX5CPX1Dfh+oAqLiIhI5QWs4ZOvup7dXQQem2EqjuOHDxiD53k4A3FsyS2nKGRv4R6sUCwHNHf3sfvgYXr29vDogf107NxOGIaAwfN8VVhEREQqTpBeXiLVUMuujnbiOKZcLmMMRKWYRKKKjc8IPaAmkSC5YztRtJV0Ok2UL9La1cPjfb0cPHCA1ta2za6V+csQLREREZEKCljZbI7r12cIwyS7dnVQjiLK5YhseRWcIwgCfH+tE+X7PkEQUFfn09LSwuzCIvu7uzhy+DBbtjTheRuhyqB8JSIiIhUbsBK1SXIP8oyNfsvy3T3s23uQtu2t1CVD4nht0qgxZnNfVhAEVFdXc/O3Gebn52nvaKexsQlj1hLVxlFERESkUnlNLS34rkRfZx197WVWFy9zefx7rAU/CKipqaE6DAnDkNraWnzfZ3p6ml9+maQcRQRBlcKViIiIyJ8D1ptvvUXr1gYS5RJBsUBvZ8jkzxf5/MwIZ0fOMXXtV/wgQbKugUKxyOTUJFPXrmKtxTpHVCoBVpUUERERWRcMDZ1k+vIPTH/3Fdeu3+ZwjU9QFZDJPSCVSjNzc5bVbJ729h3cuHGdzMoKGAOej1t/fWitxfM8VVNEREQE8Gpraug/+hTFRD0FP+TKjQxL2QiDt/nKb2JigvEfL5FayRIbnxgP51XxytBr9B85itE4BhEREZFNgQFeenmIUhQxPnqOewtLeHUWzxict/bVYBAEOAfOGJwDz/N4ZXCIt995l9pkPRh1r0REREQ2rP+LEKy1pNMpMuksP06Mc3FsjMmfJ5ibm8P3fbY0NlG2jm3bWhkaHOT14WGS9XWsjWRY3+SueoqIiIhg3Pr8hY3f4mysfC7H7M1pPv3kE06dOkVUthx7coBXBwd55pmnqQ5D7bsSERER+beAJSIiIiL/D7WgRERERBSwRERERBSwRERERBSwREREROS/+wOlexN4OXbz6gAAAABJRU5ErkJggg==');background-repeat:no-repeat;"),!0):!1}function defaultVal(n,t){return typeof n=="undefined"?t:n}function formattedString(n){for(var i=n,t=0,r=arguments.length;t<r;t++)i=i.replace("{"+t+"}",arguments[t+1]);return i}function setAllradios(){return}function returnTime(n){return n.setMinutes(n.getMinutes()),n.format("H:i:s")}function SecsToFullDate(n){var t=new Date(1970,0,1);return t.setSeconds(n),SystemProperties.TAG_DISPLAY_DATE?t.format("d-m-Y H:i:s"):t.format("Y-m-d H:i:s")}function ShortLWDStr(n,t){var r=MeasurementProperties.TAG_FREQ_WEIGHTING,u=MeasurementProperties.TAG_DET_WEIGHTING,i=MeasurementProperties.TAG_INTEGRATION_INPUT;return t||(i=undefined),MakeLWeightDetectorString(r,u,"",n,i)}function MakeLWeightDetectorString(n,t,i,r,u){var f="",s="",e="",o="",h;return r=r||"",n>=0&&n<SlmConstants.Weights.length&&(s=SlmConstants.Weights[n]),t>=0&&t<SlmConstants.Detectors.length&&(e=SlmConstants.Detectors[t],o=SlmConstants.DetectorsLong[t]),u==0&&(e="",o=""),r=r.replace(/\$/g,"{0}"),r=r.replace(/#/g,"{1}"),h=MeasurementProperties.TAG_PEAK_WEIGHTING||0,r=r.replace("^",SlmConstants.Weights[h]),r=r.replace("@","{2}"),r.Length==0&&(r="L<sub>{0}{1}<\/sub>"),f=String.format(r,s,e,o),i.Length>0&&(f+=i),f}function switch_style(n,t){var i,r=document.getElementsByTagName("link");for(i=0,ltl=r.length;i<ltl;i++)r[i].rel.indexOf("stylesheet")!=-1&&r[i].title&&(r[i].disabled=!0,r[i].title==gStyles[n]&&(r[i].disabled=!1));set_cookie(style_cookie_name,n,style_cookie_duration);currentTheme=n;t&&t(gStyles[n])}function printMode(n){if(n==="enter"){var t=get_cookie(style_cookie_name);origStyle=t;t!==Theme.LIGHT&&switch_style(Theme.LIGHT,swiClrs)}else origStyle!==Theme.LIGHT&&switch_style(origStyle)}function swiClrs(n){console.log("swiClrs: wh = "+n);var t="dark";(n==undefined||n=="undefined")&&(n="dark");n.indexOf("light")!==-1&&(t="light");t==="dark"?(maxClr="rgba(50,255,0,1)",minClr="rgba(255,255,0,1)",mainClr="rgba(55,160,240,1)",chClr="rgba(200, 220, 240, 0.4)",tickClr="rgba(10, 180, 240, 0.5)",bkGrad=["#001b60","#000000"],$("#obaImgT").attr("src","/images/firmware/OBA.png"),$("#slmImgT").attr("src","/images/firmware/SLM.png"),$(".xClose").attr("src","/images/Close1.png"),spClr[0]="#ffff12",spClr[1]="#ff3f54",spClr[2]="#26b3f7",spClr[3]="#e68600",spClr[4]="#c80fff",spClr[5]="#32ff00"):(maxClr="rgba(0,160,0,1)",minClr="rgba(220,160,0,1)",mainClr="rgba(0,126,185,1)",chClr="rgba(44, 102, 160, 0.4)",tickClr="rgba(0, 100, 150, 1)",bkGrad=["#ffffff","#fffffe"],$("#obaImgT").attr("src","/images/firmware/OBA-Lt.png"),$("#slmImgT").attr("src","/images/firmware/SLM-Lt.png"),$(".xClose").attr("src","/images/Close1Dk.png"),spClr[0]="#dca000",spClr[1]="#b30015",spClr[2]="#007eb9",spClr[3]="#ff6a00",spClr[4]="#750099",spClr[5]="#00a000");typeof upGraph!="undefined"&&upGraph()}function setStyleFromSysProps(n){if(typeof SystemProperties.TAG_DISPLAY_COLOR_SCHEME!="undefined"){var t=parseInt(SystemProperties.TAG_DISPLAY_COLOR_SCHEME,10);isNaN(t)&&(t=Theme.DARK);switch_style(t,swiClrs);n&&n()}else stTmCnt-->0&&setTimeout(setStyleFromSysProps,100)}function setStyleIfChngd(n){console.log("Entering ChangeStyle");var t=get_cookie(style_cookie_name);t.length?t!=n&&(console.log("making the switch"),switch_style(n,swiClrs),set_cookie(style_cookie_name,n,lifespan_in_days)):switch_style(n,swiClrs)}function setStyleByIndex(n){n!="undefined"&&n<gStyles.length?(set_cookie(style_cookie_name,n,lifespan_in_days),switch_style(n,swiClrs)):switch_style(0,swiClrs)}function setStyleIfCookie(n){var t=get_cookie(style_cookie_name);console.log(gStyles[t+0]);t!="undefined"&&t.length>0&&switch_style(t,n)}function setStyleFromCookie(n){var t=get_cookie(style_cookie_name);t!="undefined"&&t.length>0?switch_style(t,n):switch_style(0,n)}function set_cookie(n,t,i){document.cookie=n+"="+encodeURIComponent(t)+"; max-age="+86400*i+"; path=/"}function get_cookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0,f=u.length;i<f;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function getFSz(n){var t="";return n<1024?t=n+" B":n>=1073741824?t=(n/1073741824).toFixed(1)+" GB":n>=1048576?t=(n/1048576).toFixed(1)+" MB":n>=1024&&(t=(n/1024).toFixed(1)+" KB"),t.replace(".",decimalSep)}function emptyFun(){}function retHome(){console.log("GoHome");bGoHome=!0;failCnt=5;typeof app!="undefined"&&typeof app.mainframe!="undefined"&&$.mobile.changePage("#first")}function initConfDlg(){var t=undefined,n;confDialog=$("#confDialog");notifDialog=$("#notifDialog");confDialog.length<=0&&($mainView.append('<div id="confDialog" style="display:none;" title=""><div class="confDlg" style="float:left; margin:0 7px 5px 0;"><\/div><div id="dlgMessage" class="valTxt" style="font-size:13px;min-height:48px;margin-left: 25px;">Continue?<\/div><\/div>'),confDialog=$("#confDialog"));notifDialog.length<=0&&($mainView.append('<div id="notifDialog" style="display:none;" title=""><div class="confDlg" style="float:left; margin:0 7px 5px 0;"><\/div><div id="dlgMessage" class="valTxt" style="font-size:13px;min-height:48px;margin-left: 25px;">Continue?<\/div><\/div>'),notifDialog=$("#notifDialog"));n="232px";Model.indexOf("831")>=0&&(n="232px");confDialog.dialog({maxWidth:n,width:n,autoOpen:!1,modal:!0,position:["center",100],timeoutHandle:undefined,buttons:[{text:"Confirm",id:"dlgConf",click:function(){$(this).dialog("close");confDialog.confFunc!=undefined&&(confDialog.confFunc(),confDialog.confCan=undefined,confDialog.confFunc=undefined,clearTimeout(confDialog.timeoutHandle))}},{text:"Cancel",id:"dlgCan",click:function(){$(this).dialog("close");confDialog.confCan!=undefined&&(confDialog.confCan(),confDialog.confFunc=undefined,confDialog.confCan=undefined,clearTimeout(confDialog.timeoutHandle))}}]});notifDialog.dialog({maxWidth:n,width:n,autoOpen:!1,modal:!0,position:["center",100],timeoutHandle:undefined,buttons:[{text:"Confirm",id:"dlgConf",click:function(){notifDialog.confFunc!=undefined&&notifDialog.confFunc();$(this).dialog("close")}},{text:"Cancel",id:"dlgCan",click:function(){notifDialog.confCan!=undefined&&notifDialog.confCan();$(this).dialog("close")}}]});confDialog.callConfirm=function(n,t,i,r){callConfirmHelper(this,n,t,i,r)};notifDialog.callConfirm=function(n,t,i,r){callConfirmHelper(this,n,t,i,r)}}function callConfirmHelper(n,t,i,r,u){var f,e;n.open=!0;n.confFunc=r;n.find("#dlgMessage").html(i);f=n.parent();u!=undefined?(u.Can!=undefined?(e=u.Can,e.on!="on"&&f.find("#dlgCan").hide()):f.find("#dlgCan").show(),u.Conf!=undefined?(e=u.Conf,e.on!="on"&&f.find("#dlgConf").hide()):f.find("#dlgConf").show()):(f.find("#dlgCan").show(),f.find("#dlgConf").show());n.dialog("option","title",t).dialog({position:{my:"center",at:"center",of:$mainView}}).dialog("open");n.focusNextInputField&&n.focusNextInputField(1,"#dlgConf,#dlgCan",n.parent());n.timeout>0?n.timeoutHandle=setTimeout(function(){n.confOnTO?(f.find("#dlgConf").click(),delete n.confOnTO):n.canOnTO?(f.find("#dlgCan").click(),delete n.canOnTO):n.dialog("close");n.timeout=0},n.timeout):n.timeoutHandle&&clearTimeout(n.timeoutHandle)}function swiToDec(n){return SystemProperties&&SystemProperties.TAG_DISPLAY_DECIMAL&&SystemProperties.TAG_DISPLAY_DECIMAL==1&&(n=n.toString().replace(",",".")),parseFloat(n)}function swiToDecStr(n){return SystemProperties&&SystemProperties.TAG_DISPLAY_DECIMAL&&SystemProperties.TAG_DISPLAY_DECIMAL==1&&(n=n.toString().replace(",",".")),n}function swiToComma(n){return SystemProperties&&SystemProperties.TAG_DISPLAY_DECIMAL&&SystemProperties.TAG_DISPLAY_DECIMAL==1&&(n=n.toString().replace(".",",")),n}function tickForm(n){var i=[],r=0,t=0,u;n.tickSize=(n.max-n.min)/8;i.push([n.min,n.min.toString()]);t=n.min;do t+=n.tickSize,u=r%2==1?t.toFixed(0):"",i.push([t,u]),++r;while(t<n.max);return i}function formD(n,t){var r=fixedLen,i;return(n=n||0,t!==undefined&&t>=0&&(r=t),n<-99||n>350)?"---":(i=n.toFixed&&n.toFixed(r)||"",SystemProperties.TAG_DISPLAY_DECIMAL==1&&(i=i.replace(".",decimalSep)),i)}function formNum(n,t){var r=fixedLen,i;return(n=n||0,t!==undefined&&t>=0&&(r=t),n<-99)?"---":(i=n.toFixed&&n.toFixed(r)||"",SystemProperties.TAG_DISPLAY_DECIMAL==1&&(i=i.replace(".",decimalSep)),i)}function disableSelection(){$("img").addClass("unselectable").attr("unselectable","on").attr("draggable","false").on("dragstart",function(){return!1});$(document).disableSelection();$(document).on("contextmenu",function(){return!1})}function disableSelection(){}function getFilename(n){return $.getJSON("/sdk?func=fname").done(function(t){var i=t.FName,r=t.Ext;(i==undefined||i=="")&&(i="831_Data");r!=undefined&&(i=i+"."+r);n(i)})}function ResetRequired(n,t,i){function r(){$.getJSON("/sdk?func=sendCommand&type=1&data=1&id="+CMD_RESET).done(function(){typeof Sess!="undefined"&&Sess.reset!=undefined&&Sess.reset();n()})}function u(){t?r():StoreCmd(!0,undefined,r,r)}function f(){$.getJSON("/sdk?func=sendCommand&id="+CMD_STOP).done(function(){setTimeout(function(){u()},100)})}CurrentStatus.IsStopped?i?u():confDialog.callConfirm("","Reset required.",function(){u()}):i?f():confDialog.callConfirm("","Stop and Reset required.",function(){f()})}function dispHG(n){n?(hourGlass.show(),hGVis=!0,hgWatchdog!==undefined&&clearTimeout(hgWatchdog),hgWatchdog=setTimeout(function(){location.reload()},25e3)):(hourGlass.hide(),hGVis=!1,clearTimeout(hgWatchdog))}function displayReloading(){dispHG(!0)}function hideReloading(){dispHG(!1)}function StoreCmd(n,t,i,r){if(IsHvm()){r();return}typeof n=="undefined"&&(n=!0);t==undefined&&(t="Save File?");var u="";if(n===!1&&dispHG(!0),n===!0){fnDlgCtl.isOpen||(scOk=function(){totalOvly&&totalOvly.hide();var n=fnDlgCtl.fn();n.length>0?(dispHG(!0),$.getJSON("/sdk?func=sendCommand&id="+CMD_STORE+"&type="+TypeString+"&data="+n).done(function(n){ErrDup==n.ResultCode&&confDialog.callConfirm("Warning","Unable to store file.<br/>File name exists.",function(){StoreCmd()},{Can:{on:"off"}});console.log(n);Sess.reset!=undefined&&Sess.reset()}).always(function(){dispHG(!1)})):confDialog.callConfirm("","",function(){totalOvly&&totalOvly.show();fnDlgCtl.open("Save File?",scOk,scCan,u)},{Can:{on:"off"}});r instanceof Function&&r()},scCan=function(){CurrentStatus.uiMeterState==15&&SendReset(i);totalOvly&&totalOvly.hide();dispHG(!1);i instanceof Function&&i()},totalOvly&&totalOvly.show(),getFilename(function(n){u=n;fnDlgCtl.open(t,scOk,scCan,u)}));return}getFilename(function(n){totalOvly&&totalOvly.hide();$.getJSON("/sdk?func=sendCommand&id="+CMD_STORE+"&type="+TypeString+"&data="+n).done(function(n){ErrDup==n.ResultCode&&confDialog.callConfirm("Warning","Unable to store file.<br/>File name exists.",function(){StoreCmd()},{Can:{on:"off"}});dispHG(!1)}).always(function(){dispHG(!1)})}).fail(function(){dispHG(!1);console.error("error trying to get filename")})}function WaitForStore(n){waitingStore?setTimeout(WaitForStore,250,n):setTimeout(function(){n();dispHG(!1)},300)}function WaitForAutoStore(n){CurrentStatus.IsDataStored?setTimeout(function(){n();dispHG(!1)},300):setTimeout(WaitForAutoStore,250,n)}function WaitForStop(n){CurrentStatus.IsRunning?setTimeout(WaitForStop,250,n):setTimeout(function(){n();dispHG(!1)},300)}var MainView=$("#MainView"),screenWidth=480,screenHeight=640,ActiveColor="white",ActiveLblColor="#26b3f7",DisactColor="gray",SubActiveColor="#002030",DarkGrey="#111111",numFixed=1,RefreshRates={ms250:250,ms333:333,ms500:500,ms1000:1e3},TypeUnknown=0,TypeInt=1,TypeUInt=2,TypeFloat=3,TypeFloatSeries=4,TypeFloatWithFlags=5,TypeString=6,TypeByteSeries=7,TypeUIntSeries=8,TypeEnum=9,TypeUIntWithFlags=10,TypeFloatWithFlagsSeries=11,lifespan_in_days=100,DataType={Unknown:0,Int:1,UInt:2,Float:3,FloatSeries:4,FloatWithFlags:5,String:6,ByteSeries:7,UIntSeries:8,Enum:9,UIntWithFlags:10,properties:{0:{name:"unknown",value:0},1:{name:"int",value:1},2:{name:"uint",value:2},3:{name:"float",value:3},4:{name:"floatseries",value:4},5:{name:"floatwithflags",value:5},6:{name:"string",value:6},7:{name:"byteseries",value:7},8:{name:"uintseries",value:8},9:{name:"enum",value:9},10:{name:"uintwithflags",value:10}}},PauseGetRunState,stopGrabbing,setZoom,timeOffset,Custom,SlmConstants,origStyle,stTmCnt,wrapFunction,confDialog,notifDialog,cnfCon,searchFocDef,fixedLen,fnDlgCtl,scOk,scCan;Object.freeze&&Object.freeze(DataType);var RESET_REQ=1,STOP_REQ=2,FILTER_RESET_REQ=4,IMMEDIATE=268435456,WARN_ONLY=536870912,mUnknown=0,mLxT=1,mLxTSE=2,m831=3,mHVM100=4,mHVM200=5,m831C=6,Model="831",ModelNumber=m831,fullFreqs=[8,16,31.5,63,125,250,500,"1k","2k","4k","8k","16k"],thirdFreqs=[6.3,8,10,12.5,16,20,25,31.5,40,50,63,80,100,125,160,200,250,315,400,500,630,800,"1k","1.25k","1.6k","2k","2.5k","3.15k","4k","5k","6.3k","8k","10k","12.5k","16k","20k"],adjustOffset=-20,ErrorFlags={None:0,FlashReadFailure:1,FlashReadDismissed:2,FileSystemCorrupt:4,SerialNumberError:33554432,UpgradeStat3:67108864,UpgradeStat2:134217728,UpgradeStat1:268435456,UpgradeType:536870912,NoUserSDCard:1073741824,NoSensorConnected:2147483648,UC:1006632960,UCMask:469762048,UCUpgStarted:67108864,UCUpgSuccess:134217728,UCDowngrade:201326592,UCSameVersion:268435456,UCError:469762048};PauseGetRunState=!1;stopGrabbing=!1;jQuery.fn.extend({disableSelection:function(){return this.each(function(){this.onselectstart=function(){return!1};this.unselectable="on";jQuery(this).css("user-select","none");jQuery(this).css("-o-user-select","none");jQuery(this).css("-moz-user-select","none");jQuery(this).css("-khtml-user-select","none");jQuery(this).css("-webkit-user-select","none")})},enableSelection:function(){return this.each(function(){this.onselectstart=function(){return!0};this.unselectable="off";jQuery(this).css("user-select","text");jQuery(this).css("-o-user-select","text");jQuery(this).css("-moz-user-select","text");jQuery(this).css("-khtml-user-select","text");jQuery(this).css("-webkit-user-select","text")})}});String.format||(String.format=function(n){var t=Array.prototype.slice.call(arguments,1);return n.replace(/{(\d+)}/g,function(n,i){return typeof t[i]!="undefined"?t[i]:n})});setZoom=setZoom||function(n,t){n=n||10;t=t||145;(g4!==!0||Model==="831C")&&setTimeout(function(){if(window.location.href.toLowerCase().indexOf("nozoom")>=0)document.body.style.zoom=1;else{var i=Math.min((window.innerWidth-n)/240*100,(window.innerHeight-t)/320*100);document.body.style.zoom=Math.floor(i)+"%"}},250)};var CMD_RESET=1,CMD_RUN=256,CMD_STOP=257,CMD_STORE=263,CMD_EA_ON=267,CMD_EA_OFF=268,CMD_CALCHECK_INIT=269,CMD_CALCHECK_END=270,CMD_CLOSE_FILE=278,CMD_LATCH_SETTINGS=37140,CMD_METER_SHUTDOWN=524,CMD_METER_REBOOT=33699,CMD_SET_TH_MARKERS=32880,CMD_CHECK_SMTP_HOST=294,CMD_SEND_TEST_EMAIL=295,RUNNING=1,POST_RESET=2,POST_RUN=4,POST_STOP=8,POST_STOP_INSIDEAPP=16,SOUND_RECORD=32,INSTRUMENT_RESTART_WD=64,INSTRUMENT_RESTART=128,POST_PAUSE=256,PAUSED=512,SET_NEXT_ALARM=8388608,POWERING_ON=16777216,DATA_OVERRUN_SLM=33554432,DATA_OVERRUN_FFT=67108864,DATA_WAIT=134217728,DATA_RESET=268435456,DATA_STORED=536870912,RECORD_MESSAGE=1073741824,DATA_VALID=2147483648,FFTMeasCountMin=1;timeOffset=(new Date).getTimezoneOffset();Date.prototype.formatMMDDYYYYHHMM=function(){var n=this.getUTCHours(),t=this.getUTCMinutes();return this.getMonth()+1+"/"+this.getDate()+"/"+this.getFullYear()+" "+(n<10?"0"+n.toString():n.toString())+":"+(t<10?"0"+t.toString():t.toString())};Date.prototype.formatYYYYMMDDHHMM=function(){var n=this.getUTCHours(),t=this.getUTCMinutes();return this.getFullYear()+"/"+(this.getMonth()+1)+"/"+this.getDate()+" "+(n<10?"0"+n.toString():n.toString())+":"+(t<10?"0"+t.toString():t.toString())};var checkboxHeight="25",radioHeight="25",selectWidth="50";Custom={init:function(){return},pushed:function(){element=this.nextSibling;this.style.backgroundPosition=element.checked==!0&&element.type=="checkbox"?"0 -"+checkboxHeight*3+"px":element.checked==!0&&element.type=="radio"?"0 -"+radioHeight*3+"px":element.checked!=!0&&element.type=="checkbox"?"0 -"+checkboxHeight+"px":"0 -"+radioHeight+"px"},check:function(){if(element=this.nextSibling,element.checked==!0&&element.type=="checkbox")this.style.backgroundPosition="0 0",element.checked=!1,$(element).trigger("change.pop");else{if(element.type=="checkbox")this.style.backgroundPosition="0 -"+checkboxHeight*2+"px";else{this.style.backgroundPosition="0 -"+radioHeight*2+"px";group=this.nextSibling.name;inputs=document.getElementsByTagName("input");for(var n=0,t=inputs.length;n<t;n++)inputs[n].name==group&&inputs[n]!=this.nextSibling&&(inputs[n].previousSibling.style.backgroundPosition="0 0")}element.checked=!0;$(element).trigger("change.pop")}},clear:function(){inputs=document.getElementsByTagName("input");for(var n=0,t=inputs.length;n<t;n++)inputs[n].type=="checkbox"&&inputs[n].checked==!0&&inputs[n].className.indexOf("styled")>-1?inputs[n].previousSibling.style.backgroundPosition="0 -"+checkboxHeight*2+"px":inputs[n].type=="checkbox"&&inputs[n].className.indexOf("styled")>-1?inputs[n].previousSibling.style.backgroundPosition="0 0":inputs[n].type=="radio"&&inputs[n].checked==!0&&inputs[n].className.indexOf("styled")>-1?inputs[n].previousSibling.style.backgroundPosition="0 -"+radioHeight*2+"px":inputs[n].type=="radio"&&inputs[n].className.indexOf("styled")>-1&&(inputs[n].previousSibling.style.backgroundPosition="0 0")},choose:function(){option=this.getElementsByTagName("option");for(var n=0,t=option.length;n<t;n++)option[n].selected==!0&&(document.getElementById("select"+this.name).childNodes[0].nodeValue=option[n].childNodes[0].nodeValue)}};Date.prototype.getMonthName=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"][this.getMonth()]};Date.prototype.getMonthAbbr=function(){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][this.getMonth()]};Date.prototype.getDayFull=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][this.getDay()]};Date.prototype.getDayAbbr=function(){return["Sun","Mon","Tue","Wed","Thur","Fri","Sat"][this.getDay()]};Date.prototype.getDayOfYear=function(){var n=new Date(this.getFullYear(),0,1);return Math.ceil((this-n)/864e5)};Date.prototype.getDaySuffix=function(){var i=this.getDate(),n=["th","st","nd","rd"],t=i%100;return n[(t-20)%10]||n[t]||n[0]};Date.prototype.getWeekOfYear=function(){var n=new Date(this.getFullYear(),0,1);return Math.ceil(((this-n)/864e5+n.getDay()+1)/7)};Date.prototype.isLeapYear=function(){var n=this.getFullYear();if(parseInt(n,10)%4==0){if(parseInt(n,10)%100==0){if(parseInt(n,10)%400!=0)return!1;if(parseInt(n,10)%400==0)return!0}if(parseInt(n,10)%100!=0)return!0}if(parseInt(n,10)%4!=0)return!1};Date.prototype.getMonthDayCount=function(){var n=[31,this.isLeapYear()?29:28,31,30,31,30,31,31,30,31,30,31];return n[this.getMonth()]};Date.prototype.format=function(n){var u,c,i;n=n.split("");var f=this.getDate(),r=this.getMonth(),t=this.getHours(),e=this.getMinutes(),o=this.getSeconds(),l=this.getMilliseconds(),a=Math.floor(l/100),s={d:f<10?"0"+f:f,D:this.getDayAbbr(),j:this.getDate(),l:this.getDayFull(),S:this.getDaySuffix(),w:this.getDay(),z:this.getDayOfYear(),W:this.getWeekOfYear(),F:this.getMonthName(),m:r<9?"0"+(r+1):r+1,M:this.getMonthAbbr(),n:r+1,t:this.getMonthDayCount(),L:this.isLeapYear()?"1":"0",Y:this.getFullYear(),y:this.getFullYear()+"".substring(2,4),a:t>12?"pm":"am",A:t>12?"PM":"AM",g:t%12>0?t%12:12,G:t>0?t:"12",h:t%12>0?t%12:12,H:t<10?"0"+t:t,i:e<10?"0"+e:e,s:o<10?"0"+o:o,p:""+a},h="";for(u=0,c=n.length;u<c;u++)i=n[u],h+=i.match(/[a-zA-Z]/g)?s[i]?s[i]:"":i;return h};SlmConstants={Weights:["A","C","Z"],Detectors:["I","F","S"],DetectorsLong:["Impl","Fast","Slow"],WindDirs:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],WindDirUnits:["Compass","\u00b0 Degress","% Percent","V Volts"],RICorrections:["Off","RI:FF","FF:RI","FF:RI 2106/8","FF:FF 2106/8","FF:90 2106/8","FF:RI 2116","FF:FF 2116","FF:90 2116"]};var style_cookie_name="style",style_cookie_duration=365,Theme={DARK:0,LIGHT:1,DARK1:2,LIGHT1:3,DARK2:4,LIGHT2:5},currentTheme=Theme.DARK1,gStyles=["dark1","light3","dark2","light1","dark3","light2",];var maxClr="rgba(50,255,0,1)",minClr="rgba(255,255,0,1)",mainClr="rgba(55,160,240,1)",tickClr="rgba(10, 180, 240, 0.5)",chClr="rgba(200, 220, 240, 0.4)",bkGrad=["#001b60","#000000"],refreshViewData,spClr=[];stTmCnt=5;setStyleIfCookie(swiClrs);wrapFunction=function(n,t,i){return function(){n.apply(t,i)}};var failCnt=0,conFail=function(n,t,i){var r=t+", "+i;console.log("Request Failed: ",r,i);g4!=!0&&(failCnt++,failCnt>8&&(console.log("Failed to getStats"),typeof confDialog=="undefined"&&initConfDlg(),IsHvm()?confDialog.callConfirm("Warning","Connection to HVM200 lost. Select 'Home' to return to the meter list.",retHome,{Can:{on:"off"}}):confDialog.callConfirm("Warning","HLD failed to restart, please reboot the meter.",retHome,{Can:{on:"off"}})))},bGoHome=!1;window.goHome=function(){return bGoHome};cnfCon={};searchFocDef="button,input,textarea,select,a:not(.ydisabled,.mid),.header,.ui-accordion-header,.trNav";fixedLen=1;var totalOvly=window.totalOvly,upperBgOvly=window.upperBgOvly,hourGlass=$("#hg"),hgWatchdog=undefined;fnDlgCtl={inited:!1,accept:function(){upperBgOvly&&upperBgOvly.hide();ftr.lf.pop();ftr.mi.pop();ftr.rt.pop();dispHG(!0);fnDlgCtl._accept();kbCon&&kbCon.pop();$("#fnDlg").hide();fnDlgCtl.isOpen=!1},cancel:function(){upperBgOvly&&upperBgOvly.hide();ftr.lf.pop();ftr.mi.pop();ftr.rt.pop();dispHG(!0);setTimeout(function(){fnDlgCtl._cancel()},0);kbCon&&kbCon.pop();$("#fnDlg").hide();fnDlgCtl.isOpen=!1},abort:function(){upperBgOvly&&upperBgOvly.hide();totalOvly&&totalOvly.hide();bgOvly.hide();ftr.lf.pop();ftr.mi.pop();ftr.rt.pop();kbCon&&kbCon.pop();$("#fnDlg").hide();fnDlgCtl.isOpen=!1},open:function(n,t,i,r,u){var f,e,o;fnDlgCtl.isOpen=!0;upperBgOvly&&upperBgOvly.show();fnDlgCtl.inited||fnDlgCtl.init();fnDlgCtl._accept=t;fnDlgCtl._cancel=i;ftr.lf.push(!1);ftr.mi.push(!1);ftr.rt.push(!1);f=$("#fnDlg");dispHG(!1);kbCon&&kbCon.push(dlgCon,f);f.show();f.find("h1").html(n);e=$("#rnNFN");e.val(r);$("#rnOK").focus();o=f.find(".selectable:not(.greyed):visible");o.removeClass("selected");e.addClass("selected");u||$("#rnBrow").addClass("greyed")},fn:function(){return $("#rnNFN").val().replace(/[^a-z0-9_\-.]+/ig,"")},init:function(){var n=fnDlgCtl;$("#rnOK").on("click",n.accept);$("#rnCncl").on("click",n.cancel);$("#rnBrow").on("click",n.browse);onlyAlphaNumeric($("#rnNFN"),"^[a-zA-Z0-9_\\-.]+$");n.inited=!0}};