function checkTab(n){return PageArray[n].disp instanceof Boolean||typeof PageArray[n].disp=="boolean"?PageArray[n].disp:PageArray[n].disp instanceof Function?PageArray[n].disp():!1}function getGlobalDataNeeded(){getDataNeeded("live",globalDataNeeded)}function getDataNeeded(n,t,i){var h,u,f,c;rtcnt++;var e="",o="",r="live",s="";for(finGDN=!1,h=t||page.dataNeeded,u=h.slice(),f=0,c=u.length;f<c;f++)u[f]instanceof Object?(getDataNeeded(u[f].g||n,u[f].data),u.splice(f,1),--c):(e.length>0&&(e+=",",o+=",",s+=","),e+=DataTags[u[f]].ID,o+=""+DataTags[u[f]].Type,s+=DataTags[u[f]].nDx!==undefined?DataTags[u[f]].nDx:0);if(n!==undefined)r=n;else switch(curTabIndex){case 1:r="overall";break;case 2:r="overall";break;case 3:r="current";break;case 4:r="measurement";break;case 5:r="events";break;case 6:r="time";break;case 7:r="sysinfo";break;case 0:default:r="live"}inFileDsp&&r.indexOf("file")<0&&curTabIndex<=6&&(r="file"+r);CurrentStatus.IsRunning||CurrentStatus.IsPaused||r==="live"||r==="oneseclive"||initialGet||r==="sysinfo"?(e.length>0?$.getJSON("/sdk?func=getdatamulti&group="+r+"&tagids="+e+"&types="+o+"&indices="+s).done(function(n){var t,r,i;for(WebSocketComm.Worked&&!WebSocketComm.Connected&&WebSocketComm.Reconnect(),t=0,r=u.length;t<r;++t)n.Data&&n.Data[t]&&n.Data[t].value!==undefined&&(DataTags[u[t]]&&DataTags[u[t]].ID==n.Data[t].tagId?(i=u[t],pageData[i]=n.Data[t].value,n.Data[t].flags!==undefined&&(pFlags[i]=n.Data[t].flags)):console.log(u[t],":",DataTags[u[t]]))}).always(function(){i&&i();finGDN=!0}):(i&&i(),finGDN=!0),h==page.dataNeeded&&(initialGet=!1)):finGDN=!0}function pushPage(n,t,i,r){r==undefined&&i instanceof Object&&(r=i);i instanceof String||typeof i=="string"?mainTitle.push(i):mainTitle.push("");pageStack.push({t:curTabIndex,p:curPageIndex});r!==undefined?(ftr.lf.push(r.lf),ftr.mi.push(r.mi),ftr.rt.push(r.rt)):(ftr.lf.push(!1),ftr.mi.push(!1),ftr.rt.push(!1));sideLoader(n,t)}function popPage(){var n=pageStack[pageStack.length-1];pageStack.pop();ftr.lf.pop();ftr.mi.pop();ftr.rt.pop();mainTitle.pop();sideLoader(n.t,n.p)}function refreshViewData(){initialGet=!0;sideLoader(curTabIndex,curPageIndex)}function sideLoader(n,t){prevTab=curTabIndex;prevPage=curPageIndex;findStPg(n,t)}function findStPg(n,t){var r,i;for(checkTab(n)||(n=tbId.Live),r=PageArray[n],curTabIndex=n,i=t;i<=maxPageLength;++i)if(r[i]!==undefined&&r[i].vis){curPageIndex=i;mainLoader(curTabIndex,curPageIndex);return}for(i=0;i<t;++i)if(r[i]!==undefined&&r[i].vis){curPageIndex=i;mainLoader(curTabIndex,curPageIndex);return}curTabIndex=tbId.Live;curPageIndex=pgId.Profile}function prepView(){curTabIndex!==prevTab&&(curTabIndex===tbId.Measure?pushMHCnt():prevTab===tbId.Measure&&popMHCnt())}function mainLoader(n,t){var r=0,i,o,f,s,e,u,h;if(ollTime=0,lastFoc={},page=PageArray[prevTab][prevPage],i=PageArray[n][t],i.refDRate===undefined)for(i.refDRate=RefreshRates.ms1000,e=i.controls.length,r=0;r<e;++r)typeof i.controls[r].refreshRate!="undefined"&&(i.refDRate=Math.min(i.controls[r].refreshRate,i.refDRate));for(initialGet=!0,WebSocketComm&&WebSocketComm.Connected&&WebSocketComm.GetID?(o={},f=GroupTabToName(curTabIndex),i.Registering==undefined&&(i.Registering={}),i.Registering[f]==undefined&&(i.Registering[f]=GenRegJSON(f,0,i.dataNeeded)),o.Registering=i.Registering[f],WebSocketComm.SetDataRate(i.refDRate),WebSocketComm.SetDataNeeded(o)):getDataNeeded(undefined,undefined,prepView),s=page.controls.length,r=0;r<s;++r)typeof page.controls[r].leave!="undefined"&&page.controls[r].leave(curTabIndex,curPageIndex);for(document.rootElement&&document.rootElement.focus(),page=i,curTabIndex=n,curPageIndex=PageArray[curTabIndex].lastPgId=t,getMeasSysProps(100,!1),getMeasSysProps(200,!1),console.log("enter functions and Updates: ",page.controls[0].id),e=page.controls.length,r=0;r<e;++r)u=page.controls[r],typeof u.init=="undefined"||u.isInit||u.init(),u.enter(n,t),setTimeout(function(){u.update(u.refreshRate)},0);setMaxTab();updateMainTitle();h=prevLockMode!==SystemProperties.TAG_LOCK_MODE||prevLockCom!==SystemProperties.TAG_LOCK_COM||prevLockCal!==SystemProperties.TAG_LOCK_CAL;SystemProperties.TAG_LOCK_MODE>0&&h&&curTabIndex!==tbId.PwrOff&&curTabIndex!==tbId.Calibrate&&!(g4==!0&&(OnSettingTabs||OnSystemTabs))?(prevLockMode=SystemProperties.TAG_LOCK_MODE,prevLockCom=SystemProperties.TAG_LOCK_COM,prevLockCal=SystemProperties.TAG_LOCK_CAL,LkScrn()):SystemProperties.TAG_LOCK_MODE===0&&curTabIndex===tbId.LockedScreen&&(lkScrnClose(),prevLockMode=9999,dispHG(!1));prevLockMode=SystemProperties.TAG_LOCK_MODE;prevLockCom=SystemProperties.TAG_LOCK_COM;prevLockCal=SystemProperties.TAG_LOCK_CAL;curTabIndex<tbId.Live||curTabIndex>tbId.TimeHist||inFileDsp?$("#imgMenu").hide():$("#imgMenu").show()}function updatePage(n){page.externalUpdate&&!n?page.externalUpdate=!1:(page.externalUpdate=n,page.controls.forEach(function(n){ollTime%n.refreshRate!=0||n.busy||n.update===undefined||n.update(n.refreshRate)}))}function findLeftTab(n){var i=minTabLen,t;for(n<minTabLen&&(n=maxTabLen),t=n;t>=minTabLen;--t)if(PageArray[t][PageArray[t].lastPgId]!==undefined&&checkTab(t)){i=t;break}return i}function findRightTab(n){for(var i=minTabLen,t=n;t<=maxTabLen;++t)if(PageArray[t][PageArray[t].lastPgId]!==undefined&&checkTab(t)){i=t;break}return i}function updateMainTitle(){var i=curTabIndex,n=PageArray[i],r="",t;i!==tbId.LockedScreen?(n.pCnt>1?(pageArrows.show(),r=" ("+n[n.lastPgId].idx+" of "+n.pCnt+")"):pageArrows.hide(),maxTabLen-minTabLen>0?(tabBar.html(n.Name+r),t=i-1,t=findLeftTab(t),ftr.lf.text(PageArray[t].sName),t=findRightTab(i+1),ftr.rt.text(PageArray[t].sName),ftr.rt.show(),ftr.lf.show()):tabBar.html(n.Name+r)):tabBar.html("LOCKED")}function keyUpArrow(){var t=PageArray[curTabIndex],n;if(t.length===1)return!0;for(curPageIndex=t.lastPgId,prevTab=curTabIndex,prevPage=curPageIndex,curPageIndex>0?curPageIndex--:curPageIndex=t.length-1,n=curPageIndex;t[n]===undefined||!t[n].vis;)if(--n,n<0&&(n=maxPageLength-1),n===prevPage)return curPageIndex=n,t.lastPgId=curPageIndex,!0;return curPageIndex=n,t.lastPgId=curPageIndex,mainLoader(curTabIndex,curPageIndex),!0}function keyDownArrow(){var t=PageArray[curTabIndex],n;if(t.length===1)return!0;for(curPageIndex=t.lastPgId,prevTab=curTabIndex,prevPage=curPageIndex,curPageIndex<t.length-1?curPageIndex++:curPageIndex=0,n=curPageIndex;t[n]===undefined||!t[n].vis;)if(++n,n>=maxPageLength&&(n=0),n===prevPage)return curPageIndex=n,t.lastPgId=curPageIndex,!0;return curPageIndex=n,t.lastPgId=curPageIndex,mainLoader(curTabIndex,curPageIndex),!0}function keyLeftArrow(){prevTab=curTabIndex;prevPage=PageArray[curTabIndex].lastPgId;curTabIndex>minTabLen?--curTabIndex:curTabIndex=maxTabLen;var n=findLeftTab(curTabIndex);return curTabIndex=n,curPageIndex=PageArray[curTabIndex].lastPgId,findStPg(curTabIndex,curPageIndex),!0}function keyRightArrow(){prevTab=curTabIndex;prevPage=PageArray[curTabIndex].lastPgId;curTabIndex<maxTabLen?++curTabIndex:curTabIndex=minTabLen;var n=findRightTab(curTabIndex);return curTabIndex=n,curPageIndex=PageArray[curTabIndex].lastPgId,findStPg(curTabIndex,curPageIndex),!0}function centralTimer(){if(OnMeter&&(typeof WebSocketComm=="undefined"||!WebSocketComm.Connected)){try{var n=page.refDRate;inFileDsp&&(n=1e3);ollTime%page.refDRate==0&&finGDN?(getDataNeeded(),refTime-=10,refTime=refTime<250?250:refTime):finGDN||(refTime+=10,refTime=refTime>500?500:refTime);updateLights();screenOn&&page.controls.forEach(function(n){ollTime%n.refreshRate!=0||n.busy||n.update==undefined||n.update(n.refreshRate)})}catch(t){console.error("####> CentralTimer exceptioned: "+t.message+" <####")}wdCnt>5&&(typeof wdTmr!="undefined"&&clearTimeout(wdTmr),wdTmr=setTimeout(wDogTimer,0),console.error("####> centralTimer restarted Watchdog! <####"));wdCnt++;screenOn||(refTime=4e3);typeof centTmr!="undefined"&&clearTimeout(centTmr);ollTime+=250;centTmr=setTimeout(centralTimer,refTime)}}function wDogTimer(){if(OnMeter&&(typeof WebSocketComm=="undefined"||!WebSocketComm.Connected)){wdCnt==0&&(typeof centTmr!="undefined"&&clearTimeout(centTmr),centTmr=setTimeout(centralTimer,0),console.error("####> Watchdog restarted centralTimer! <####"));wdCnt=0;typeof WebSocketComm!="undefined"&&WebSocketComm.Connected||(stsTmrCnt===0?stsZroCnt++>4&&(statusTmr!==undefined&&clearTimeout(statusTmr),statusTmr=setTimeout(wrapFunction(getRunningState,this,[emptyFun,1]),0),console.error("####> Watchdog restarted statusTmr! <####")):(stsTmrCnt=0,stsZroCnt=0));var n=1e3;screenOn||(n=4e3);typeof wdTmr!="undefined"&&clearTimeout(wdTmr);wdTmr=setTimeout(wDogTimer,n)}}function setMaxTab(){curTabIndex<=tbId.TimeHist?inFileDsp?(maxTabLen=tbId.TimeHist,minTabLen=1):(maxTabLen=tbId.TimeHist,minTabLen=0,menuOpen||ChkBkEr(curTabIndex,prevTab)):curTabIndex<=tbId.CalChkHist?envPrmp||MeasurementProperties.TAG_PREAMPTYPE=="PRM2103"||MeasurementProperties.TAG_PREAMPTYPE=="426A12"?(maxTabLen=tbId.CalChkHist,minTabLen=tbId.Calibrate):(maxTabLen=tbId.Certificate,minTabLen=tbId.Calibrate):curTabIndex<=tbId.User?(maxTabLen=tbId.User,minTabLen=tbId.About):curTabIndex===tbId.DataMgr?(maxTabLen=tbId.DataMgr,minTabLen=tbId.DataMgr):curTabIndex===tbId.SysUtils?(maxTabLen=tbId.SysUtils,minTabLen=tbId.SysUtils):curTabIndex===tbId.PwrOff?(maxTabLen=tbId.PwrOff,minTabLen=tbId.PwrOff):curTabIndex===tbId.Wifi?(maxTabLen=tbId.Wifi,minTabLen=tbId.Wifi):curTabIndex<=tbId.sysSpec||!OnMeter&&curTabIndex<=tbId.SetupMgr&&OnSystemTabs?(maxTabLen=tbId.SetupMgr,minTabLen=tbId.Device):curTabIndex<=tbId.mpRASrc?(maxTabLen=tbId.mpRASrc,minTabLen=tbId.SetupMgr):(maxTabLen=curTabIndex,minTabLen=curTabIndex)}function setFixedLen(n){fixedLen=n;fixedLen>1&&$(".bdDisplaymain").css("font-size","65px")}function formD1(n,t,i){return i=i||1,formD((pageData[n]||-99.9)*i,t)}function formD2(n,t){var r=fixedLen,i;return(n=n||0,t!=undefined&&t>=0&&(r=t),n<-99)?"---":(i=n.toFixed&&n.toFixed(r)||"",SystemProperties.TAG_DISPLAY_DECIMAL==1&&(i=i.replace(".",decimalSep)),i)}function GroupTabToName(){var n="live";switch(curTabIndex){case 1:case 2:n="overall";break;case 3:n="current";break;case 4:n="measurement";break;case 5:n="events";break;case 6:n="time";break;case 0:default:n="live"}return inFileDsp&&n.indexOf("file")<0&&(n="file"+n),n}function GenRegJSON(n,t,i){var e=[],n={g:n,i:t||0},o=[],r,f,s,h,u;for(r in i)if(i[r]instanceof Object){f={g:i[r].g,i:i[r].i||0};s=[];for(h in i[r].data)u=DataTags[i[r].data[h]],s.push({tg:u.ID,tp:u.Type,n:i[r].data[h]+((i[r].i||0)!=0?i[r].i:"")});f.tags=s;inFileDsp&&f.g.indexOf("file")<0&&(f.g="file"+f.g);e.push(f)}else u=DataTags[i[r]],o.push({tg:u.ID,tp:u.Type,n:i[r],i:u.nDx});return o.length>0&&(n.tags=o,e.push(n)),e}function upMHCntTitle(){var n="&nbsp;";tbId.Measure===curTabIndex&&0<pageData.TAG_IO_NUM_HISTORY_RECORDS?n=", "+((pageData.TAG_IO_MEAS_HIST_CUR_RECORD||0)+1)+"/"+pageData.TAG_IO_NUM_HISTORY_RECORDS:tbId.Events==curTabIndex&&0<pageData.TAG_IO_NUM_EVENT_RECORDS&&(n=", "+((pageData.TAG_IO_EVENT_HIST_CUR_RECORD||0)+1)+"/"+pageData.TAG_IO_NUM_EVENT_RECORDS);n!==measStr&&(measCtr.html(n),measStr=n)}function pushMHCnt(){measCtr.show();upMHCntTitle()}function popMHCnt(){upMHCntTitle()}function getProp(n,t,i){var r,u;PropertyTags[n]!=undefined?(r=MeasurementProperties,u=PropertyTags[n]):SystemTags[n]!=undefined&&(r=SystemProperties,u=SystemTags[n]);u!=undefined&&$.getJSON("/sdk?func=getProperty&tagid="+u.ID+"&type="+t).done(function(t){r[n]=t.ResultCode==0?t.value:undefined;i!=undefined&&i()})}function assignKeys(){enterKDFunc=anylm()?function(){anyLvlDlg.dialog("open");ftr.mi.text("Close");menuOpen=!0}:undefined;menuKDFunc=function(){}}function ckPk(n){return n.search("L<sub>Apeak</sub>")>=0?n="L<sub>Apeak(max)</sub>":n.search("L<sub>Cpeak</sub>")>=0?n="L<sub>Cpeak(max)</sub>":n.search("L<sub>Zpeak</sub>")>=0&&(n="L<sub>Zpeak(max)</sub>"),n}function updAnyLvlStr(){var t=ShortLWDStr("L<sub>$#</sub>"),n;for(((SystemProperties.TAG_MASK_OPTION||0)&8388608)!=0&&(t="L<sub>NF<\/sub>"),n=0;n<6;++n)AnyDataParam[54+n].str=t+"<sub>"+parseFloat(MeasurementProperties["TAG_LN_"+n]).toString()+"<\/sub>"}function timeInd(n,t){var i=CurrentStatus.indicators&(IND_NTP_TIME_SYNC|IND_GPS_TIME_SYNC);return i!==t&&(n.show(),t=i,i===IND_NTP_TIME_SYNC?n.attr("src","/images/firmware/ntpSync.png"):i===IND_GPS_TIME_SYNC?n.attr("src","/images/firmware/gps.png"):n.attr("src","/images/space.gif")),t}function getRunPause(n,t,i){if(i)n.html("--:--:--.-"),t.html("--:--:--.-");else{var u=Math.round((pageData.TAG_IO_RUN_TIME||0)*1e5)/100,r=new Date(1970,0,1);r.setMilliseconds(u);n.html(r.format(timeFm));r=new Date(1970,0,1);r.setMilliseconds((pageData.TAG_IO_PAUSE_TIME||0)*1e3);t.html(r.format(timeFm))}}function asciiOnly(n){for(var r,t="",i=0,u=n.length;i<u;i++)r=n.charCodeAt(i),r>127&&(t+="&#176;"),t+=r;return t}function getValue(n,t){$.getJSON("/sdk?func=getdatanew&group="+t+"&type="+DataTags[n].Type+"&tagid="+DataTags[n].ID).done(function(t){pageData[n]=t.Data!=undefined?t.Data==-9999?"---":DataTags[n].Prec!=undefined?formD(t.Data,DataTags[n].Prec):t.Data:1.1})}function swap32(n){return(n&255)<<24|(n&65280)<<8|n>>8&65280|n>>24&255}function toHex(n,t){for(var i=n.toString(16),r=i.length;r<t;++r)i="0"+i;return i}function updateChargeLevel(){var n,t,i;HostIsDirectIO||(lvlInd===undefined&&(lvlInd=$("#chargeLevel"),chrgInd=$("#chargeInd"),plgInd=$("#plugInd"),batt=$("#imgBatLevel"),bUnk=$("#unkInd")),n=CurrentStatus.indicators,n&(IND_USB_POWERED|IND_EXTERNALY_POWERED)?n&IND_CHARGING?(chrgState!=0&&(chrgInd.show(),batt.show(),plgInd.hide(),bUnk.hide(),lvlInd.css("background-color","forestgreen"),chrgState=0),pr%3==0&&(t=(1.7*pr).toFixed(0),i=17-t,lvlInd.css("margin-top",i),lvlInd.css("height",t)),pr>=10?pr=0:++pr):chrgState!=1&&(plgInd.show(),chrgInd.hide(),lvlInd.css("height",0),batt.hide(),bUnk.hide(),chrgState=1):(chrgState!=2&&(lvlInd.css("height",0),pr=11),pr>10?($.getJSON("/sdk?func=get&f=128&p1=200&format=8,perc:f4,ack:u4&vals=1347699010").done(function(n){var i=n.Response.perc,t,r;i<0?bUnk.show():(bUnk.hide(),lvlInd.show(),t=(.15*i).toFixed(0),r=17-t,t<4?lvlInd.css("background-color","red"):t<8?lvlInd.css("background-color","yellow"):lvlInd.css("background-color","forestgreen"),lvlInd.css("margin-top",r),lvlInd.css("height",t));chrgState!=2&&(batt.show(),plgInd.hide(),chrgInd.hide(),bUnk.hide(),chrgState=2)}),pr=0):++pr))}function updateLights(){function u(n){for(var t=0;t<periodCount;++t)n+=".";return periodCount<7?++periodCount:periodCount=1,n}var i,n,f,r,t;if(window.ftr&&ftr.lf&&ftr.rt&&ftr.mi&&typeof CurrentStatus.uiRunFlags!="undefined"){if(CurrentStatus.IsRunPending!=0?lastState!=POST_RUN&&(imRSt.attr("src","/images/RunPendingIcon.png"),mainTitle.refresh(),lastState=POST_RUN):(CurrentStatus.uiRunFlags&PAUSED)!=0?(pauseCnt<=0?pauseCnt++:pauseCnt++,pauseCnt>1&&(pauseCnt=0),isRunning=!0,playKey=!0,lastState!=2&&(imRSt.attr("src","/images/PauseIcon.png"),mainTitle.refresh(),lastState=2),curTabIndex===tbId.Overall&&backEraseAct!=!0&&(BeginBackErase(),backEraseAct=!0)):(CurrentStatus.uiRunFlags&RUNNING)!=0?(isRunning=!0,playKey=!1,lastState!=1&&(imRSt.attr("src","/images/RunIcon.png"),mainTitle.refresh(),lastState=1),backEraseAct&&(EndBackErase(),backEraseAct=!1)):(CurrentStatus.uiLxTFlags&SLM_SLEEP)!=0?(isRunning=!1,playKey=!0,lastState!=SLM_SLEEP&&(imRSt.attr("src","/images/firmware/bmp_sleep.png"),lastState=SLM_SLEEP),backEraseAct&&(EndBackErase(),backEraseAct=!1)):(isRunning=!1,playKey=!0,CurrentStatus.IsDataReset&&lastState!=DATA_RESET?(imRSt.attr("src","/images/StopReset.png"),lastState=DATA_RESET,mainTitle.refresh()):CurrentStatus.IsDataReset||lastState==0||(imRSt.attr("src","/images/StopIcon.png"),lastState=0,mainTitle.refresh()),backEraseAct&&(EndBackErase(),backEraseAct=!1)),SystemProperties.TAG_USB_HOST_POWER>0&&UpdateUSBIndicator(CurrentStatus.indicators&(IND_USB_PRESENT|IND_USB_ACTIVE_PRIMARY|IND_DEV_BUSY),SystemProperties.TAG_USB_STORAGE,SysUtils&&SysUtils.mID),CurrentStatus.uiLxTFlags&(SLM_OBA_OVER_BLINK|SLM_OBA_OVER_ALL|SLM_OBA_UNDER_NOW)?(CurrentStatus.uiLxTFlags&SLM_OBA_OVER_BLINK?(obaInd.toggle(),obaImg.toggle()):CurrentStatus.uiLxTFlags&SLM_OBA_OVER_ALL&&(obaImg.show(),obaInd.show()),CurrentStatus.uiLxTFlags&SLM_OBA_UNDER_NOW?(obaTog?obaInd.addClass("underBord"):obaInd.removeClass("underBord"),obaTog=!obaTog,obaInd.show()):obaInd.removeClass("underBord")):(obaInd.hide(),obaInd.removeClass("underBord")),CurrentStatus.uiLxTFlags&(SLM_OVER_BLINK|SLM_OVER_ALL|SLM_UNDER_NOW)?(CurrentStatus.uiLxTFlags&SLM_OVER_BLINK?(slmInd.toggle(),slmImg.toggle()):CurrentStatus.uiLxTFlags&SLM_OVER_ALL&&(slmImg.show(),slmInd.show()),CurrentStatus.uiLxTFlags&SLM_UNDER_NOW?(slmTog?slmInd.addClass("underBord"):slmInd.removeClass("underBord"),slmTog=!slmTog,slmInd.show()):slmInd.removeClass("underBord")):(slmInd.hide(),slmInd.removeClass("underBord")),i=CurrentStatus.indicators&(IND_FS_CHECK|IND_FS_FORMAT|IND_FS_FORMAT_RESTORE|IND_FILE_OPERATION_FROM_INTERNAL|IND_FILE_OPERATION_TO_INTERNAL|IND_WIFI_ALL_BITS),i!==lastFileWifiInd&&(lastFileWifiInd=i,n=CurrentStatus.indicators&IND_WIFI_ALL_BITS,f=0,n>0?$("#wifiLink").show():$("#wifiLink").hide(),(CurrentStatus.indicators&(IND_FILE_OPERATION_FROM_INTERNAL|IND_FILE_OPERATION_TO_INTERNAL|IND_FS_CHECK|IND_FS_FORMAT|IND_FS_FORMAT_RESTORE))>0?fileInd.attr("src","/images/FileProcess.png"):IND_WIFI_ACCESS_POINT===n?fileInd.attr("src","/images/AccessPoint.png"):IND_WIFI_DISCONNECTED===n?fileInd.attr("src","/images/WifiNoCon.png"):n>0?fileInd.attr("src","/images/WifiIcon"+(n/2048-1)+".png"):fileInd.attr("src","/images/space.gif")),printerPresent!=(CurrentStatus.indicators&IND_PRINTER)&&(printerPresent=CurrentStatus.indicators&IND_PRINTER,printerPresent?mainMenu.find(".needPrinter").show():mainMenu.find(".needPrinter").hide()),OnSettingTabs||OnSystemTabs||(r=CurrentStatus.indicators&IND_SETTINGS_CHANGE_BITS,r!=lastSettingsStatus&&lastSettingsStatus!=undefined&&getMeasSysProps(100,!0).always(function(){getMeasSysProps(200,!0).always(function(){setupPageCounts();refreshViewData();mainTitle.refresh();window.IsLocal&&SystemProperties.TAG_DISPLAY_COLOR_SCHEME!=get_cookie(style_cookie_name)&&setStyleFromSysProps(PageArray[curTabIndex][curPageIndex].controls[0].updateGraph)})}),lastSettingsStatus=r),IsLocal?((CurrentStatus.indicators&IND_DISPLAY_BACKLIGHT_OFF)>0?(screenOn&&(WebSocketComm.SetDataRate(0),kbCon.push(noScrnCon,null),PauseGetRunState=!0),screenOn=!1):screenOn||(screenOn=!0,WebSocketComm.SetDataRate(page.refDRate),kbCon.popAllOf(noScrnCon),WebSocketComm.Connected||(centTmr=setTimeout(centralTimer,250)),PauseGetRunState=!1),!audioStreaming&&CurrentStatus.indicators&IND_STREAMING_AUDIO?(audioStreaming=!0,confDialog.confCan=function(){$.getJSON("/sdk?func=endaudiostream")},$("#MainView").hide(),WebSocketComm.SetDataRate(0),kbCon.push(noScrnCon,null),PauseGetRunState=!0,confDialog.callConfirm("","Audio streaming in progress.  Cancel to stop streaming.",confDialog.confCan,{Conf:{on:"off"}})):!audioStreaming||CurrentStatus.indicators&IND_STREAMING_AUDIO||(audioStreaming=!1,confDialog.dialog("close"),$("#MainView").show(),kbCon.pop(),console.log("Turning on web sockets after compressed stream off"),WebSocketComm.SetDataRate(page.refDRate),WebSocketComm.Connected||(centTmr=setTimeout(centralTimer,250)),PauseGetRunState=!1),!recoveryImg&&CurrentStatus.indicators&IND_RECOVERY_IMG?(recoveryImg=!0,$("#recoveryOvly").show(),kbCon.push(rcCon,null)):recoveryImg&&(CurrentStatus.indicators&IND_RECOVERY_IMG)==0&&(recoveryImg=!1,$("#recoveryOvly").hide(),kbCon.pop())):inFileDsp&&(IsUSB&&(CurrentStatus.indicators&IND_FILE_OPEN_USB)==0||IsTCP&&(CurrentStatus.indicators&IND_FILE_OPEN_TCP)==0)?(closingFileCounter==1&&(DFMan.isInit||DFMan.init(),setTimeout(function(){DFMan.closeFileHandler()},0)),++closingFileCounter):closingFileCounter=0,CurrentStatus.indicators&(IND_FS_CHECK|IND_FS_FORMAT|IND_FS_FORMAT_RESTORE)){if(SysUtils.cmd){t="";dispHG(!1);switch(SysUtils.cmd){case 129:t="Formatting<br\>";break;case 130:t="Formatting and restoring defaults.<br\>The meter will reboot when complete.<br\>";break;case 131:t="Checking file system.<br\>This may take some time.<br\>"}confDialog.callConfirm("",u(t),function(){},{Can:{on:"off"},Conf:{on:"off"}})}}else SysUtils.cmd&&sysUtilsCmdCounter--<=0&&(periodCount=1,confDialog.dialog("close"),dispHG(!1));ErrorFlags.UCUpgStarted==(CurrentStatus.nErrorFlags&ErrorFlags.UCMask)&&!1==upgrading&&(upgrading=!0,informUserOFError());updateChargeLevel();CurrentStatus.changeState&&(CurrentStatus.IsDataReset&!inFileDsp&&Sess.started&&Sess.reset(),CurrentStatus.changeState=!1);CurrentStatus.file_count!=fileCount&&(fileCount=CurrentStatus.file_count,getProp(PropertyTags.TAG_FILE_NAME,TypeString,function(){getProp(SystemTags.TAG_FILE_EXTENSION_EX,TypeString,function(){mainTitle.refresh()})}));processNotifications()}}function processNotifications(){var n,i,t,r;if(CurrentStatus.Force?notifForceCount++:notifForceCount=0,n=CurrentStatus.notifID||0,lastNoti!=n||notifForceCount>4&&notifDialog.open==!1||notifDialog.open&&n==NID_NONE&&16777215){i=lastNoti;lastNoti=n;n=n&16777215;(i&16777215)!=NID_NONE&&i!=lastNoti&&(DFMan.isInit&&DFMan.clsErr(),notifDialog.dialog("close"),notifDialog.open=!1,waitingStore&&(waitingStore=!1,fnDlgCtl.abort()));switch(n){case NID_IMPROPER_SHUTDOWN_SAVE_FILE:notifDialog.timeout=0;t=" Data will be reset.  Save data? ";notifDialog.confCan=function(){$.getJSON("/sdk?func=acknotif&id="+n+"&code="+NOTIFY_RSP_NO).done(function(){Sess.reset!=undefined&&Sess.reset()})};notifDialog.callConfirm("",t,function(){console.log("Save file");$.getJSON("/sdk?func=acknotif&id="+n+"&code="+NOTIFY_RSP_YES).done(function(){StoreCmd(!0,"Save File?",function(){SendReset()})})});break;case NID_PREAMP_CONNECTED:case NID_PREAMP_DISCONNECTED:notifDialog.confOnTO=!0;t="Preamp Disconnected";r="Warning";(CurrentStatus.notifID&NID_PREAMP_CONNECTED)>0&&(t="Preamp Connected",r="");t+="<br>(Mic Corr. "+micCorrStr[SystemProperties.TAG_RANDOMCORRECTION]+")";notifDialog.timeout=5e3;notifDialog.callConfirm(r,t,function(){$.getJSON("/sdk?func=acknotif&id="+n+"&code="+NOTIFY_RSP_OK)},{Can:{on:"off"}});getMeasSysProps(100,!0);break;case NID_FILE_OPERATION_COMPLETE:DFMan.isInit||DFMan.init();DFMan.refresh&&DFMan.refresh();DFMan.showComplete();break;case NID_FILE_OPERATION_FAILURES:DFMan.isInit||DFMan.init();DFMan.refresh&&DFMan.refresh();DFMan.showErrors();break;case NID_FORMAT_ERROR:SysUtils.isInit||SysUtils.init();SysUtils.clear("Warning","Error while formatting.",n);break;case NID_FORMAT_SUCCESS:SysUtils.isInit||SysUtils.init();SysUtils.clear("","Successfully formatted file system.",n);break;case NID_CHECK_FS_ERROR:SysUtils.isInit||SysUtils.init();SysUtils.clear("Warning","Error while checking file system.",n);break;case NID_CHECK_FS_SUCCESS:SysUtils.isInit||SysUtils.init();SysUtils.clear("","Successfully checked file system.<br\>Any errors were fixed automatically.",n);break;case NID_FORMAT_RESTORE_ERROR:SysUtils.isInit||SysUtils.init();SysUtils.clear("Warning","Error formatting and restoring defaults.",n);break;case NID_FORMAT_RESTORE_SUCCESS:SysUtils.isInit||SysUtils.init();SysUtils.clear("","Successfully formatted and restored defaults.",n);break;case NID_USB_ACTIVE_FILE_NOT_VALID:closeIfCleared=!0;notifDialog.timeout=0;notifDialog.confCan=function(){closeIfCleared=!1;$.getJSON("/sdk?func=acknotif&id="+NID_USB_ACTIVE_FILE_NOT_VALID+"&code="+NOTIFY_RSP_NO);setTimeout(function(){var n=function(){$.getJSON("/sdk?func=sendCommand&type=1&data=1&id="+CMD_RESET).done(function(){Sess.reset!=undefined&&Sess.reset()})};notifDialog.confCan=n;notifDialog.timeout=0;notifDialog.callConfirm(""," Data will be reset.  Save data? ",function(){console.log("Save file");StoreCmd(!0,"",n)})},10)};notifDialog.callConfirm("","In-progress measurement detected on USB storage with conflicting settings.<br\>Restore?",function(){$.getJSON("/sdk?func=acknotif&id="+NID_USB_ACTIVE_FILE_NOT_VALID+"&code="+NOTIFY_RSP_YES)});break;case NID_BATTERY_LOW_WARNING_1:notifDialog.timeout=5e3;notifDialog.callConfirm("Warning","Battery low, please shutdown or switch to an external power source. Shutting down in 4 minutes..",function(){},{Can:{on:"off"}});break;case NID_BATTERY_LOW_WARNING_2:notifDialog.timeout=5e3;notifDialog.callConfirm("Warning","Battery low, please shutdown or switch to an external power source. Shutting down in 3 minutes..",function(){},{Can:{on:"off"}});break;case NID_BATTERY_LOW_WARNING_3:notifDialog.timeout=5e3;notifDialog.callConfirm("Warning","Battery low, please shutdown or switch to an external power source. Shutting down in 2 minutes..",function(){},{Can:{on:"off"}});break;case NID_BATTERY_LOW_WARNING_4:notifDialog.timeout=5e3;notifDialog.callConfirm("Warning","Battery low, please shutdown or switch to an external power source. Shutting down in 1 minutes..",function(){},{Can:{on:"off"}});break;case NID_BATTERY_LOW_SHUTDOWN:notifDialog.timeout=0;notifDialog.callConfirm("","Powering Off. Please wait...",function(){},{Can:{on:"off"},Conf:{on:"off"}});break;case NID_EXT_POWER_LOW_WARNING_1:notifDialog.timeout=0;closeIfCleared=!0;notifDialog.callConfirm("Warning","Low external voltage detected. Will shutdown in one minute.",function(){},{Can:{on:"off"},Conf:{on:"off"}});break;case NID_EXT_POWER_LOW_SHUTDOWN:notifDialog.timeout=0;closeIfCleared=!0;notifDialog.callConfirm("Warning","Shutting down due to low external voltage. Please wait...",function(){},{Can:{on:"off"},Conf:{on:"off"}});break;case NID_USB_HOST_OL_HP:notifDialog.timeout=15e3;closeIfCleared=!0;notifDialog.callConfirm("Warning","USB Host exceeded 0.5 Amps. Disconnect attached USB devices.",function(){$.getJSON("/sdk?func=acknotif&id="+NID_USB_HOST_OL_HP+"&code="+NOTIFY_RSP_OK).done(function(){setTimeout(function(){n=0;CurrentStatus.notifID=0},500)})},{Can:{on:"off"}});break;case NID_USB_HOST_OL_LP:notifDialog.timeout=15e3;closeIfCleared=!0;notifDialog.callConfirm("Warning","USB Host exceeded 0.3 Amps. Disconnect attached USB devices or connect meter to external power.",function(){$.getJSON("/sdk?func=acknotif&id="+NID_USB_HOST_OL_LP+"&code="+NOTIFY_RSP_OK).done(function(){setTimeout(function(){n=0;CurrentStatus.notifID=0},500)})},{Can:{on:"off"}});break;case NID_USB_ACTIVE_FILE_PRESENT:closeIfCleared=!0;notifDialog.timeout=0;notifDialog.confCan=function(){$.getJSON("/sdk?func=acknotif&id="+NID_USB_ACTIVE_FILE_PRESENT+"&code="+NOTIFY_RSP_NO).done(function(){Sess.reset!=undefined&&Sess.reset()})};notifDialog.callConfirm("","Unsaved data was found on the USB storage device.<br/><br/>Save data?",function(){console.log("Save file");StoreCmd(!0,"Save File?",function(){$.getJSON("/sdk?func=acknotif&id="+NID_USB_ACTIVE_FILE_PRESENT+"&code="+NOTIFY_RSP_NO).done(function(){Sess.reset!=undefined&&Sess.reset()})},function(){$.getJSON("/sdk?func=acknotif&id="+NID_USB_ACTIVE_FILE_PRESENT+"&code="+NOTIFY_RSP_YES).done(function(){Sess.reset!=undefined&&Sess.reset()})})});break;case NID_PROMPT_STORE:waitingStore=!0;StoreCmd(!0,"Save File?",function(){$.getJSON("/sdk?func=acknotif&id="+NID_PROMPT_STORE+"&code="+NOTIFY_RSP_NO).done(function(){Sess.reset!=undefined&&Sess.reset();waitingStore=!1})},function(){$.getJSON("/sdk?func=acknotif&id="+NID_PROMPT_STORE+"&code="+NOTIFY_RSP_YES).done(function(){Sess.reset!=undefined&&Sess.reset();waitingStore=!1})});break;case NID_PLAYBACK_STOPPED:stoppingPlayback||(stoppingPlayback=!0,Sess&&Sess.closeSoundPlayback&&Sess.closeSoundPlayback(),setTimeout(function(){$.getJSON("/sdk?func=acknotif&id="+n+"&code="+NOTIFY_RSP_OK).always(function(){stoppingPlayback=!1})},1e3))}CurrentStatus.Force=0}}function UpdateUSBIndicator(n,t,i){if(n!==UpdateUSBIndicator.lastUsbInd||t!==UpdateUSBIndicator.lastUsbStorage||i!==UpdateUSBIndicator.lastMID)if(UpdateUSBIndicator.lastUsbStorage=t,UpdateUSBIndicator.lastUsbInd=n,UpdateUSBIndicator.lastMID=i,(n&IND_DEV_BUSY)!=0||i)usbInd.attr("src","/images/HourGlass.png");else{switch(n){case IND_NONE:t==2?usbInd.attr("src","/images/USBMis.png"):usbInd.attr("src","/images/space.gif");hasUSB&&(typeof DFMan!="undefined"&&DFMan.refresh&&DFMan.refresh(),hasUSB=!1);break;case IND_USB_PRESENT:t==2?usbInd.attr("src","/images/USBExp.png"):usbInd.attr("src","/images/USBPres.png");break;case IND_USB_PRESENT|IND_USB_ACTIVE_PRIMARY:t==2?usbInd.attr("src","/images/USBPrim.png"):usbInd.attr("src","/images/USBPres.png");break;default:usbInd.attr("src","/images/USBExp.png");usbInd.attr("alt","We have an issue")}n==IND_NONE||hasUSB||(typeof DFMan!="undefined"&&DFMan.refresh&&DFMan.refresh(),hasUSB=!0)}}function SixDigitFloat(n){var r="",i=" ",t=0,u;return undefined==n||n<=-999.85||n>2e12?r="--- ":n>=1e12?r="> 1e12 ":(n<999.995?n<1e-12?(n=0,i=" ",t=2):n<99995e-16?(n*=1e12,i=" p",t=3):n<99995e-15?(n*=1e12,i=" p",t=2):n<99995e-14?(n*=1e12,i=" p",t=1):n<99995e-13?(n*=1e9,i=" n",t=3):n<99995e-12?(n*=1e9,i=" n",t=2):n<99995e-11?(n*=1e9,i=" n",t=1):n<99995e-10?(n*=1e6,i=" u",t=3):n<99995e-9?(n*=1e6,i=" u",t=2):n<.00099995?(n*=1e6,i=" u",t=1):n<.0099995?(n*=1e3,i=" m",t=3):n<.099995?(n*=1e3,i=" m",t=2):n<.99995?(n*=1e3,i=" m",t=1):n<9.99995?(i=" ",t=4):n<99.9995?(i=" ",t=3):n<999.995&&(i=" ",t=2):n<9999.95?(i=" ",t=1):n<99999.5?(i=" ",t=0):n<999950?(n/=1e3,i=" k",t=1):n<9999500?(n/=1e6,i=" M",t=3):n<99995e3?(n/=1e6,i=" M",t=2):n<99995e4?(n/=1e6,i=" M",t=1):n<99995e5?(n/=1e9,i=" G",t=2):n<99995e6?(n/=1e9,i=" G",t=2):n<99995e7&&(n/=1e9,i=" G",t=1),u=1/Math.pow(10,t+1),r=n.toFixed(t)+i,SystemProperties.TAG_DISPLAY_DECIMAL==1&&(r=r.replace(".",decimalSep))),r}function pad(n){return n<10?"0"+n:n}function padSz(n,t){return(1e5+n+"").slice(-t)}function updateClock(){var n=new Date}function getGroup(){var n="live";switch(curTabIndex){case tbId.Overall:n="overall";break;case tbId.Current:n="current";break;case tbId.Measure:n="measurement";break;case tbId.Events:n="events";break;case tbId.TimeHist:n=207}return n}function prepProfileSeries(n){var i=[],u=getOffs(),t=0,r;if(n===undefined)return i;for(t=0,vlen=n.length;t<vlen;t++)r=n[t],r<-299?i.push([t,null]):i.push([t,r-u[t]]);return i}function getOutsideData(n,t,i,r,u,f){var s;if(u===undefined&&(u="live"),inFileDsp&&(u=curTabIndex===tbId.TimeHist?208:"file"+u),r===undefined&&(r=1),lockedGetData===0){++lockedGetData;try{s="/sdk?val="+r;r==1395738708?(t="Response",s="/sdk?func=get&f=128&p1="+u+"&vals=0x53314854,"+f+"&format=tag:x4,sz:i4,t1:x4,s1:i4,series0:af12,t2:x4,s2:i4,series1:af12,t3:x4,s3:i4,series2:af12"):r==1395869780&&(t="Response",s="/sdk?func=get&f=128&p1="+u+"&vals=0x53334854,"+f+"&format=tag:x4,sz:i4,t1:x4,s1:i4,series0:af36,t2:x4,s2:i4,series1:af36,t3:x4,s3:i4,series2:af36");outsidePromise=$.getJSON(s).done(function(n){var t,u;r==1395738708?(t=MeasurementProperties.TAG_TIME_HISTORY_MISC,u=0,OneOctaveData=t&THOptions.ID_TH_OBALEQ11.mask||t&THOptions.ID_TH_OBASPL11.mask?i(n.Response["series"+u++],OneOctaveData):defOffset.slice(0,13),ovlFOMax=t&THOptions.ID_TH_OBAMAX11.mask?OneOctaveMaxData=parseOvlOBAData(n.Response["series"+u++]):OneOctaveMaxData=[],ovlFOMin=t&THOptions.ID_TH_OBAMIN11.mask?OneOctaveMinData=parseOvlOBAData(n.Response["series"+u++]):OneOctaveMinData=[]):r==1395869780?(t=MeasurementProperties.TAG_TIME_HISTORY_MISC,u=0,OneOctaveData=t&THOptions.ID_TH_OBALEQ13.mask||t&THOptions.ID_TH_OBASPL13.mask?i(n.Response["series"+u++],OneOctaveData):defOffset.slice(0,37),ovlFOMax=t&THOptions.ID_TH_OBAMAX13.mask?OneOctaveMaxData=parseOvlOBAData(n.Response["series"+u++]):OneOctaveMaxData=[],ovlFOMin=t&THOptions.ID_TH_OBAMIN13.mask?OneOctaveMinData=parseOvlOBAData(n.Response["series"+u++]):OneOctaveMinData=[]):console.log("Error retrieving the Graph Data.");lockedGetData=0}).fail(function(n,t,r){if(n.responseText.indexOf("LAeq")!=-1)i($.parseJSON(n.responseText));else var u=t+", "+r})}catch(c){alert(c);lockedGetData=0}finally{lockedGetData=0}}var h=0,o=[],e=0;if(n===undefined)return o;for(e=0,vlen=n.length;e<vlen;e++)n[e]<-299?o.push([e,-299]):o.push([e,n[e]]),n[e]>h&&(h=n[e]);return(r===TAG_IO_OBA_SERIES_LIVE_1_1||r===1300)&&o.push([e,h]),o}function parseData(n,t){var u,r,f,i;if(n)return t=n,n;for(u=n.toString().split(","),LiveData.length>0&&(LiveData=LiveData.slice(120)),r=0,f=u.length;r<f;++r)if(LiveData.length<totalPoints)i=20,i=parseFloat(u[r]),LiveData.push(i),LAeqVal=i+i/100,LLargeDigitVal=LAeqVal,LApeakVal=i+i/23.2;else break}function parseDataFile(n,t){var u=t.length,r,f,i;for(u>0&&(t=t.slice(u)),r=0,f=n.length;r<f;++r)if(t.length<totalPoints)i=20,i=parseFloat(n[r]),t.push(i),LAeqVal=i+i/100,LLargeDigitVal=LAeqVal,LApeakVal=i+i/23.2;else break;return t}function updFreq(){SystemProperties.TAG_DISPLAY_DECIMAL==1?(fullFreqs[2]="31,5",thirdFreqs[0]="6,3",thirdFreqs[3]="12,5",thirdFreqs[7]="31,5",thirdFreqs[23]="1,25k",thirdFreqs[24]="1,6k",thirdFreqs[26]="2,5k",thirdFreqs[27]="3,15k",thirdFreqs[30]="6,3k",thirdFreqs[33]="12,5k"):(thirdFreqs[0]="6.3",thirdFreqs[3]="12.5",thirdFreqs[7]="31.5",thirdFreqs[23]="1.25k",thirdFreqs[24]="1.6k",thirdFreqs[26]="2.5k",thirdFreqs[27]="3.15k",thirdFreqs[30]="6.3k",thirdFreqs[33]="12.5k",fullFreqs[2]="31.5")}function parseOBAData(n,t){var u,r,i,f,e;for(t===undefined&&(t=OneOctaveData),u=getOffs(),r=n.toString().split(","),i=0,f=r.length;i<f;++i)e=parseFloat(r[i]),t[i]=e-u[i]}function getOffs(){var t=defOffset,n,i;return curPageIndex===pgId.Octave1N&&curRefFo<5?t=SystemProperties["TAG_FULL_OCTAVE_REFERENCE_SPECTRA"+curRefFo]:curPageIndex===pgId.Octave3N&&curRefTo<5?t=SystemProperties["TAG_THIRD_OCTAVE_REFERENCE_SPECTRA"+curRefTo]:(curPageIndex===pgId.Octave1N||curPageIndex===pgId.Octave3N)&&(curRefFo>4||curRefTo>4)&&(curPageIndex===pgId.Octave1N?(n=curRefFo,i=0):(n=curRefTo,i=4),n=n-5+i,t=wgtOffset[n]),t}function parseOvlOBAData(n){var i=[],f=getOffs(),t,u,r;if(n!==undefined)for(t=0,u=n.length;t<u;++t)r=parseFloat(n[t]),r<-50?i.push(null):i.push([t,r-f[t]]);return i}function obtainDataFromTag(n,t,i,r,u){u===undefined&&(n={});var f="sdk?func=getdatamulti&group="+r+"&tagids="+u;return $.getJSON(f).done(function(r){return n=r[t],i!==undefined&&i(r[t],n),n}).fail(function(n,t,i){var r=t+", "+i;console.log("Request Failed: "+r)}),n}function ClearTimers(){clearTimeout(updateLiveTimeout)}function liveGraphSetup(){LiveData=[];liveGraph=$.plot(profgraph,[{data:getRandomData(120,LiveData),label:""}],{lines:{steps:!1,fill:1,lineWidth:1,fillColor:mainClr,zero:-20},series:{color:mainClr,lineWidth:0,shadowSize:0},yaxis:{tickColor:tickClr,min:SystemProperties.TAG_GRAPH_BOTTOM,tickSize:20,ticks:tickForm,max:SystemProperties.TAG_GRAPH_HEIGHT+SystemProperties.TAG_GRAPH_BOTTOM},xaxis:{mode:"time",show:!1},legend:{show:!1,color:mainClr,labelBoxBorderColor:"rgba(55,160,240,0.1)",backgroundOpacity:0,position:"ne"},grid:{hoverable:!0,autoHighlight:!1,backgroundColor:{colors:bkGrad}}},GraphTypes.DATADISPLAY);enableLiveTimers=!0;var n=(new Date).getTime();liveGraph.updateLegendTimeout=null;liveGraph.lgLegends;liveGraph.labelFormat=function(){var t,i,n;if(liveGraph.updateLegendTimeout=null,liveGraph.crosshair!=undefined)for(i=liveGraph.getData(),t=0;t<i.length;++t)n=i[t],n.data!=undefined&&n.data[liveGraph.crosshair.index]!=undefined&&n.label!=undefined&&liveGraph.lgLegends.eq(t).html(n.label.replace(/ .*/," "+formD(n.data[liveGraph.crosshair.index][1])))};liveGraph.getRandom=getRandomData;liveGraph.lgLegends=$("#profileGraph .legendLabel");updateLiveTimeout!=undefined&&clearTimeout(updateLiveTimeout)}function getRandomData(n,t){var r,u,i,f,e;for(t==undefined&&(t=LiveData),n==undefined&&(n=120),r=[],u=n-t.length,i=0;i<u;++i)f=-99.9,e=[i,f],r.push(e);return r}function cbParseData(n,t){parseData(n,t)}function updateLiveGraph(n,t,i){if(typeof i.busy!="undefined"&&(i.busy=!0),t==1)liveGraph.setData([{data:prepProfileSeries(pageData.TAG_IO_PROFILE_SERIES,TAG_IO_PROFILE_SERIES),label:"L<sub>eq<\/sub> 00.0"}]);else t==3?liveGraph.setData([{data:prepProfileSeries(pageData.TAG_IO_PROFILE_SERIES,TAG_IO_PROFILE_SERIES),label:"L<sub>eq<\/sub> 00.0"}]):liveGraph.setData([{data:prepProfileSeries(pageData.TAG_IO_PROFILE_SERIES,TAG_IO_PROFILE_SERIES),label:"L<sub>eq<\/sub> 00.0"}]);liveGraph.draw();typeof i.busy!="undefined"&&(i.busy=!1)}function transFlag(n,t){var i="";return n&TIMEHIST_OVERLOAD&&(i="Ovld"),n&TIMEHIST_OBA_OVLD&&!t&&(i="OBA Ovld"),n&TIMEHIST_EXCDED&&(i="Excded"),n&TIMEHIST_T2READY&&(i="T2 Rdy"),n&TIMEHIST_PARTIAL&&(i="partial"),i}var WebSocketComm={StatusUpdate:null,DataUpdate:null,RegisterStatusHandler:function(){},UnregisterStatusHandler:function(){},RegisterDataHandler:function(){},UnregisterDataHandler:function(){},RegisterConnHandler:function(){},UnregisterConnHandler:function(){},SysPropUpdate:null,EventHandler:null,Connected:!1,dataRate:250,init:function(){var f=[],r=[],i=[],n=WebSocketComm,u,t,e;if(OnMeter)try{t=new WebSocket("ws://"+location.host+"/ws");n.RegisterStatusHandler=function(n){s(n,f)};n.UnregisterStatusHandler=function(n){h(n,r)};n.RegisterDataHandler=function(n){s(n,r)};n.UnregisterDataHandler=function(n){h(n,r)};n.RegisterConnHandler=function(n){s(n,i)};n.UnregisterConnHandler=function(n){h(n,i)};n.Reconnect=function(){n.Worked||(wsOld=t,wsOld.readyState==t.OPEN&&wsOld.close(),t=new WebSocket("ws://"+location.host+"/ws"),t.onopen=wsOld.onopen,t.onclose=wsOld.onclose,t.onerror=wsOld.onerror,t.onmessage=wsOld.onmessage);n.Worked=!1;n.reconnecting=!0;setTimeout(function(){n.Worked||n.Reconnect()},2e3)};n.Send=function(n){t.send(n)};n.SetDataNeeded=function(n){n.command="setdata";t.send(JSON.stringify(n))};n.SetDataRate=function(i){var r={};i>0?(r.rate=i,n.dataRate=i,r.command="dataon"):r.command="dataoff";t.send(JSON.stringify(r))};n.SetStatusRate=function(n){var i={};n>0?(i.rate=n,i.command="statuson"):i.command="statusoff";t.send(JSON.stringify(i))};function s(n,t){t.push(n)}function h(n,t){var i=t.lastIndexOf(n);i>-1&&t.splice(i,1)}function o(n,t){for(var r=!1,i=0,u=n.length;i<u;++i)n[i]!==undefined&&(n[i](t),r=!0);return r||console.log("Unhandled WS event: "+t),r}function c(i){t===i&&(Date.now()-u>1e4&&n.Connected?(console.log("Watch Dog said 'Bark, Bark' at "+(new Date).toTimeString()),i.close(),n.Worked=!1,delete n.GetID,n.Reconnect()):n.Connected&&setTimeout(c,5e3,i))}t.onopen=function(){n.Connected=!0;var t=window.onbeforeunload,r=this;window.onbeforeunload=function(){r.close();t!=undefined&&t()};o(i,"{status:'"+this.readyState+"'}");u=Date.now();setTimeout(c,2e4,r)};t.onclose=function(t){n.GetID!==undefined&&n.GetID()==this.sockID&&(delete n.GetID,n.Connected=!1,this.close(),o(i,"{status:'"+this.readyState+"'}"),console.log(t),centralTimer(),wDogTimer())};t.onerror=function(){o(i,"{status:'"+(n.Connected?"Connected":"Disconnected")+"', message:'An error occured with the WebSocket.'}")};e=(new Date).getTime();t.onmessage=function(t){var i,s,h;try{u=Date.now();n.Worked=!0;i=JSON.parse(t.data);i.Status!==undefined&&o(f,i.Status);i.Data!==undefined&&(i.Force&&(i.Data.Force=!0),s=(new Date).getTime(),e=s,o(r,i.Data));i.sockID!==undefined&&(h=this.sockID=i.sockID,n.GetID===undefined&&(n.GetID=function(){return h},n.SetStatusRate(500),isStarting||setTimeout(function(){refreshViewData()},1e3)));i.Connected!==undefined&&console.log("HLD can no longer communicate with the meter.");i.Warning!==undefined&&console.log(i);(n.GetID==undefined||n.GetID()!==this.sockID)&&(console.log("Closing down socket: "+this.sockID),this.close())}catch(c){console.log(c)}}}catch(o){console.log(o)}}},globalDataNeeded,initialGet,rtcnt,prevTitle,liveTab,profileGraphCtl,anyLevelMenu,LiveTime,StartTime,RunTime,bdMain,livebdBottom,ObSub,OLeq,EvLeq,CRemLeq,OLnPer,LTrig,OExc,OOvrld,OCmNoise,OMisc,TALarm,OSEL,GpsPage,WeatPg,ViaWeatPage,PreAmpPage,metrixPage,MemoryPage,pausNot,micCorrStr,updateInterval,defOffset,o,wgtOffset,liveGraph,updateLiveTimeout,profgraph,SpectralLn,OBArecNum,thProfile,MeasHist,EvntTrig;WebSocketComm.RegisterConnHandler(function(n){console.log(n)});var page,tbId,pgId,maxPageLength=0,maxTabLen=5,minTabLen=0,inFileDsp=!1,PageArray=[],pageData={},pFlags={},pageTimers=[],prevLockMode=0,prevLockCom=0,prevLockCal=0;globalDataNeeded=["TAG_IO_POWER_STATUS"];initialGet=!0;rtcnt=0;var SettingsFooter={lf:{type:"arrow",text:"",handlr:keyLeftArrow,visible:!0},mi:{type:"button",text:"Close",handlr:function(n){!IsRemote&&typeof propTabs!="undefined"&&$(".jqx-menu-wrapper:visible").length>0&&propTabs.find(".jqx-menu-minimized-button").trigger("click");dispHG(!0);OnSettingTabs&&(SelectAccordionItem("ui-accordion-accordion-header-0"),OnSettingTabs=!1);OnSystemTabs&&(OnSystemTabs=!1);clearCache(function(){$.getJSON("/sdk?func=lockui&false").always(function(){getMeasSysProps(100,!0).always(function(){getMeasSysProps(200,!0).always(function(){typeof prpMenu!="undefined"&&(propTabs.jqxMenu("close"),prpMenu.hide());window.location.href.indexOf("debug")===-1&&SystemProperties.TAG_LANGUAGE!==SettingsFooter.lang&&location.reload();setTouchScreen();$(document.activeElement).blur();setupPageCounts();popPage();menuOpen=!1;n instanceof Function&&n();dispHG(!1)})})})})},visible:!0},rt:{type:"arrow",text:"",handlr:keyRightArrow,visible:!0}},GenericGroupFooter={lf:{type:"arrow",text:"",handlr:keyLeftArrow,visible:!0},mi:{type:"button",text:"Close",handlr:function(){popPage();menuOpen=!1},visible:!0},rt:{type:"arrow",text:"",handlr:keyRightArrow,visible:!0}},GenericSingleFooter={mi:{type:"button",text:"Close",handlr:function(){popPage();menuOpen=!1},visible:!0}},pageStack=[];var curTabIndex=0,curPageIndex=1,prevPage=1,prevTab=0,getDataTimeout,validDisp;setupPageCounts=function(){for(var i,r,t,u=PageArray.length,n=0;n<u;++n)if(PageArray[n]!==undefined){for(i=0,r=PageArray[n].length,t=0;t<r;++t)PageArray[n][t]!==undefined&&((PageArray[n][t].condition===undefined||PageArray[n][t].condition())&&validDisp(n,t)?(PageArray[n][t].vis=!0,++i,PageArray[n][t].idx=i):PageArray[n][t].vis=!1);PageArray[n].pCnt=i}};prevTitle="Filename";var screenOn=!0,dataRate=undefined,centTmr,wdTmr,wdCnt=0,stsZroCnt=0,ollTime=0,finGDN=!0,refTime=250;(function(n){var t=0;n[n.Live=t++]="Live";n[n.Overall=t++]="Overall";n[n.SessLog=t++]="SessLog";n[n.Current=t++]="Current";n[n.Measure=t++]="Measure";n[n.Events=t++]="Events";n[n.TimeHist=t++]="TimeHist";n[n.Calibrate=t++]="Calibrate";n[n.Sensitivity=t++]="Sensitivity";n[n.CalHist=t++]="CalHist";n[n.Certificate=t++]="Certificate";n[n.CalCheck=t++]="CalCheck";n[n.CalChkHist=t++]="CalChkHist";n[n.About=t++]="About";n[n.Standards=t++]="Standards";n[n.Options=t++]="Options";n[n.User=t++]="User";n[n.DataMgr=t++]="DataMgr";n[n.SysUtils=t++]="SysUtils";n[n.PwrOff=t++]="PwrOff";n[n.Wifi=t++]="Wifi";n[n.Device=t++]="Device";n[n.Time=t++]="Time";n[n.sysNTP=t++]="sysNTP";n[n.Power=t++]="Power";n[n.Prefer=t++]="Prefer";n[n.sysLocal=t++]="sysLocal";n[n.Displays=t++]="Displays";n[n.sysOpts=t++]="sysOpts";n[n.spNet=t++]="spNet";n[n.sysEmail=t++]="sysEmail";n[n.Wireless=t++]="Wireless";n[n.Sms=t++]="Sms";n[n.Modem=t++]="Modem";n[n.RS232=t++]="RS232";n[n.sysOther=t++]="sysOther";n[n.sysSpec=t++]="sysSpec";n[n.SetupMgr=t++]="SetupMgr";n[n.mpGen=t++]="mpGen";n[n.mpSLM=t++]="mpSLM";n[n.mpOBA=t++]="mpOBA";n[n.mpLn=t++]="mpLn";n[n.mpCtrl=t++]="mpCtrl";n[n.mpTime=t++]="mpTime";n[n.mpTrig=t++]="mpTrig";n[n.mpEvnt=t++]="mpEvnt";n[n.mpMark=t++]="mpMark";n[n.mpDN=t++]="mpDN";n[n.mpSnd=t++]="mpSnd";n[n.mpWthr=t++]="mpWthr";n[n.mpDos1=t++]="mpDos1";n[n.mpDos2=t++]="mpDos2";n[n.mpFFTGen=t++]="mpFFTGen";n[n.mpFFT=t++]="mpFFT";n[n.mpFFTCtrl=t++]="mpFFTCtrl";n[n.mpFFTTon=t++]="mpFFTTon";n[n.mpRAGen=t++]="mpRAGen";n[n.mpRT60=t++]="mpRT60";n[n.mpRT60Adv=t++]="mpRT60Adv";n[n.mpRASrc=t++]="mpRASrc";n[n.Lock=t++]="Lock";n[n.LockedScreen=t++]="LockedScreen";n[n.TabCount=t++]="TabCount"})(tbId||(tbId={})),function(n){var t=0;n[n.History=t++]="History";n[n.Profile=t++]="Profile";n[n.TrigStatus=t++]="TrigStatus";n[n.EnfMkt=t++]="EnfMkt";n[n.Metrics=t++]="Metrics";n[n.Leq=t++]="Leq";n[n.RemLeq=t++]="RemLeq";n[n.Octave11=t++]="Octave11";n[n.Octave1N=t++]="Octave1N";n[n.Qtonality=t++]="Qtonality";n[n.Octave13=t++]="Octave13";n[n.Octave3N=t++]="Octave3N";n[n.EventTH=t++]="EventTH";n[n.SpectralTH=t++]="SpectralTH";n[n.O11Time=t++]="O11Time";n[n.O13Time=t++]="O13Time";n[n.Percentiles=t++]="Percentiles";n[n.SpectralLn=t++]="SpectralLn";n[n.Triggering=t++]="Triggering";n[n.Exceedances=t++]="Exceedances";n[n.Overload=t++]="Overload";n[n.Community=t++]="Community";n[n.Misc=t++]="Misc";n[n.TALarm=t++]="TALarm";n[n.SEL=t++]="SEL";n[n.Dose1=t++]="Dose1";n[n.Dose2=t++]="Dose2";n[n.SEA=t++]="SEA";n[n.Weather=t++]="Weather";n[n.VaisalaWeather=t++]="VaisalaWeather";n[n.Preamp=t++]="Preamp";n[n.GPS=t++]="GPS";n[n.MM=t++]="MM";n[n.Device=t++]="Device";n[n.Time=t++]="Time";n[n.Power=t++]="Power";n[n.Memory=t++]="Memory";n[n.SessionLog=t++]="SessionLog";maxPageLength=t-1}(pgId||(pgId={}));PageArray[tbId.Live]=[];PageArray[tbId.Overall]=[];PageArray[tbId.SessLog]=[];PageArray[tbId.Current]=[];PageArray[tbId.Measure]=[];PageArray[tbId.Events]=[];PageArray[tbId.TimeHist]=[];PageArray[tbId.Calibrate]=[];PageArray[tbId.Sensitivity]=[];PageArray[tbId.CalHist]=[];PageArray[tbId.Certificate]=[];PageArray[tbId.CalCheck]=[];PageArray[tbId.CalChkHist]=[];PageArray[tbId.About]=[];PageArray[tbId.Standards]=[];PageArray[tbId.Options]=[];PageArray[tbId.User]=[];PageArray[tbId.DataMgr]=[];PageArray[tbId.SysUtils]=[];PageArray[tbId.PwrOff]=[];PageArray[tbId.Wifi]=[];PageArray[tbId.Device]=[];PageArray[tbId.Time]=[];PageArray[tbId.sysNTP]=[];PageArray[tbId.Power]=[];PageArray[tbId.Prefer]=[];PageArray[tbId.sysLocal]=[];PageArray[tbId.Displays]=[];PageArray[tbId.sysOpts]=[];PageArray[tbId.spNet]=[];PageArray[tbId.sysEmail]=[];PageArray[tbId.Sms]=[];PageArray[tbId.Wireless]=[];PageArray[tbId.Modem]=[];PageArray[tbId.RS232]=[];PageArray[tbId.sysOther]=[];PageArray[tbId.sysSpec]=[];PageArray[tbId.SetupMgr]=[];PageArray[tbId.mpGen]=[];PageArray[tbId.mpSLM]=[];PageArray[tbId.mpOBA]=[];PageArray[tbId.mpLn]=[];PageArray[tbId.mpCtrl]=[];PageArray[tbId.mpTime]=[];PageArray[tbId.mpTrig]=[];PageArray[tbId.mpEvnt]=[];PageArray[tbId.mpMark]=[];PageArray[tbId.mpDN]=[];PageArray[tbId.mpSnd]=[];PageArray[tbId.mpWthr]=[];PageArray[tbId.mpDos1]=[];PageArray[tbId.mpDos2]=[];PageArray[tbId.mpFFTGen]=[];PageArray[tbId.mpFFT]=[];PageArray[tbId.mpFFTCtrl]=[];PageArray[tbId.mpFFTTon]=[];PageArray[tbId.mpRAGen]=[];PageArray[tbId.mpRT60]=[];PageArray[tbId.mpRT60Adv]=[];PageArray[tbId.mpRASrc]=[];PageArray[tbId.Lock]=[];PageArray[tbId.LockedScreen]=[];PageArray[tbId.TabCount]=[];PageArray[tbId.Live].lastPgId=1;PageArray[tbId.Overall].lastPgId=1;PageArray[tbId.SessLog].lastPgId=0;PageArray[tbId.Current].lastPgId=1;PageArray[tbId.Measure].lastPgId=0;PageArray[tbId.Events].lastPgId=pgId.TrigStatus;PageArray[tbId.TimeHist].lastPgId=pgId.Metrics;PageArray[tbId.Calibrate].lastPgId=0;PageArray[tbId.Sensitivity].lastPgId=0;PageArray[tbId.CalHist].lastPgId=0;PageArray[tbId.Certificate].lastPgId=0;PageArray[tbId.CalCheck].lastPgId=0;PageArray[tbId.CalChkHist].lastPgId=0;PageArray[tbId.About].lastPgId=0;PageArray[tbId.Lock].lastPgId=0;PageArray[tbId.Standards].lastPgId=0;PageArray[tbId.Options].lastPgId=0;PageArray[tbId.User].lastPgId=0;PageArray[tbId.DataMgr].lastPgId=0;PageArray[tbId.SysUtils].lastPgId=0;PageArray[tbId.PwrOff].lastPgId=0;PageArray[tbId.Wifi].lastPgId=0;PageArray[tbId.Device].lastPgId=0;PageArray[tbId.Time].lastPgId=0;PageArray[tbId.sysNTP].lastPgId=0;PageArray[tbId.Power].lastPgId=0;PageArray[tbId.Prefer].lastPgId=0;PageArray[tbId.sysLocal].lastPgId=0;PageArray[tbId.Displays].lastPgId=0;PageArray[tbId.sysOpts].lastPgId=0;PageArray[tbId.spNet].lastPgId=0;PageArray[tbId.sysEmail].lastPgId=0;PageArray[tbId.Sms].lastPgId=0;PageArray[tbId.Wireless].lastPgId=0;PageArray[tbId.Modem].lastPgId=0;PageArray[tbId.RS232].lastPgId=0;PageArray[tbId.sysOther].lastPgId=0;PageArray[tbId.sysSpec].lastPgId=0;PageArray[tbId.SetupMgr].lastPgId=0;PageArray[tbId.mpGen].lastPgId=0;PageArray[tbId.mpSLM].lastPgId=0;PageArray[tbId.mpOBA].lastPgId=0;PageArray[tbId.mpLn].lastPgId=0;PageArray[tbId.mpCtrl].lastPgId=0;PageArray[tbId.mpTrig].lastPgId=0;PageArray[tbId.mpTime].lastPgId=0;PageArray[tbId.mpEvnt].lastPgId=0;PageArray[tbId.mpMark].lastPgId=0;PageArray[tbId.mpDN].lastPgId=0;PageArray[tbId.mpSnd].lastPgId=0;PageArray[tbId.mpWthr].lastPgId=0;PageArray[tbId.mpDos1].lastPgId=0;PageArray[tbId.mpDos2].lastPgId=0;PageArray[tbId.mpFFTGen].lastPgId=0;PageArray[tbId.mpFFT].lastPgId=0;PageArray[tbId.mpFFTCtrl].lastPgId=0;PageArray[tbId.mpFFTTon].lastPgId=0;PageArray[tbId.mpRAGen].lastPgId=0;PageArray[tbId.mpRT60].lastPgId=0;PageArray[tbId.mpRT60Adv].lastPgId=0;PageArray[tbId.mpRASrc].lastPgId=0;PageArray[tbId.LockedScreen].lastPgId=0;PageArray[tbId.TabCount].lastPgId=0;PageArray[tbId.Live].Name="Live";PageArray[tbId.Overall].Name="Overall";PageArray[tbId.SessLog].Name="Session Log";PageArray[tbId.Current].Name="Current";PageArray[tbId.Measure].Name="Measurement";PageArray[tbId.Events].Name="Events";PageArray[tbId.TimeHist].Name="Time History";PageArray[tbId.Calibrate].Name="Calibrate";PageArray[tbId.Sensitivity].Name="Calibration Settings";PageArray[tbId.CalHist].Name="History";PageArray[tbId.Certificate].Name="Calibrate: Certification";PageArray[tbId.CalCheck].Name="Calibration Check";PageArray[tbId.CalChkHist].Name="CalCheckHist";PageArray[tbId.About].Name="About";PageArray[tbId.Standards].Name="Standards";PageArray[tbId.Options].Name="Options";PageArray[tbId.User].Name="User";PageArray[tbId.Lock].Name="Set Lock Mode";PageArray[tbId.DataMgr].Name="Data File Manager";PageArray[tbId.SysUtils].Name="System Utilities";PageArray[tbId.PwrOff].Name="Power Control";PageArray[tbId.Wifi].Name="WiFi";PageArray[tbId.Device].Name="Device";PageArray[tbId.Time].Name="Time";PageArray[tbId.sysNTP].Name="NTP";PageArray[tbId.Power].Name="Power";PageArray[tbId.Prefer].Name="Preferences";PageArray[tbId.sysLocal].Name="Locale";PageArray[tbId.Displays].Name="Displays";PageArray[tbId.sysOpts].Name="Options";PageArray[tbId.spNet].Name="Network";PageArray[tbId.sysEmail].Name="Email";PageArray[tbId.Sms].Name="SMS Out";PageArray[tbId.Wireless].Name="Wireless";PageArray[tbId.Modem].Name="Modem";PageArray[tbId.RS232].Name="RS-232";PageArray[tbId.sysOther].Name="Other";PageArray[tbId.sysSpec].Name="Reference Spectra";PageArray[tbId.SetupMgr].Name="Setup Manager";PageArray[tbId.mpGen].Name="General";PageArray[tbId.mpSLM].Name="SLM";PageArray[tbId.mpOBA].Name="OBA";PageArray[tbId.mpLn].Name="Ln";PageArray[tbId.mpCtrl].Name="Control";PageArray[tbId.mpTime].Name="Time History";PageArray[tbId.mpTrig].Name="Triggers";PageArray[tbId.mpEvnt].Name="Event History";PageArray[tbId.mpMark].Name="Markers";PageArray[tbId.mpDN].Name="Day/Night";PageArray[tbId.mpSnd].Name="Sound";PageArray[tbId.mpWthr].Name="Weather";PageArray[tbId.mpDos1].Name="Dosimeter1";PageArray[tbId.mpDos2].Name="Dosimeter2";PageArray[tbId.mpFFTGen].Name="General";PageArray[tbId.mpFFT].Name="FFT";PageArray[tbId.mpFFTCtrl].Name="Control";PageArray[tbId.mpFFTTon].Name="Tonality";PageArray[tbId.mpRAGen].Name="General";PageArray[tbId.mpRT60].Name="RT-60";PageArray[tbId.mpRT60Adv].Name="RT-60 Advanced";PageArray[tbId.mpRASrc].Name="Source";PageArray[tbId.LockedScreen].Name="LockedScreen";PageArray[tbId.TabCount].Name="TabCount";PageArray[tbId.Live].sName="Live";PageArray[tbId.Overall].sName="Overall";PageArray[tbId.SessLog].sName="Log";PageArray[tbId.Current].sName="Current";PageArray[tbId.Measure].sName="Measure";PageArray[tbId.Events].sName="Events";PageArray[tbId.TimeHist].sName="Time Hist";PageArray[tbId.Calibrate].sName="Calibrate";PageArray[tbId.Sensitivity].sName="Settings";PageArray[tbId.CalHist].sName="Cal Hist";PageArray[tbId.Certificate].sName="Cal Cert";PageArray[tbId.CalCheck].sName="Cal Check";PageArray[tbId.CalChkHist].sName="CalChkHist";PageArray[tbId.About].sName="About";PageArray[tbId.Standards].sName="Standards";PageArray[tbId.Options].sName="Options";PageArray[tbId.User].sName="User";PageArray[tbId.Lock].sName="Lock";PageArray[tbId.DataMgr].sName="Data Mgr";PageArray[tbId.SysUtils].sName="Sys Utils";PageArray[tbId.PwrOff].Name="Power Control";PageArray[tbId.Wifi].Name="WiFi";PageArray[tbId.Device].sName="Device";PageArray[tbId.Time].sName="Time";PageArray[tbId.sysNTP].sName="NTP";PageArray[tbId.Power].sName="Power";PageArray[tbId.Prefer].sName="Prefer";PageArray[tbId.sysLocal].sName="Locale";PageArray[tbId.Displays].sName="Displays";PageArray[tbId.sysOpts].sName="Options";PageArray[tbId.spNet].sName="Network";PageArray[tbId.sysEmail].sName="Email";PageArray[tbId.Sms].sName="SMS Out";PageArray[tbId.Wireless].sName="Wireless";PageArray[tbId.Modem].sName="Modem";PageArray[tbId.RS232].sName="RS-232";PageArray[tbId.sysOther].sName="Other";PageArray[tbId.sysSpec].sName="Spectra";PageArray[tbId.SetupMgr].sName="Setup Mgr";PageArray[tbId.mpGen].sName="General";PageArray[tbId.mpSLM].sName="SLM";PageArray[tbId.mpOBA].sName="OBA";PageArray[tbId.mpLn].sName="Ln";PageArray[tbId.mpCtrl].sName="Control";PageArray[tbId.mpTime].sName="Time Hist";PageArray[tbId.mpTrig].sName="Triggers";PageArray[tbId.mpEvnt].sName="Event Hist";PageArray[tbId.mpMark].sName="Markers";PageArray[tbId.mpDN].sName="Day/Night";PageArray[tbId.mpSnd].sName="Sound";PageArray[tbId.mpWthr].sName="Weather";PageArray[tbId.mpDos1].sName="Dose 1";PageArray[tbId.mpDos2].sName="Dose 2";PageArray[tbId.mpFFTGen].sName="General";PageArray[tbId.mpFFT].sName="FFT";PageArray[tbId.mpFFTCtrl].sName="Control";PageArray[tbId.mpFFTTon].sName="Tonality";PageArray[tbId.mpRAGen].sName="General";PageArray[tbId.mpRT60].sName="RT-60";PageArray[tbId.mpRT60Adv].sName="RT-60 Adv";PageArray[tbId.mpRASrc].sName="Source";PageArray[tbId.LockedScreen].sName="LockedScreen";PageArray[tbId.TabCount].sName="TabCount";PageArray[tbId.Live].disp=function(){return inFileDsp===!1};PageArray[tbId.Overall].disp=!0;PageArray[tbId.SessLog].disp=!0;PageArray[tbId.Current].disp=function(){return inFileDsp==!1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY===1};PageArray[tbId.Measure].disp=function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY===1};PageArray[tbId.Events].disp=function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE==1};PageArray[tbId.TimeHist].disp=function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16416)>0&&MeasurementProperties.TAG_TIME_HISTORY_ENABLE===1};PageArray[tbId.Calibrate].disp=!0;PageArray[tbId.Sensitivity].disp=!0;PageArray[tbId.CalHist].disp=!0;PageArray[tbId.Certificate].disp=!0;PageArray[tbId.CalCheck].disp=!0;PageArray[tbId.CalChkHist].disp=!0;PageArray[tbId.About].disp=!0;PageArray[tbId.Standards].disp=!0;PageArray[tbId.Options].disp=!0;PageArray[tbId.User].disp=!0;PageArray[tbId.DataMgr].disp=!0;PageArray[tbId.SysUtils].disp=!0;PageArray[tbId.PwrOff].disp=!0;PageArray[tbId.Wifi].disp=function(){return ModelNumber===m831C};PageArray[tbId.Device].disp=!0;PageArray[tbId.Time].disp=function(){return OnMeter||ModelNumber===m831C};PageArray[tbId.sysNTP].disp=function(){return ModelNumber===m831C&&(OnMeter||!nonMeter)};PageArray[tbId.Power].disp=!0;PageArray[tbId.Prefer].disp=!0;PageArray[tbId.sysLocal].disp=!0;PageArray[tbId.Displays].disp=!0;PageArray[tbId.sysOpts].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&ModelNumber!=mLxTSE};PageArray[tbId.spNet].disp=function(){return ModelNumber===m831||ModelNumber===m831C&&OnMeter};PageArray[tbId.sysEmail].disp=function(){return ModelNumber===m831C&&OnMeter};PageArray[tbId.Sms].disp=function(){return ModelNumber===m831&&SystemProperties.TAG_USB_HOST_POWER==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&8388608)>0};PageArray[tbId.Wireless].disp=function(){return ModelNumber===m831&&SystemProperties.TAG_USB_HOST_POWER==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&8388608)>0};PageArray[tbId.Modem].disp=function(){return ModelNumber===m831&&SystemProperties.TAG_USB_HOST_POWER==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2162688)>0};PageArray[tbId.RS232].disp=function(){return ModelNumber===m831&&SystemProperties.TAG_USB_HOST_POWER==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2162688)>0};PageArray[tbId.sysOther].disp=function(){return Is831()};PageArray[tbId.sysSpec].disp=!0;PageArray[tbId.SetupMgr].disp=function(){return!OnMeter&&OnSystemTabs||OnSettingTabs};PageArray[tbId.mpGen].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0};PageArray[tbId.mpSLM].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0};PageArray[tbId.mpOBA].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&3)>0};PageArray[tbId.mpLn].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0};PageArray[tbId.mpCtrl].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0};PageArray[tbId.mpTime].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&32)>0};PageArray[tbId.mpTrig].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0};PageArray[tbId.mpEvnt].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0};PageArray[tbId.mpMark].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&((SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&32)>0||(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&8)>0)};PageArray[tbId.mpDN].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1024)>0};PageArray[tbId.mpSnd].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&8)>0};PageArray[tbId.mpWthr].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0};PageArray[tbId.mpDos1].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&ModelNumber!==m831C&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&64)>0};PageArray[tbId.mpDos2].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==0&&ModelNumber!==m831C&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&64)>0};PageArray[tbId.mpFFTGen].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==2&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1048576)>0};PageArray[tbId.mpFFT].disp=function(){return(MeasurementProperties.TAG_INSTRUMENT_MODE==2&&SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1048576)>0};PageArray[tbId.mpFFTCtrl].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==2&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1048576)>0};PageArray[tbId.mpFFTTon].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==2&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1048576)>0};PageArray[tbId.mpRAGen].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&524288)>0};PageArray[tbId.mpRT60].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&524288)>0};PageArray[tbId.mpRT60Adv].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&524288)>0};PageArray[tbId.mpRASrc].disp=function(){return MeasurementProperties.TAG_INSTRUMENT_MODE==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&524288)>0};PageArray[tbId.Lock].disp=!0;PageArray[tbId.LockedScreen].disp=!0;validDisp=function(n,t){var i;switch(n){case tbId.Live:i=dsLiveTab[pgId[t]];break;case tbId.Overall:i=dsOverallTab[pgId[t]];break;case tbId.Current:i=dsCurrentTab[pgId[t]];break;case tbId.TimeHist:i=dsTimeHistoryTab[pgId[t]];break;case tbId.Measure:i=dsMeasurementTab[pgId[t]];break;default:return!0}return i!=undefined&&(i.mask&SystemProperties[i.optionsWord])!=0?!0:!1};var AnyDataParam=[{val:0,str:"L<sub>AF</sub>"},{val:1,str:"L<sub>AS</sub>"},{val:2,str:"L<sub>AI</sub>"},{val:3,str:"L<sub>A#eq</sub>"},{val:4,str:"L<sub>AFmax</sub>"},{val:5,str:"L<sub>ASmax</sub>"},{val:6,str:"L<sub>AImax</sub>"},{val:7,str:"TAFmax"},{val:8,str:"TASmax"},{val:9,str:"TAImax"},{val:10,str:"L<sub>AFmin</sub>"},{val:11,str:"L<sub>ASmin</sub>"},{val:12,str:"L<sub>AImin</sub>"},{val:13,str:"TAFmin"},{val:14,str:"TASmin"},{val:15,str:"TAImin"},{val:16,str:"L<sub>Apeak</sub>"},{val:17,str:"TApeak"},{val:18,str:"L<sub>CF</sub>"},{val:19,str:"L<sub>CS</sub>"},{val:20,str:"L<sub>CI</sub>"},{val:21,str:"L<sub>C#eq</sub>"},{val:22,str:"L<sub>CFmax</sub>"},{val:23,str:"L<sub>CSmax</sub>"},{val:24,str:"L<sub>CImax</sub>"},{val:25,str:"TCFmax"},{val:26,str:"TCSmax"},{val:27,str:"TCImax"},{val:28,str:"L<sub>CFmin</sub>"},{val:29,str:"L<sub>CSmin</sub>"},{val:30,str:"L<sub>CImin</sub>"},{val:31,str:"TCFmin"},{val:32,str:"TCSmin"},{val:33,str:"TCImin"},{val:34,str:"L<sub>Cpeak</sub>"},{val:35,str:"TCpeak"},{val:36,str:"L<sub>ZF</sub>"},{val:37,str:"L<sub>ZS</sub>"},{val:38,str:"L<sub>ZI</sub>"},{val:39,str:"L<sub>Z#eq</sub>"},{val:40,str:"L<sub>ZFmax</sub>"},{val:41,str:"L<sub>ZSmax</sub>"},{val:42,str:"L<sub>ZImax</sub>"},{val:43,str:"TZFmax"},{val:44,str:"TZSmax"},{val:45,str:"TZImax"},{val:46,str:"L<sub>ZFmin</sub>"},{val:47,str:"L<sub>ZSmin</sub>"},{val:48,str:"L<sub>ZImin</sub>"},{val:49,str:"TZFmin"},{val:50,str:"TZSmin"},{val:51,str:"TZImin"},{val:52,str:"L<sub>Zpeak</sub>"},{val:53,str:"TZpeak"},{val:54,str:"L<sub>$#</sub>"},{val:55,str:"L<sub>$#</sub>"},{val:56,str:"L<sub>$#</sub>"},{val:57,str:"L<sub>$#</sub>"},{val:58,str:"L<sub>$#</sub>"},{val:59,str:"L<sub>$#</sub>"}],DataFlag={NF_FLAG_UNDERRANGE:1,NF_FLAG_LASTRMS:2,NF_FLAG_LASTPEAK:4,NF_FLAG_OCTAVE:16,NF_FLAG_THIRD:32},RefreshRates={ms250:250,ms333:333,ms500:500,ms1000:1e3};var IND_NONE=0,IND_USB_PRESENT=1,IND_USB_ACTIVE_PRIMARY=2,IND_BATTERY_POWERED=4,IND_USB_POWERED=8,IND_EXTERNALY_POWERED=16,IND_CHARGING=512,IND_RECOVERY_IMG=1024,IND_FILE_OPERATION_LSB=32,IND_FILE_OPERATION_MSB=64,IND_FILE_OPERATION_DELETE=IND_FILE_OPERATION_LSB,IND_FILE_OPERATION_FROM_INTERNAL=IND_FILE_OPERATION_MSB,IND_FILE_OPERATION_TO_INTERNAL=IND_FILE_OPERATION_MSB|IND_FILE_OPERATION_LSB,IND_POWER_SAVE=128,IND_DISPLAY_BACKLIGHT_OFF=256,IND_WIFI_STATION_0=2048,IND_WIFI_STATION_1=4096,IND_WIFI_STATION_2=6144,IND_WIFI_STATION_3=8192,IND_WIFI_ACCESS_POINT=10240,IND_WIFI_DISCONNECTED=12288,IND_WIFI_ALL_BITS=14336,IND_NTP_TIME_SYNC=16384,IND_GPS_TIME_SYNC=32768,IND_PRINTER=65536,IND_STREAMING_AUDIO=131072,IND_FS_CHECK=262144,IND_FS_FORMAT=524288,IND_FS_FORMAT_RESTORE=1048576,IND_FILE_OPEN_LOCAL=2097152,IND_FILE_OPEN_TCP=4194304,IND_FILE_OPEN_USB=8388608,IND_DEV_BUSY=134217728,NOTIFY_RSP_NONE=0,NOTIFY_RSP_CANCEL=1,NOTIFY_RSP_OK=2,NOTIFY_RSP_YES=4,NOTIFY_RSP_NO=8;var measRecCnt=0,eventsCnt=0,evRecord=0,thRecord=0;$.fn.extend({checkFlags:function(n,t){((n||0)&DataFlag.NF_FLAG_UNDERRANGE)>0&&t>-99&&t<350?this.addClass("greyed"):this.removeClass("greyed")}});var NoDataPage={show:function(n,t){var r=$("#pageArrows"),u,i;(t||!0)&&(u=$("#tabBar"),r.hide(),u.html(tbId[curTabIndex].Name));i=$("#noDataTbl");oldLeave=n.leave;n.leave=function(){(t||!0)&&r.show();i.hide();n.leave=oldLeave};oldLeave();i.show()}},measCtr=$("#measCtr"),measStr="&nbsp;";liveTab=$("#Live");profileGraphCtl={id:"profileGraph",ctl:{},html:"",refreshRate:1e3,busy:!1,isInit:!1,init:function(){var n=profileGraphCtl,t=$("#profileGraph"),i;n.busy=!0;n.initd=!1;n.enter=function(){t.show();liveTab.show();i!=currentTheme&&n.initd&&(adjustOffset=SystemProperties.TAG_GRAPH_BOTTOM,liveGraphSetup(curTabIndex,curPageIndex),updateLiveGraph(1e3,curTabIndex,profileGraphCtl));SystemProperties.TAG_GRAPH_BOTTOM!=undefined?(adjustOffset=SystemProperties.TAG_GRAPH_BOTTOM,n.initd||(typeof n.ctl=="undefined"&&(n.ctl=t),liveGraphSetup(0,0),this.busy=!1,n.initd=!0)):tbId.Live==curTabIndex&&pgId.Profile==curPageIndex&&setTimeout(n.enter,250,{t:curTabIndex,p:curPageIndex})};n.updateGraph=function(){updateLiveGraph(n.refreshRate,curTabIndex,this)};n.update=function(t){upMHCntTitle();n.initd&&(n.busy=!0,updateLiveGraph(t,curTabIndex,this))};n.leave=function(){t!=undefined&&t.hide();liveTab.hide()};n.isInit=!0}};var proLeq1sAve={id:"Leq1sAve",html:"",refreshRate:RefreshRates.ms250,ctls:[],isInit:!1,init:function(){var t=proLeq1sAve,i,r,f,e,u,n;t.isInit=!0;u=$("#TAG_IO_ANYLEVEL_LPEAK");n=$("#tabProLeq");e=n.find("#imStability");r=n.find("#liveProAnyLevel");f=n.find("#Lpeak");i=n.find("#Leq1sAve");var o=n.find("#lbAnyLevel"),s=n.find("#lbLeq1sAve"),h=n.find("#lbLpeak");t.enter=function(t){if(MeasurementProperties.TAG_FREQ_WEIGHTING!=undefined){var r=MeasurementProperties.TAG_FREQ_WEIGHTING,i=MeasurementProperties.TAG_DET_WEIGHTING,u=MeasurementProperties.TAG_INTEGRATION_INPUT,f=SystemProperties.TAG_ANYLEVEL_ITEM_1||0;return t==1&&(f=SystemProperties.TAG_ANYLEVEL_ITEM_2||0),updAnyLvlStr(),s.html(MakeLWeightDetectorString(r,i,"","L<sub>$#eq(1s)</sub>",u)),o.html(MakeLWeightDetectorString(r,i,"",AnyDataParam[f].str,u)),h.html(MakeLWeightDetectorString(MeasurementProperties.TAG_PEAK_WEIGHTING,i,"","L<sub>^peak</sub>")),n.show(),!0}return getProp("TAG_FREQ_WEIGHTING","int"),getProp("TAG_DET_WEIGHTING","int"),getProp("TAG_PEAK_WEIGHTING","int"),setTimeout(proLeq1sAve.enter,300),!1};t.update=function(){var n,f;PauseGetRunState||(n=pageData.TAG_IO_LIVE_1SEC_LEQ||-99.9,i.html(formD(n)+" dB").checkFlags(pFlags.TAG_IO_LIVE_1SEC_LEQ,n),f="TAG_IO_ANYLEVEL_SPL_1",f=curTabIndex==tbId.Live&&curPageIndex==pgId.Profile?"TAG_IO_ANYLEVEL_SPL_1":"TAG_IO_ANYLEVEL_SPL_2",n=pageData[f]||-99.9,r.html(formD(n)+" dB").checkFlags(pFlags[f],n),n=pageData.TAG_IO_ANYLEVEL_LPEAK||-99.9,u.html(formD(n)+" dB").checkFlags(pFlags.TAG_IO_ANYLEVEL_LPEAK,n),anyLevelMenu.mod&&(t.enter(curTabIndex,curPageIndex),anyLevelMenu.mod=!1))};t.leave=function(){n!=undefined&&n.hide()}}},msLeq1sAveCtl={id:"msLeq1sAve",html:"",refreshRate:RefreshRates.ms250,ctls:[],isInit:!1,isVisible:!1,init:function(){function s(){var t=!1,u="&nbsp;";"off"==n.recState?$.getJSON("/sdk?func=cmd&id=293&p1=1&format=ack:u4",function(f){f.Response.ack!==undefined&&f.Response.ack===0&&(n.recState="on",t=!0,i="Recording",r="/images/firmware/soundrec_b.png",u="Stop")}).fail(function(){console.log("Failed to start recording.")}):"on"==n.recState&&$.getJSON("/sdk?func=cmd&id=293&p1=0&format=ack:u4",function(f){f.Response.ack!==undefined&&f.Response.ack===0&&(n.recState="off",t=!0,i="&nbsp;",r="/images/firmware/soundrec_g.png",u="Record")}).fail(function(){console.log("Failed to stop recording.")});t&&n.isVisible&&(ftr.lf.text(u),ftr.lf.show())}function k(){"on"==n.recState&&s();n.clearMarkers();n.isVisible=!1;ftr.lf.pop();ftr.mi.pop();ftr.rt.pop();pageArrows.show();kbCon.pop();t.hide();menuOpen=!1}var n=msLeq1sAveCtl,t=$("#mrkSnd"),w=t.find("#lbmsLeq1sAve"),b=t.find("#msLeq1sAve"),u=t.find("#msTable"),h=u.find("input"),c=t.find("#isRecording"),l=t.find("#recordingImg"),i="&nbsp;",r="/images/firmware/soundrec_g.png",a=(8&SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS)>0,f=-1,v=[],o=0,y=-1,e=-1,p=!1;n.isInit=!0;n.isVisible=!1;n.recState="off";n.runStateChanged=!1;t.bind("click","input",function(){setTimeout(n.setMarkers,0)});c.html(i);l.attr("src",r);n.enter=function(){var i;if(n.isVisible){if(undefined==MeasurementProperties.TAG_FREQ_WEIGHTING)return getProp("TAG_FREQ_WEIGHTING","int"),getProp("TAG_DET_WEIGHTING","int"),getProp("TAG_PEAK_WEIGHTING","int"),setTimeout(msLeq1sAveCtl.enter,300),!1;var r=MeasurementProperties.TAG_FREQ_WEIGHTING,f=MeasurementProperties.TAG_DET_WEIGHTING,e=MeasurementProperties.TAG_INTEGRATION_INPUT;for(w.html(MakeLWeightDetectorString(r,f,"","L<sub>$#eq(1s)</sub>",e)),i=0;i<NUM_MARKERS;++i)v[i]=MeasurementProperties["TAG_MARKER_NAMES_"+i]||"#"+i,u.find("#mark"+i).html(v[i]);return pageArrows.hide(),ftr.lf.push("label","Record",s),ftr.mi.push("button","Close",k),ftr.rt.push("label","Clear",n.clearMarkers),n.recState="off",t.show(),kbCon.push(msCon,u),CurrentStatus.IsRunning&&n.enableMarkers(),!0}};n.update=function(){if(n.isVisible){if(!PauseGetRunState){var t=pageData.TAG_IO_LIVE_1SEC_LEQ||-99.9;b.html(formD(t)+" dB").checkFlags(pFlags.TAG_IO_LIVE_1SEC_LEQ,t)}e=pageData.TAG_IO_SOUND_RECORDER_STATE;p=e!=y;(CurrentStatus.IsRunning!=f||n.runStateChanged||p)&&(f=CurrentStatus.IsRunning,y=e,n.runStateChanged=!1,f?n.enableMarkers():n.clearMarkers(),"off"==n.recState&&e?n.recState="ext":"ext"!=n.recState||e||(n.recState="off"),setRecordingState());f>0&&a?ftr.lf.show():ftr.lf.hide()}};n.leave=function(){};setRecordingState=function(){n.isVisible&&(a?"ext"==n.recState?(i="Recording",r="/images/firmware/soundrec_b.png",ftr.lf.text("&nbsp;"),ftr.lf.hide()):"stop"==n.recState?(n.recState="on",s()):"off"==n.recState?(i="&nbsp;",r="/images/firmware/soundrec_g.png",ftr.lf.text("&nbsp;"),CurrentStatus.IsRunning&&ftr.lf.text("Record"),ftr.lf.show()):"on"==n.recState&&(i="Recording",r="/images/firmware/soundrec_b.png",ftr.lf.text("Stop"),ftr.lf.show()):(n.recState="off",i="&nbsp;",r="/images/firmware/soundrec_g.png",ftr.lf.text("&nbsp;"),ftr.lf.hide()),c.html(i),l.attr("src",r))};h.bind("click",function(n){if(!CurrentStatus.IsRunning)return n.preventDefault(),!1});h.bind("change",function(){CurrentStatus.IsRunning&&n.setMarkers()});n.setMarkers=function(){var n,t,i;for(o=0,n=0;n<NUM_MARKERS;++n)t=u.find("#marker"+n),t.prop("checked")&&(o|=t.data("flag"));i="/sdk?func=cmd&id="+CMD_SET_TH_MARKERS+"&p1=0&p2=0&vals="+o;$.getJSON(i)};n.clearMarkers=function(){for(var i,t=0;t<NUM_MARKERS;++t)i=u.find("#marker"+t),i.prop("checked",!1),f||i.prop("disabled",!0);n.setMarkers()};n.enableMarkers=function(){for(var t,n=0;n<NUM_MARKERS;++n)t=u.find("#marker"+n),t.prop("disabled",!1);u.find("#marker0").focus()}}},OpSub={id:"OpSub",html:"",refreshRate:RefreshRates.ms250,isInit:!1,init:function(){var n=OpSub;n.isInit=!0;var t=$("#opSub"),u=$("#opLbAnyLeq"),i=$("#opAnyLeq"),f=$("#opLbAnyLvl"),r=$("#opAnyLvl");n.enter=function(){var e=MeasurementProperties.TAG_FREQ_WEIGHTING,o=MeasurementProperties.TAG_DET_WEIGHTING,n,i,r;return updAnyLvlStr(),n=SystemProperties.TAG_ANYLEVEL_ITEM_2||0,u.html(ShortLWDStr("L<sub>$#eq</sub>",!0)),i=AnyDataParam[n].str,r=ShortLWDStr(ckPk(i),!0),f.html(r),t.show(),!0};n.update=function(){if(tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0)r.html("--- dB").checkFlags(0,0),i.html("--- dB").checkFlags(0,0);else{var t="TAG_IO_ANYLEVEL_SPL_2";r.html(formD1(t)+" dB").checkFlags(pFlags[t],pageData[t]||-99.9);t="TAG_IO_ANYLEVEL_LEQ";i.html(formD1(t)+" dB").checkFlags(pFlags[t],pageData[t]||-99.9);anyLevelMenu.mod&&(n.enter(curTabIndex,curPageIndex),anyLevelMenu.mod=!1)}};n.leave=function(){t.hide();popMHCnt()}}};downKDFunc=keyDownArrow;upKDFunc=keyUpArrow;leftKDFunc=function(){return!0};rightKDFunc=function(){return!0};sfLeftKDFunc=keyLeftArrow;sfRightKDFunc=keyRightArrow;anyLevelMenu={id:"anyLevelMenu",html:"",refreshRate:0,isInit:!1,init:function(){function o(){var t=MeasurementProperties.TAG_FREQ_WEIGHTING,i=MeasurementProperties.TAG_DET_WEIGHTING,u=MeasurementProperties.TAG_INTEGRATION_INPUT;n.find("#alShA").html(MakeLWeightDetectorString(t,i,"","L<sub>A#eq</sub>",u));n.find("#alShC").html(MakeLWeightDetectorString(t,i,"","L<sub>C#eq</sub>",u));n.find("#alShZ").html(MakeLWeightDetectorString(t,i,"","L<sub>Z#eq</sub>",u));e.html(MakeLWeightDetectorString(t,i,"","L<sub>A#eq</sub>",u));n.find("#alLoC").html(MakeLWeightDetectorString(t,i,"","L<sub>C#eq</sub>",u));n.find("#alLoZ").html(MakeLWeightDetectorString(t,i,"","L<sub>Z#eq</sub>",u));updAnyLvlStr();r||n.children("div:gt(14)").hide();r=!0}function u(){var r=curTabIndex,n=curPageIndex,t=0;r==0&&n==pgId.Profile?(t=1,i="TAG_ANYLEVEL_ITEM_1"):r==0&&n==pgId.EnfMkt?(t=1,i="TAG_ANYLEVEL_ITEM_3"):n==pgId.Profile?(t=1,i="TAG_ANYLEVEL_ITEM_2"):n==pgId.EnfMkt&&(t=1,i="TAG_ANYLEVEL_ITEM_4")}var t=anyLevelMenu;t.isInit=!0;t.mod=!1;var n=$("#anyLevelMenuList"),r=!1,i="TAG_ANYLEVEL_ITEM_1",f=!0,e=n.find("#alLoA");t.enter=function(){};t.setAL=function(n){u();console.log("Selected: "+n);SystemProperties[i]=n;UpdateProperties("System").done(function(){dispHG(!0);$.getJSON("/sdk?func=LATCHSETTINGS&data=1&marksettingschanged=true").done(function(n){errorHandling("cmdLatchSettings Prefs",n)}).always(function(){CommitCompleteCnt=0;delete SystemProperties[i];SystemProperties.__proto__[i]=n;t.mod=!0})})};t.open=function(){var r,e,t;bgOvly.show();o();u();r=curTabIndex;e=curPageIndex;updAnyLvlStr();r===0?(n.children("div:gt(14)").hide(),n.children("div:lt(15)").show()):(n.children("div:gt(14)").show(),n.children("div:lt(15)").hide());f=r==0?!0:!1;n.children().removeClass("hover");t=n.find("[data-val="+SystemProperties[i]+"]:visible").addClass("hover");t.parent().scrollTop(t.position().top-t.parent().find(":visible").first().position().top-t.parent().parent().height()/2)};t.update=function(){};t.leave=function(){dispHG(!1)}}};LiveTime={id:"LiveTime",html:"",refreshRate:RefreshRates.ms250,isInit:!1,init:function(){var n=LiveTime;n.isInit=!0;var r=document.getElementById("lDtTm"),t=$("#LiveTimeDate"),f=$("#LiveTimeTime"),u=$("#LiveTimeInd"),i=0;n.enter=function(){return r.style.display="table",t.html(""),!0};n.update=function(){if(!PauseGetRunState&&CurrentStatus!=undefined&&CurrentStatus.tv_sec>0){var n=new Date(CurrentStatus.tv_sec*1e3);n.setMinutes(n.getMinutes()+n.getTimezoneOffset());SystemProperties.TAG_DISPLAY_DATE==1?t.html(n.format("d-m-Y")):t.html(n.format("Y-m-d"));i=timeInd(u,i);f.html(returnTime(n))}};n.leave=function(){r.style.display="none";u.hide();i=0}}};StartTime={id:"StartTime",html:"",refreshRate:RefreshRates.ms1000,isInit:!1,init:function(){var t=StartTime;t.isInit=!0;var r=$("#lDtTm"),i=$("#LiveTimeDate"),u=$("#LiveTimeTime"),n="TAG_IO_START_TIME";t.enter=function(){return r.show(),n=tbId.Measure==curTabIndex?"TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP":tbId.Events==curTabIndex?"TAG_IO_EVENT_START_TIME":"TAG_IO_START_TIME",!0};t.update=function(){if((pageData[n]||0)===0||pageData.TAG_IO_NUM_HISTORY_RECORDS==0&&tbId.Measure==curTabIndex)i.html("Started ---"),u.html("--:--:--");else{var t=new Date(pageData[n]*1e3);t.setMinutes(t.getMinutes()+t.getTimezoneOffset());SystemProperties.TAG_DISPLAY_DATE==1?i.html("Started "+t.format("d-m-Y")):i.html("Started "+t.format("Y-m-d"));u.html(returnTime(t))}};t.leave=function(){r.hide()}}};RunTime={id:"RunTime",html:"",refreshRate:RefreshRates.ms1000,isInit:!1,init:function(){var n=RunTime;n.isInit=!0;var i=$("#lDtTm"),r=$("#LiveTimeDate"),t=$("#LiveTimeTime");n.enter=function(){return i.show(),r.html("Run Time").css("text-align","right"),!0};n.update=function(){if(CurrentStatus.IsDataReset&&curTabIndex!=tbId.Live&&!inFileDsp)t.html("--:--:--.-");else if((pageData.TAG_IO_RUN_TIME||0)==0)t.html(defTmZ);else{var i=Math.round(pageData.TAG_IO_RUN_TIME*1e5)/100,n=new Date(1970,0,1);n.setMilliseconds(i);t.html(""+n.format(timeFm))}};n.leave=function(){r.html("").css("text-align","left");i.hide()}}};PageArray[tbId.Live][pgId.Profile]={controls:[profileGraphCtl,proLeq1sAve,LiveTime,anyLevelMenu,msLeq1sAveCtl],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_PROFILE_SERIES","TAG_IO_ANYLEVEL_LEQ","TAG_IO_LIVE_1SEC_LEQ",{g:"overall",data:["TAG_IO_DURATION"]},"TAG_IO_ANYLEVEL_SPL","TAG_IO_ANYLEVEL_LPEAK","TAG_IO_ANYLEVEL_SPL_1","TAG_IO_SOUND_RECORDER_STATE"]};page=PageArray[tbId.Live][pgId.Profile];PageArray[tbId.Overall][pgId.Profile]={controls:[profileGraphCtl,OpSub,StartTime,anyLevelMenu],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_PROFILE_SERIES","TAG_IO_ANYLEVEL_LEQ","TAG_IO_DURATION","TAG_IO_START_TIME","TAG_IO_ANYLEVEL_SPL_2"]};PageArray[tbId.Current][pgId.Profile]={controls:[profileGraphCtl,OpSub,StartTime,anyLevelMenu],refDRate:RefreshRates.ms250,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_PROFILE_SERIES","TAG_IO_ANYLEVEL_LEQ",{g:"overall",data:["TAG_IO_DURATION"]},"TAG_IO_START_TIME","TAG_IO_ANYLEVEL_SPL_2"]};PageArray[tbId.Measure][pgId.Profile]={controls:[profileGraphCtl,OpSub,StartTime,anyLevelMenu],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_PROFILE_SERIES","TAG_IO_ANYLEVEL_LEQ","TAG_IO_ANYLEVEL_LMAX","TAG_IO_ANYLEVEL_LMIN","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_ANYLEVEL_SPL_2",{g:"overall",data:["TAG_IO_DURATION"]}]};bdMain={id:"bdMain",html:"",refreshRate:RefreshRates.ms1000,isInit:!1,init:function(){var n=bdMain,i=!1,t,r,u;n.isInit=!0;t=$("#bdMain");r=t.find("#largeDisplayVal").html("--.-");u=t.find("#bdDisplayTop");n.enter=function(r,f){if(updAnyLvlStr(),(SystemProperties.TAG_LOCK_MODE==1||SystemProperties.TAG_LOCK_MODE==2)&&(kbCon.push(lockCon,null),i=!0),t[0].style.display="table",liveTab.show(),MeasurementProperties.TAG_FREQ_WEIGHTING!=undefined){var e="";return r==0&&f==pgId.EnfMkt?(e=AnyDataParam[SystemProperties.TAG_ANYLEVEL_ITEM_3||0].str,console.log(e)):f==pgId.EnfMkt&&(e=ckPk(AnyDataParam[SystemProperties.TAG_ANYLEVEL_ITEM_4||0].str)),e=MakeLWeightDetectorString(MeasurementProperties.TAG_FREQ_WEIGHTING,MeasurementProperties.TAG_DET_WEIGHTING,"",e,MeasurementProperties.TAG_INTEGRATION_INPUT),u.html(e),!0}return setTimeout(n.enter,300),!1};n.update=function(){var n,t;upMHCntTitle();tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0?r.html("--.-").checkFlags(0,0):(n=0,n=(curTabIndex==0||curTabIndex==tbId.LockedScreen)&&curPageIndex==pgId.EnfMkt?"TAG_IO_ANYLEVEL_SPL_3":"TAG_IO_ANYLEVEL_SPL_4",t=pageData[n]||-99.9,r.html(formD(t)).checkFlags(pFlags[n],t))};n.leave=function(){t[0].style.display="none";liveTab.hide();popMHCnt();i&&(kbCon.pop(),i=!1)}}};livebdBottom={id:"livebdBottom",html:"",refreshRate:RefreshRates.ms1000,isInit:!1,init:function(){var n=livebdBottom,r,t,i,u;n.isInit=!0;bdSub=$("#bdSub");t=bdSub.find("#trigLevel");r=bdSub.find("#bdAnyPeak");i=bdSub.find("#lbTrigLevel");u=bdSub.find("#lbPeakLevel");n.enter=function(){var n=MeasurementProperties.TAG_DET_WEIGHTING;i.html(MakeLWeightDetectorString(MeasurementProperties.TAG_FREQ_WEIGHTING,n,"","L<sub>$#</sub> >"));t.html(formD(MeasurementProperties.TAG_EVENT_LEVEL_0||0)+" dB");u.html(MakeLWeightDetectorString(MeasurementProperties.TAG_PEAK_WEIGHTING,n,"","L<sub>^peak</sub>"));bdSub[0].style.display="table"};n.update=function(){var u=pageData.TAG_IO_ANYLEVEL_LPEAK||-99.9,f;r.html(formD(u)+" dB").checkFlags(pFlags.TAG_IO_ANYLEVEL_LPEAK,u);f=pageData.TAG_IO_ANYLEVEL_SPL||0;f>(MeasurementProperties.TAG_EVENT_LEVEL_0||0)?(i.addClass("flagged"),t.addClass("flagged")):(i.removeClass("flagged"),t.removeClass("flagged"));anyLevelMenu.mod&&(n.enter(curTabIndex,curPageIndex),anyLevelMenu.mod=!1)};n.leave=function(){bdSub[0].style.display="none"}}};ObSub={id:"ObSub",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var t=ObSub;t.isInit=!0;var n=$("#obSub"),o=n.find("#obLbTrigLvl"),s=n.find("#obTrigLvl"),h=n.find("#obLbMaxLvl"),i=n.find("#obMaxLvl"),c=n.find("#obLbPeakLvl"),r=n.find("#obPeakLvl"),u=n.find("#obTrigPer"),l=n.find("#obLbRun"),f=n.find("#obRun"),a=n.find("#obLbPause"),e=n.find("#obPause");t.enter=function(){var i=MeasurementProperties.TAG_FREQ_WEIGHTING,t=MeasurementProperties.TAG_DET_WEIGHTING;return o.html(MakeLWeightDetectorString(i,t,"","L<sub>$#</sub> >")),h.html(MakeLWeightDetectorString(i,t,"","L<sub>$#max</sub>")),c.html(MakeLWeightDetectorString(MeasurementProperties.TAG_PEAK_WEIGHTING,t,"","L<sub>^peak(max)</sub>")),s.html(formD(MeasurementProperties.TAG_EVENT_LEVEL_0||65)+" dB"),n[0].style.display="table",!0};t.update=function(){var n,o,s,h;tbId.Measure===curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0||CurrentStatus.IsDataReset&&curTabIndex!==tbId.Live&&!inFileDsp?(i.html("--- dB").checkFlags(0,0),r.html("--- dB").checkFlags(0,0),u.html("--- %"),getRunPause(f,e,!0)):(n="TAG_IO_ANYLEVEL_LMAX",o=pageData[n]||-99.9,i.html(formD(o)+" dB").checkFlags(pFlags[n],o),n="TAG_IO_ANYLEVEL_LPEAK_MAX",o=pageData[n]||-99.9,r.html(formD(o)+" dB").checkFlags(pFlags[n],o),s=pageData.TAG_IO_RUN_TIME||0,h=s!=0?(pageData.TAG_IO_SPL_EVENT_TIME||0)/s*100:0,u.html(formD(h)+" %"),getRunPause(f,e),anyLevelMenu.mod&&(t.enter(curTabIndex,curPageIndex),anyLevelMenu.mod=!1))};t.leave=function(){n[0].style.display="none";popMHCnt();liveTab.hide()}}};PageArray[tbId.LockedScreen][pgId.EnfMkt]={controls:[bdMain,livebdBottom,LiveTime,anyLevelMenu],refDRate:RefreshRates.ms1000,dataNeeded:[{g:"overall",data:["TAG_IO_DURATION"]},{g:"oneseclive",data:["TAG_IO_ANYLEVEL_SPL_3","TAG_IO_ANYLEVEL_LPEAK","TAG_IO_ANYLEVEL_SPL"]}]};PageArray[tbId.Live][pgId.EnfMkt]={controls:[bdMain,livebdBottom,LiveTime,anyLevelMenu],refDRate:RefreshRates.ms500,dataNeeded:[{g:"overall",data:["TAG_IO_DURATION"]},{g:"oneseclive",data:["TAG_IO_ANYLEVEL_SPL_3","TAG_IO_ANYLEVEL_LPEAK","TAG_IO_ANYLEVEL_SPL"]}]};PageArray[tbId.Overall][pgId.EnfMkt]={controls:[bdMain,ObSub,anyLevelMenu],refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_DURATION","TAG_IO_ANYLEVEL_SPL_4","TAG_IO_START_TIME","TAG_IO_ANYLEVEL_LPEAK_MAX","TAG_IO_SPL_EVENT_TIME","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME","TAG_IO_ANYLEVEL_LMAX"]};PageArray[tbId.Current][pgId.EnfMkt]={controls:[bdMain,ObSub,anyLevelMenu],refDRate:RefreshRates.ms1000,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_ANYLEVEL_SPL_4","TAG_IO_START_TIME","TAG_IO_ANYLEVEL_LPEAK_MAX","TAG_IO_SPL_EVENT_TIME","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME","TAG_IO_ANYLEVEL_LMAX",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.EnfMkt]={controls:[bdMain,ObSub,StartTime,anyLevelMenu],refDRate:RefreshRates.ms1000,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_ANYLEVEL_SPL_4","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_ANYLEVEL_LPEAK_MAX","TAG_IO_SPL_EVENT_TIME","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME","TAG_IO_ANYLEVEL_LMAX",{g:"overall",data:["TAG_IO_DURATION"]}]};OLeq={id:"OLeq",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){function b(){s.html("--- dB").checkFlags(0,0);c.html("--- dB").checkFlags(0,0);l.html("--- dB").checkFlags(0,0);a.html("--- dB").checkFlags(0,0);t.html("--- dB").checkFlags(0,0);o.html("--- dB").checkFlags(0,0);r.html("--:--:--.-");u.html("--:--:--.-");f.html("--:--:--.-")}var i=OLeq;i.isInit=!0;var n=$("#leqTbl"),v=n.find("#leqLbSpl"),s=n.find("#leqSpl"),h=n.find("#leqLbLSpl"),t=n.find("#leqLSpl"),e=n.find("#leqLbLPeak"),o=n.find("#leqLPeak"),y=n.find("#leqLbLPeakM"),c=n.find("#leqLPeakM"),r=n.find("#leqLPMt"),p=n.find("#leqLbLMax"),l=n.find("#leqLMax"),u=n.find("#leqLMaxt"),w=n.find("#leqLbLmin"),a=n.find("#leqLmin"),f=n.find("#leqLmint");n.find("td:nth-child(2)").css("text-align","right");i.enter=function(t){var i=MeasurementProperties.TAG_DET_WEIGHTING;return v.html(ShortLWDStr("L<sub>$#eq</sub>",!0)),tbId.Measure==t?(h.html(ShortLWDStr("L<sub>$#E</sub>",!0)),e.parent().hide()):(h.html(ShortLWDStr("L<sub>$#</sub>")),e.html(MakeLWeightDetectorString(MeasurementProperties.TAG_PEAK_WEIGHTING,i,"","L<sub>^peak</sub>"))),y.html(MakeLWeightDetectorString(MeasurementProperties.TAG_PEAK_WEIGHTING,i,"","L<sub>^peak(max)</sub>")),p.html(ShortLWDStr("L<sub>$#max</sub>")),w.html(ShortLWDStr("L<sub>$#min</sub>")),liveTab.show(),n.show(),!0};i.update=function(){var n,i,h,e;upMHCntTitle();tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0||CurrentStatus.IsDataReset&&curTabIndex!=tbId.Live&&!inFileDsp?(b(),tbId.Measure!=curTabIndex&&(n="TAG_IO_ANYLEVEL_LPEAK",i=pageData[n]||-99.9,o.html(formD(i)+" dB").checkFlags(pFlags[n],i),tbId.Measure==curTabIndex?(n="TAG_IO_LWDE",i=pageData[n]||-99.9,t.html(formD(i)+" dB").checkFlags(pFlags[n],i)):(n="TAG_IO_ANYLEVEL_SPL",i=pageData[n]||-99.9,t.html(formD(i)+" dB").checkFlags(pFlags[n],i)))):(n="TAG_IO_ANYLEVEL_LEQ",i=pageData[n]||-99.9,s.html(formD(i)+" dB").checkFlags(pFlags[n],i),n="TAG_IO_ANYLEVEL_LPEAK",i=pageData[n]||-99.9,o.html(formD(i)+" dB").checkFlags(pFlags[n],i),tbId.Measure==curTabIndex?(n="TAG_IO_LWDE",i=pageData[n]||-99.9,t.html(formD(i)+" dB").checkFlags(pFlags[n],i)):(n="TAG_IO_ANYLEVEL_SPL",i=pageData[n]||-99.9,t.html(formD(i)+" dB").checkFlags(pFlags[n],i)),n="TAG_IO_ANYLEVEL_LPEAK_MAX",i=pageData[n]||-99.9,c.html(formD(i)+" dB").checkFlags(pFlags[n],i),n="TAG_IO_ANYLEVEL_LMAX",i=pageData[n]||-99.9,l.html(formD(i)+" dB").checkFlags(pFlags[n],i),n="TAG_IO_ANYLEVEL_LMIN",h=pageData[n]||-99.9,h=h>240?-99.9:h,a.html(formD(h)+" dB").checkFlags(h<-99?DataFlag.NF_FLAG_UNDERRANGE:pFlags[n]),e=new Date(1970,0,1),e.setMilliseconds((pageData.TAG_IO_ANYLEVEL_LPEAK_TIME||0)*1e3),pageData.TAG_IO_ANYLEVEL_LPEAK_TIME>0?SystemProperties.TAG_DISPLAY_DATE==1?r.html(e.format("d-m-Y H:i:s.p")):r.html(e.format("Y-m-d H:i:s.p")):r.html(defTmZ),e=new Date(1970,0,1),e.setMilliseconds((pageData.TAG_IO_ANYLEVEL_LMAX_TIME||0)*1e3),pageData.TAG_IO_ANYLEVEL_LPEAK_TIME>0?SystemProperties.TAG_DISPLAY_DATE?u.html(e.format("d-m-Y H:i:s.p")):u.html(e.format("Y-m-d H:i:s.p")):u.html(defTmZ),e=new Date(1970,0,1),e.setMilliseconds((pageData.TAG_IO_ANYLEVEL_LMIN_TIME||0)*1e3),pageData.TAG_IO_ANYLEVEL_LPEAK_TIME>0?SystemProperties.TAG_DISPLAY_DATE?f.html(e.format("d-m-Y H:i:s.p")):f.html(e.format("Y-m-d H:i:s.p")):f.html(defTmZ))};i.leave=function(){n.hide();liveTab.hide();popMHCnt();e.parent().show()}}};PageArray[tbId.Overall][pgId.Leq]={controls:[OLeq,RunTime],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_ANYLEVEL_LEQ","TAG_IO_ANYLEVEL_LPEAK_MAX","TAG_IO_ANYLEVEL_LMAX","TAG_IO_ANYLEVEL_LMIN","TAG_IO_ANYLEVEL_LMAX_TIME","TAG_IO_ANYLEVEL_LPEAK_TIME","TAG_IO_ANYLEVEL_LMIN_TIME",{g:"live",data:["TAG_IO_ANYLEVEL_SPL","TAG_IO_ANYLEVEL_LPEAK"]}]};PageArray[tbId.Current][pgId.Leq]={controls:[OLeq,RunTime],refDRate:RefreshRates.ms250,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_ANYLEVEL_LEQ","TAG_IO_ANYLEVEL_LPEAK_MAX","TAG_IO_ANYLEVEL_LMAX","TAG_IO_ANYLEVEL_LMIN","TAG_IO_ANYLEVEL_LMAX_TIME","TAG_IO_ANYLEVEL_LPEAK_TIME","TAG_IO_ANYLEVEL_LMIN_TIME",{g:"live",data:["TAG_IO_ANYLEVEL_SPL","TAG_IO_ANYLEVEL_LPEAK"]},{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Leq]={controls:[OLeq,StartTime],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_ANYLEVEL_LEQ","TAG_IO_ANYLEVEL_LPEAK_MAX","TAG_IO_ANYLEVEL_LMAX","TAG_IO_ANYLEVEL_LMIN","TAG_IO_ANYLEVEL_LMAX_TIME","TAG_IO_ANYLEVEL_LPEAK_TIME","TAG_IO_ANYLEVEL_LMIN_TIME","TAG_IO_LWDE",{g:"overall",data:["TAG_IO_DURATION"]}]};EvLeq={id:"EvLeq",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var t=EvLeq;t.isInit=!0;var n=$("#leqTbl"),y=n.find("#leqLbSpl"),p=n.find("#leqSpl"),w=n.find("#leqLbLSpl"),b=n.find("#leqLSpl"),k=n.find("#leqLbLPeak"),f=n.find("#leqLPeak"),d=n.find("#leqLbLPeakM"),g=n.find("#leqLPeakM"),e=n.find("#leqLPMt"),nt=n.find("#leqLbLMax"),tt=n.find("#leqLMax"),i=n.find("#leqLMaxt"),o=n.find("#leqLbLmin"),it=n.find("#leqLmin"),s=n.find("#leqLmint"),h=n.find(".evntLeq"),c=n.find("#evntCt"),l=n.find("#evntDur"),a=n.find("#evntTime"),v=-1,r=-1,u=5;n.find("td:nth-child(2)").css("text-align","right");t.enter=function(){var t=MeasurementProperties.TAG_DET_WEIGHTING;return y.html(ShortLWDStr("L<sub>$#eq</sub>",!0)),w.html(ShortLWDStr("L<sub>$#E</sub>",!0)),k.html(ShortLWDStr("E<sub>$#</sub>",!0)),d.html(MakeLWeightDetectorString(MeasurementProperties.TAG_PEAK_WEIGHTING,t,"","L<sub>^peak(max)</sub>")),nt.html(ShortLWDStr("L<sub>$#max</sub>")),o.parent().hide(),s.hide(),e.hide(),liveTab.show(),n.show(),h.toggle(!0),pushMHCnt(),!0};t.update=function(){var o=pageData.TAG_IO_NUM_EVENT_RECORDS,n,t,e;checkEvents();eventsCnt=pageData.TAG_IO_EVENT_HIST_CUR_RECORD;(o!=r||v!=eventsCnt||CurrentStatus.changeState)&&(u=5,initialGet=!0);u-->0&&(v=eventsCnt,r=o,upMHCntTitle(),n="TAG_IO_EVENT_LEQ",t=pageData[n]||-99.9,p.html(formD(t)+" dB").checkFlags(pFlags[n],t),n="TAG_IO_EVENT_SEL",t=pageData[n]||-99.9,b.html(formD(t)+" dB").checkFlags(pFlags[n],t),n="TAG_IO_EVENT_LPEAK",t=pageData[n]||-99.9,g.html(formD(t)+" dB").checkFlags(pFlags[n],t),n="TAG_IO_EVENT_LMAX",t=pageData[n]||-99.9,tt.html(formD(t)+" dB").checkFlags(pFlags[n],t),n="TAG_IO_ANYLEVEL_LMIN",e=pageData[n]||-99.9,e=e>240?-99.9:e,it.html(formD(e)+" dB").checkFlags(e<-99?DataFlag.NF_FLAG_UNDERRANGE:pFlags[n]),dt=new Date(1970,0,1),dt.setMilliseconds((pageData.TAG_IO_EVENT_MAX_TIME||0)*1e3),pageData.TAG_IO_EVENT_MAX_TIME>0?SystemProperties.TAG_DISPLAY_DATE?i.html(dt.format("d-m-Y H:i:s")):i.html(dt.format("Y-m-d H:i:s")):i.html(defTmZSec),0<o?(c.html(eventsCnt+1+"/"+o),n="TAG_IO_EVENT_SE",t=pageData[n]||-99.9,f.html(SixDigitFloat(t)+"Pa<sup>2<\/sup>s").checkFlags(pFlags[n],t),l.html(SecsToHHMMSSP(pageData.TAG_IO_EVENT_RUN_TIME||0),1),a.html(SecsToDateTime(pageData.TAG_IO_EVENT_START_TIME))):(c.html("No Data"),f.html("---"),a.html("---"),l.html(defTmZ)))};t.leave=function(){h.toggle(!1);n.hide();liveTab.hide();o.parent().show();s.show();e.show();popMHCnt();r=-1;u=5}}};PageArray[tbId.Events][pgId.Leq]={controls:[EvLeq],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE>0},dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_START_TIME","TAG_IO_EVENT_RUN_TIME","TAG_IO_EVENT_HIST_CUR_RECORD","TAG_IO_EVENT_LEQ","TAG_IO_EVENT_LPEAK","TAG_IO_EVENT_LMAX","TAG_IO_EVENT_SEL","TAG_IO_EVENT_SE","TAG_IO_EVENT_MAX_TIME","TAG_IO_EVENT_MIN_DURATION",{g:"overall",data:["TAG_IO_DURATION"]}]};CRemLeq={id:"CRemLeq",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var t=CRemLeq;t.isInit=!0;var n=$("#remLeqTbl"),i=n.find("#lbLeq1sRemLeq"),r=n.find("#leq1sRemLeq"),f=n.find("#remLvl"),u=n.find("#remRem"),e=n.find("#remCur"),o=n.find("#remTar"),s=n.find("#remTimeR"),h=n.find("#remTimeE"),c=n.find("#remTimeT");t.enter=function(t){if(t==tbId.Measure)r.hide(),i.hide();else{var u=MeasurementProperties.TAG_FREQ_WEIGHTING,f=MeasurementProperties.TAG_DET_WEIGHTING,e=MeasurementProperties.TAG_INTEGRATION_INPUT;i.html(MakeLWeightDetectorString(u,f,"","L<sub>$#eq(1s)</sub>",e));r.show();i.show()}return n.show(),liveTab.show(),!0};t.update=function(){upMHCntTitle();curTabIndex==tbId.Measure?u.html(formD(-99.9),1):(f.html(formD(pageData.TAG_IO_ANYLEVEL_LEQ_LIVE),1),u.html(formD(pageData.TAG_IO_REM_LEQ),1));e.html(formD(pageData.TAG_IO_ANYLEVEL_LEQ),1);o.html(formD(pageData.TAG_IO_REM_LEQ_TARGET_LEQ),1);s.html(SecsToHHMMSSP(pageData.TAG_IO_REM_LEQ_REMAINING_TIME||0),1);h.html(SecsToHHMMSSP(pageData.TAG_IO_RUN_TIME||0),1);c.html(SecsToHHMMSSP(pageData.TAG_IO_REM_LEQ_TARGET_TIME||0),1)};t.leave=function(){n.hide();popMHCnt();liveTab.hide()}}};PageArray[tbId.Current][pgId.RemLeq]={controls:[CRemLeq,RunTime],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0&&MeasurementProperties.TAG_RUN_MODE!=0&&MeasurementProperties.TAG_RUN_MODE!=2},dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_ANYLEVEL_LEQ","TAG_IO_REM_LEQ_TARGET_TIME","TAG_IO_REM_LEQ_REMAINING_TIME","TAG_IO_REM_LEQ_TARGET_LEQ","TAG_IO_REM_LEQ","TAG_IO_ANYLEVEL_LEQ",{g:"oneseclive",data:["TAG_IO_ANYLEVEL_LEQ_LIVE"]},{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.RemLeq]={controls:[CRemLeq,StartTime],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0&&MeasurementProperties.TAG_RUN_MODE!=0&&MeasurementProperties.TAG_RUN_MODE!=2},dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_ANYLEVEL_LEQ","TAG_IO_REM_LEQ_TARGET_TIME","TAG_IO_REM_LEQ_REMAINING_TIME","TAG_IO_REM_LEQ_TARGET_LEQ","TAG_IO_REM_LEQ","TAG_IO_ANYLEVEL_LEQ",{g:"overall",data:["TAG_IO_DURATION"]}]};OLnPer={id:"OLnPer",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var t=OLnPer;t.isInit=!0;var n=$("#lnPerTbl"),f=n.find("#lnPerLb"),e=n.find("#lnPerLbSplMax"),r=n.find("#lnPerSplMax"),h=n.find("#ltLpeak"),o=[n.find("#lnPerLbSpl0"),n.find("#lnPerLbSpl1"),n.find("#lnPerLbSpl2"),n.find("#lnPerLbSpl3"),n.find("#lnPerLbSpl4"),n.find("#lnPerLbSpl5")],i=[n.find("#lnPerSpl0"),n.find("#lnPerSpl1"),n.find("#lnPerSpl2"),n.find("#lnPerSpl3"),n.find("#lnPerSpl4"),n.find("#lnPerSpl5")],s=n.find("#lnPerLbSplMin"),u=n.find("#lnPerSplMin");t.enter=function(){var i,r,t;for(f.html("Ln Percentiles"),i=ShortLWDStr("L<sub>$#max</sub>",!1),e.html(i),i=ShortLWDStr("L<sub>$#min</sub>",!1),s.html(i),r=ShortLWDStr("L<sub>$#</sub>"),((SystemProperties.TAG_MASK_OPTION||0)&8388608)!=0&&(r="L<sub>NF<\/sub>"),t=0;t<6;++t)o[t].html(r+"<sub>"+swiToComma(parseFloat(MeasurementProperties["TAG_LN_"+t]).toString())+"<\/sub>");return liveTab.show(),n.show(),!0};t.update=function(){var n;if(upMHCntTitle(),tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0)for(r.html("--- dB"),u.html("--- dB"),n=0;n<6;++n)i[n].html("--- dB");else for(r.html(formD1("TAG_IO_ANYLEVEL_LMAX")+" dB"),u.html(formD1("TAG_IO_ANYLEVEL_LMIN")+" dB"),n=0;n<6;++n)pageData.TAG_IO_LN_LEVEL_SERIES!=undefined?i[n].html(formD(pageData.TAG_IO_LN_LEVEL_SERIES[n]||0)+" dB"):i[n].html("0 dB")};t.leave=function(){n.hide();popMHCnt();liveTab.hide()}}};PageArray[tbId.Overall][pgId.Percentiles]={controls:[OLnPer,RunTime],refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_ANYLEVEL_LMAX","TAG_IO_ANYLEVEL_LMIN","TAG_IO_LN_LEVEL_SERIES"]};PageArray[tbId.Current][pgId.Percentiles]={controls:[OLnPer,RunTime],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_ANYLEVEL_LMAX","TAG_IO_ANYLEVEL_LMIN","TAG_IO_LN_LEVEL_SERIES",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Percentiles]={controls:[OLnPer,StartTime],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_ANYLEVEL_LMAX","TAG_IO_ANYLEVEL_LMIN","TAG_IO_LN_LEVEL_SERIES",{g:"overall",data:["TAG_IO_DURATION"]}]};LTrig={id:"LTrig",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var t=LTrig;t.isInit=!0;var n=$("#ltrigTbl"),o=n.find("#ltLbLeq"),s=n.find("#ltLeq"),h=n.find("#ltLbLpeak"),c=n.find("#ltLpeak"),i=n.find("#ltTrig0"),r=n.find("#ltTrig1"),u=n.find("#ltTrig2"),f=n.find("#ltTrig3"),e=n.find("#ltTrig4"),l=n.find("#ltrigLb"),a=n.find("#ltExL0"),v=n.find("#ltExL1"),y=n.find("#ltExL2"),p=n.find("#ltExL3"),w=n.find("#ltExL4");t.enter=function(){var t;l.html("Triggering");var b=MeasurementProperties.TAG_FREQ_WEIGHTING,c=MeasurementProperties.TAG_DET_WEIGHTING,s=MakeLWeightDetectorString(b,c,"","L<sub>$#</sub>");return o.html(s),i.html(formD(MeasurementProperties.TAG_EVENT_LEVEL_0||0)+" dB"),r.html(formD(MeasurementProperties.TAG_EVENT_LEVEL_1||0)+" dB"),u.html(formD(MeasurementProperties.TAG_EVENT_LEVEL_2||0)+" dB"),f.html(formD(MeasurementProperties.TAG_EVENT_LEVEL_3||0)+" dB"),e.html(formD(MeasurementProperties.TAG_EVENT_LEVEL_4||0)+" dB"),t=MakeLWeightDetectorString(MeasurementProperties.TAG_PEAK_WEIGHTING,c,"","L<sub>^peak</sub>"),h.html(t),a.html(s+" > SPL 1"),v.html(s+" > SPL 2"),y.html(t+" > Peak 1"),p.html(t+" > Peak 2"),w.html(t+" > Peak 3"),liveTab.show(),n.show(),!0};t.update=function(){var n="TAG_IO_ANYLEVEL_SPL",t=pageData[n]||-99.9;s.html(formD(t)+" dB").checkFlags(pFlags[n],t);pageData.TAG_IO_SPL_EXCEEDED_SERIES!=undefined&&(pageData.TAG_IO_SPL_EXCEEDED_SERIES[0]==1?i.addClass("oranged"):i.removeClass("oranged"),pageData.TAG_IO_SPL_EXCEEDED_SERIES[1]==1?r.addClass("flagged"):r.removeClass("flagged"));pageData.TAG_IO_PEAK_EXCEEDED_SERIES!=undefined&&(pageData.TAG_IO_PEAK_EXCEEDED_SERIES[0]==1?u.addClass("oranged"):u.removeClass("oranged"),pageData.TAG_IO_PEAK_EXCEEDED_SERIES[1]==1?f.addClass("flagged"):f.removeClass("flagged"),pageData.TAG_IO_PEAK_EXCEEDED_SERIES[2]==1?e.addClass("flagged"):e.removeClass("flagged"));upMHCntTitle();n="TAG_IO_ANYLEVEL_LPEAK";t=pageData[n]||-99.9;c.html(formD(t)+" dB").checkFlags(pFlags[n],t)};t.leave=function(){n.hide();liveTab.hide()}}};PageArray[tbId.Live][pgId.Triggering]={controls:[LTrig,LiveTime],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_ANYLEVEL_SPL","TAG_IO_ANYLEVEL_LPEAK","TAG_IO_SPL_EXCEEDED_SERIES","TAG_IO_PEAK_EXCEEDED_SERIES",{g:"overall",data:["TAG_IO_DURATION"]}]};OExc={id:"OExc",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var n=OExc;n.isInit=!0;var t=$("#ltrigTbl"),o=$("#ltLbLeq"),p=$("#ltLeq"),s=$("#ltLbLpeak"),w=$("#ltLpeak"),i=$("#ltTrig0"),r=$("#ltTrig1"),u=$("#ltTrig2"),f=$("#ltTrig3"),e=$("#ltTrig4"),y=$("#ltrigLb"),h=$("#ltExL0"),c=$("#ltExL1"),l=$("#ltExL2"),a=$("#ltExL3"),v=$("#ltExL4");n.enter=function(){var i,n;return y.html("Exceedances"),i=ShortLWDStr("L<sub>$#</sub>",!1),o.parent().hide(),s.parent().hide(),t.css("font-size","12px"),h.html(i+" > "+formD(MeasurementProperties.TAG_EVENT_LEVEL_0||0)+" dB"),c.html(i+" > "+formD(MeasurementProperties.TAG_EVENT_LEVEL_1||0)+" dB"),n=ShortLWDStr("L<sub>^peak</sub>"),l.html(n+" > "+formD(MeasurementProperties.TAG_EVENT_LEVEL_2||0)+" dB"),a.html(n+" > "+formD(MeasurementProperties.TAG_EVENT_LEVEL_3||0)+" dB"),v.html(n+" > "+formD(MeasurementProperties.TAG_EVENT_LEVEL_4||0)+" dB"),liveTab.show(),t.show(),!0};n.update=function(){if(upMHCntTitle(),tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0||CurrentStatus.IsDataReset&&curTabIndex!=tbId.Live&&!inFileDsp)i.html("---<br>--:--:--.-"),r.html("---<br>--:--:--.-"),u.html("---<br>--:--:--.-"),f.html("---<br>--:--:--.-"),e.html("---<br>--:--:--.-");else{var n=[],t;if(t="TAG_IO_SPL_EVENT_TIME_SERIES",pageData[t]==undefined)return;n[0]=new Date(1970,0,1);n[0].setMilliseconds((pageData[t][0]||0)*1e3);n[1]=new Date(1970,0,1);n[1].setMilliseconds((pageData[t][1]||0)*1e3);t="TAG_IO_SPL_EVENT_COUNT_SERIES";i.html(formD(pageData[t][0]||0,0)+"<br>"+n[0].format(timeFm));r.html(formD(pageData[t][1]||0,0)+"<br>"+n[1].format(timeFm));t="TAG_IO_PEAK_EVENT_TIME_SERIES";n[0]=new Date(1970,0,1);n[0].setMilliseconds((pageData[t][0]||0)*1e3);n[1]=new Date(1970,0,1);n[1].setMilliseconds((pageData[t][1]||0)*1e3);n[2]=new Date(1970,0,1);n[2].setMilliseconds((pageData[t][2]||0)*1e3);t="TAG_IO_PEAK_EVENT_COUNT_SERIES";u.html(formD(pageData[t][0]||0,0)+"<br>"+n[0].format(timeFm));f.html(formD(pageData[t][1]||0,0)+"<br>"+n[1].format(timeFm));e.html(formD(pageData[t][2]||0,0)+"<br>"+n[2].format(timeFm));pageData.TAG_IO_SPL_EXCEEDED_SERIES!=undefined&&(pageData.TAG_IO_SPL_EXCEEDED_SERIES[0]==1?i.addClass("oranged"):i.removeClass("oranged"),pageData.TAG_IO_SPL_EXCEEDED_SERIES[1]==1?r.addClass("flagged"):r.removeClass("flagged"));pageData.TAG_IO_PEAK_EXCEEDED_SERIES!=undefined&&(pageData.TAG_IO_PEAK_EXCEEDED_SERIES[0]==1?u.addClass("oranged"):u.removeClass("oranged"),pageData.TAG_IO_PEAK_EXCEEDED_SERIES[1]==1?f.addClass("flagged"):f.removeClass("flagged"),pageData.TAG_IO_PEAK_EXCEEDED_SERIES[2]==1?e.addClass("flagged"):e.removeClass("flagged"))}};n.leave=function(){t.hide();liveTab.hide();t.css("font-size","16px");o.parent().show();s.parent().show();h.html("");c.html("");l.html("");a.html("");v.html("");popMHCnt()}}};PageArray[tbId.Overall][pgId.Exceedances]={controls:[OExc,RunTime],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_SPL_EVENT_COUNT_SERIES","TAG_IO_SPL_EVENT_TIME_SERIES","TAG_IO_PEAK_EVENT_COUNT_SERIES","TAG_IO_PEAK_EVENT_TIME_SERIES",{g:"live",data:["TAG_IO_SPL_EXCEEDED_SERIES","TAG_IO_PEAK_EXCEEDED_SERIES"]}]};PageArray[tbId.Current][pgId.Exceedances]={controls:[OExc,RunTime],refDRate:RefreshRates.ms250,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_SPL_EVENT_COUNT_SERIES","TAG_IO_SPL_EVENT_TIME_SERIES","TAG_IO_PEAK_EVENT_COUNT_SERIES","TAG_IO_PEAK_EVENT_TIME_SERIES",{g:"live",data:["TAG_IO_SPL_EXCEEDED_SERIES","TAG_IO_PEAK_EXCEEDED_SERIES"]},{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Exceedances]={controls:[OExc,StartTime],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_SPL_EVENT_COUNT_SERIES","TAG_IO_SPL_EVENT_TIME_SERIES","TAG_IO_PEAK_EVENT_COUNT_SERIES","TAG_IO_PEAK_EVENT_TIME_SERIES",{g:"live",data:["TAG_IO_SPL_EXCEEDED_SERIES","TAG_IO_PEAK_EXCEEDED_SERIES"]},{g:"overall",data:["TAG_IO_DURATION"]}]};OOvrld={id:"OOvrld",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var t=OOvrld;t.isInit=!0;var f=$("#ovrldTbl"),e=$("#ovrldOvlCount"),o=$("#ovrldOvlPerc"),s=$("#ovrldOvlTime"),n=$("#ovrldOBAHeader"),i=$("#ovrldOBACHeader"),r=$("#ovrldOBAPHeader"),u=$("#ovrldOBADHeader"),a=$("#ovrldOBACount"),v=$("#ovrldOBAPerc"),y=$("#ovrldOBATime"),h=$("#ovrldRun"),c=$("#ovrldPause"),l=$("#LiveTimeTime");t.enter=function(){return liveTab.show(),f.show(),l.hide(),!0};t.update=function(){if(upMHCntTitle(),tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0||CurrentStatus.IsDataReset&&curTabIndex!=tbId.Live&&!inFileDsp)n.hide(),i.hide(),r.hide(),u.hide(),e.html("---"),o.html("--- %"),s.html("--:--:--.-"),getRunPause(h,c,!0);else{e.html(pageData.TAG_IO_OVERLOAD_COUNT);o.html(formD(pageData.TAG_IO_OVERLOAD_PERCENT,2)+"%");var t=new Date(1970,0,1);t.setMilliseconds((pageData.TAG_IO_OVERLOAD_TIME||0)*1e3);s.html(t.format(timeFm));(MeasurementProperties.TAG_OBA_BANDWIDTH||0)!=0?(n.is(":visible")||(n.show(),i.show(),r.show(),u.show()),a.html(pageData.TAG_IO_OVERLOAD_OBA_COUNT),v.html(formD(pageData.TAG_IO_OVERLOAD_OBA_PERCENT,2)+"%"),t=new Date(1970,0,1),t.setMilliseconds((pageData.TAG_IO_OVERLOAD_OBA_TIME||0)*1e3),y.html(t.format(timeFm))):n.is(":visible")&&(n.hide(),i.hide(),r.hide(),u.hide());getRunPause(h,c)}};t.leave=function(){f.hide();liveTab.hide();l.show();popMHCnt()}}};PageArray[tbId.Overall][pgId.Overload]={controls:[OOvrld],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME","TAG_IO_OVERLOAD_COUNT","TAG_IO_OVERLOAD_TIME","TAG_IO_OVERLOAD_PERCENT","TAG_IO_OVERLOAD_OBA_COUNT","TAG_IO_OVERLOAD_OBA_TIME","TAG_IO_OVERLOAD_OBA_PERCENT"]};PageArray[tbId.Current][pgId.Overload]={controls:[OOvrld],refDRate:RefreshRates.ms250,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME","TAG_IO_OVERLOAD_COUNT","TAG_IO_OVERLOAD_TIME","TAG_IO_OVERLOAD_PERCENT","TAG_IO_OVERLOAD_OBA_COUNT","TAG_IO_OVERLOAD_OBA_TIME","TAG_IO_OVERLOAD_OBA_PERCENT",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Overload]={controls:[OOvrld],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME","TAG_IO_OVERLOAD_COUNT","TAG_IO_OVERLOAD_TIME","TAG_IO_OVERLOAD_PERCENT","TAG_IO_OVERLOAD_OBA_COUNT","TAG_IO_OVERLOAD_OBA_TIME","TAG_IO_OVERLOAD_OBA_PERCENT",{g:"overall",data:["TAG_IO_DURATION"]}]};OCmNoise={id:"OCmNoise",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var n=OCmNoise;n.isInit=!0;var t=$("#cmNoiseTbl"),i=$("#cmNoiseLbLDN"),r=$("#cmNoiseLDN"),u=$("#cmNoiseLbLDay"),f=$("#cmNoiseLDay"),e=$("#cmNoiseLbLNight"),o=$("#cmNoiseLNight"),s=$("#cmNoiseLbLDEN"),h=$("#cmNoiseLDEN"),c=$("#cmNoiseLbELDay"),l=$("#cmNoiseELDay"),a=$("#cmNoiseLbELEve"),v=$("#cmNoiseELEve"),y=$("#cmNoiseLbELNight"),p=$("#cmNoiseELNight"),w=$("#cmNoiseRun"),b=$("#cmNoisePause");n.enter=function(){return i.html("LDN"),u.html("LDay ("+SecsToHHMM(MeasurementProperties.TAG_DAY_TIME)+"-"+SecsToHHMM(MeasurementProperties.TAG_NIGHT_TIME)+")"),e.html("LNight ("+SecsToHHMM(MeasurementProperties.TAG_NIGHT_TIME)+"-"+SecsToHHMM(MeasurementProperties.TAG_DAY_TIME)+")"),s.html("LDEN"),c.html("LDay ("+SecsToHHMM(MeasurementProperties.TAG_DAY_TIME)+"-"+SecsToHHMM(MeasurementProperties.TAG_EVENING_TIME)+")"),a.html("LEve ("+SecsToHHMM(MeasurementProperties.TAG_EVENING_TIME)+"-"+SecsToHHMM(MeasurementProperties.TAG_NIGHT_TIME)+")"),y.html("LNight ("+SecsToHHMM(MeasurementProperties.TAG_NIGHT_TIME)+"-"+SecsToHHMM(MeasurementProperties.TAG_DAY_TIME)+")"),liveTab.show(),t.show(),!0};n.update=function(){r.html(formD1("TAG_IO_LDN")+" dB");f.html(formD1("TAG_IO_LDN_DAY")+" dB");o.html(formD1("TAG_IO_LDN_NIGHT")+" dB");h.html(formD1("TAG_IO_LDEN")+" dB");l.html(formD1("TAG_IO_LDEN_DAY")+" dB");v.html(formD1("TAG_IO_LDEN_EVENING")+" dB");p.html(formD1("TAG_IO_LDEN_NIGHT")+" dB");getRunPause(w,b,CurrentStatus.IsDataReset&&curTabIndex!=tbId.Live&&!inFileDsp)};n.leave=function(){t.hide();liveTab.hide()}}};PageArray[tbId.Overall][pgId.Community]={controls:[OCmNoise],refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME","TAG_IO_LDN","TAG_IO_LDN_DAY","TAG_IO_LDN_NIGHT","TAG_IO_LDEN","TAG_IO_LDEN_DAY","TAG_IO_LDEN_EVENING","TAG_IO_LDEN_NIGHT"]};OMisc={id:"OMisc",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var t=OMisc;t.isInit=!0;var n=$("#miscTbl"),l=n.find("#miscLbSplC"),i=n.find("#miscSplC"),a=n.find("#miscLbSplA"),r=n.find("#miscSplA"),v=n.find("#miscLbSplCA"),u=n.find("#miscSplCA"),y=n.find("#miscLbSplI"),f=n.find("#miscSplI"),p=n.find("#miscLbSpl1"),e=n.find("#miscSpl1"),w=n.find("#miscLbSplImns"),o=n.find("#miscSplImns"),s=n.find("#miscRun"),h=n.find("#miscPause"),c=-1,b=-1;t.enter=function(){var t=ShortLWDStr("L<sub>C#eq</sub>",!0);return l.html(t),t=ShortLWDStr("L<sub>A#eq</sub>",!0),a.html(t),t=ShortLWDStr("L<sub>C#eq</sub> - L<sub>A#eq</sub>",!0),v.html(t),t=ShortLWDStr("L<sub>$Ieq</sub>",!1),y.html(t),t=ShortLWDStr("L<sub>$eq</sub>",!1),p.html(t),t=ShortLWDStr("L<sub>$Ieq</sub> - L<sub>$eq</sub>",!1),w.html(t),liveTab.show(),n.show(),!0};t.update=function(){c=pageData.TAG_IO_MEAS_HIST_CUR_RECORD;tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0||CurrentStatus.IsDataReset&&curTabIndex!=tbId.Live&&!inFileDsp?(i.html("--- dB"),r.html("--- dB"),u.html("--- dB"),f.html("--- dB"),e.html("--- dB"),o.html("--- dB"),getRunPause(s,h,!0)):(upMHCntTitle(),b=c,i.html(formD1("TAG_IO_LEQC")+" dB"),r.html(formD1("TAG_IO_LEQA")+" dB"),u.html(formD1("TAG_IO_C_MINUS_A")+" dB"),f.html(formD1("TAG_IO_LEQ_IMPULSE")+" dB"),e.html(formD1("TAG_IO_LEQ_LINEAR")+" dB"),o.html(formD1("TAG_IO_IMPULSIVITY")+" dB"),getRunPause(s,h))};t.leave=function(){n.hide();liveTab.hide();popMHCnt()}}};PageArray[tbId.Overall][pgId.Misc]={controls:[OMisc],refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_DURATION","TAG_IO_LEQC","TAG_IO_LEQA","TAG_IO_C_MINUS_A","TAG_IO_LEQ_IMPULSE","TAG_IO_LEQ_LINEAR","TAG_IO_IMPULSIVITY","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME"]};PageArray[tbId.Current][pgId.Misc]={controls:[OMisc],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_LEQC","TAG_IO_LEQA","TAG_IO_C_MINUS_A","TAG_IO_LEQ_IMPULSE","TAG_IO_LEQ_LINEAR","TAG_IO_IMPULSIVITY","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Misc]={controls:[OMisc,StartTime],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_LEQC","TAG_IO_LEQA","TAG_IO_C_MINUS_A","TAG_IO_LEQ_IMPULSE","TAG_IO_LEQ_LINEAR","TAG_IO_IMPULSIVITY","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME",{g:"overall",data:["TAG_IO_DURATION"]}]};TALarm={id:"TALarm",html:"",refreshRate:RefreshRates.ms250,isInit:!1,init:function(){var t=TALarm,n=$("#talTbl"),l=n.find("#leqLbl"),a=n.find("#lwsLbl"),v=n.find("#lwsMLbl"),y=n.find("#cmaLbl"),r=n.find("#leq"),i=n.find("#lws"),u=n.find("#lwsM"),f=n.find("#cma"),e=n.find("#ltm5"),o=n.find("#ln95"),s=n.find("#tDur"),h=n.find("#tRun"),c=n.find("#tPause");t.enter=function(){l.html(ShortLWDStr("L<sub>$#eq</sub>",!0));a.html(ShortLWDStr("L<sub>$#</sub>"));v.html(ShortLWDStr("L<sub>$#max</sub>"));y.html(ShortLWDStr("L<sub>C#eq</sub> - L<sub>A#eq</sub>",!0));liveTab.show();n.show()};t.update=function(){if(upMHCntTitle(),tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0||CurrentStatus.IsDataReset&&curTabIndex!=tbId.Live&&!inFileDsp)r.html("---"),tbId.Measure==curTabIndex?i.html("---"):i.html(formD1("TAG_IO_ANYLEVEL_SPL",1)),u.html("---"),f.html("---"),e.html("---"),o.html("---"),getRunPause(h,c,!0),s.html("--:--:--.-");else{var n;r.html(formD1("TAG_IO_ANYLEVEL_LEQ",1));i.html(formD1("TAG_IO_ANYLEVEL_SPL",1));u.html(formD1("TAG_IO_ANYLEVEL_LMAX",1));f.html(formD1("TAG_IO_C_MINUS_A",1));e.html(formD1("TAG_IO_TAKT_MAXIMAL_5_SEC",1));o.html(formD1("TAG_IO_LN_95",1));curTabIndex===tbId.Overall?(n=new Date(1970,0,1),n.setMilliseconds((pageData.TAG_IO_DURATION||0)*1e3)):(n=new Date(1970,0,1),n.setMilliseconds((pageData.TAG_IO_MEAS_DURATION||0)*1e3));s.html(n.format(timeFm));n=new Date(1970,0,1);n.setMilliseconds((pageData.TAG_IO_RUN_TIME||0)*1e3);h.html(n.format(timeFm));n=new Date(1970,0,1);n.setMilliseconds((pageData.TAG_IO_PAUSE_TIME||0)*1e3);c.html(n.format(timeFm))}};t.leave=function(){liveTab.hide();n.hide();popMHCnt()}}};PageArray[tbId.Overall][pgId.TALarm]={controls:[TALarm],refDRate:RefreshRates.ms250,condition:function(){return SystemProperties.TAG_LTM5_ENABLE},dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME",{g:"live",data:["TAG_IO_ANYLEVEL_SPL"]},"TAG_IO_ANYLEVEL_LEQ","TAG_IO_ANYLEVEL_LMAX","TAG_IO_C_MINUS_A","TAG_IO_TAKT_MAXIMAL_5_SEC","TAG_IO_LN_95"]};PageArray[tbId.Current][pgId.TALarm]={controls:[TALarm],refDRate:RefreshRates.ms250,condition:function(){return SystemProperties.TAG_LTM5_ENABLE},dataNeeded:["TAG_IO_MEAS_DURATION","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME",{g:"live",data:["TAG_IO_ANYLEVEL_SPL"]},"TAG_IO_ANYLEVEL_LEQ","TAG_IO_ANYLEVEL_LMAX","TAG_IO_C_MINUS_A","TAG_IO_TAKT_MAXIMAL_5_SEC","TAG_IO_LN_95",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.TALarm]={controls:[TALarm],refDRate:RefreshRates.ms250,condition:function(){return SystemProperties.TAG_LTM5_ENABLE},dataNeeded:["TAG_IO_MEAS_DURATION","TAG_IO_RUN_TIME","TAG_IO_PAUSE_TIME","TAG_IO_ANYLEVEL_SPL","TAG_IO_ANYLEVEL_LEQ","TAG_IO_ANYLEVEL_LMAX","TAG_IO_C_MINUS_A","TAG_IO_TAKT_MAXIMAL_5_SEC","TAG_IO_LN_95","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD",{g:"overall",data:["TAG_IO_DURATION"]}]};OSEL={id:"OSEL",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){var r=OSEL;r.isInit=!0;var n=$("#selTbl"),k=n.find("#selSELlbl"),l=n.find("#selLAElbl"),u=n.find("#selLAE"),d=n.find("#selSElbl"),a=n.find("#selEAhlbl"),f=n.find("#selEAh"),v=n.find("#selEA8hlbl"),e=n.find("#selEA8h"),y=n.find("#selEA40hlbl"),o=n.find("#selEA40h"),p=n.find("#selEAslbl"),s=n.find("#selEAs"),w=n.find("#selEA8slbl"),h=n.find("#selEA8s"),b=n.find("#selEA40slbl"),c=n.find("#selEA40s"),t="Pa<sup>2<\/sup>h",i="Pa<sup>2<\/sup>s";r.enter=function(){var i=MeasurementProperties.TAG_FREQ_WEIGHTING,r=MeasurementProperties.TAG_DET_WEIGHTING,u=MeasurementProperties.TAG_INTEGRATION_INPUT,t=MakeLWeightDetectorString(i,r,"","L<sub>$#E</sub>",u);return l.html(t),t=MakeLWeightDetectorString(i,r,"","E<sub>$#</sub>",u),a.html(t),p.html(t),t=MakeLWeightDetectorString(i,r,"","E<sub>$#8</sub>",u),v.html(t),w.html(t),t=MakeLWeightDetectorString(i,r,"","E<sub>$#40</sub>",u),y.html(t),b.html(t),liveTab.show(),n.show(),!0};r.update=function(){var n;upMHCntTitle();tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0?(n=-999.9,u.html("--- dB"),f.html(SixDigitFloat(n)+t),e.html(SixDigitFloat(n)+t),o.html(SixDigitFloat(n)+t),s.html(SixDigitFloat(n)+i),h.html(SixDigitFloat(n)+i),c.html(SixDigitFloat(n)+i)):(u.html(formD1("TAG_IO_LWDE")+" dB"),n=pageData.TAG_IO_E_H||-999.9,f.html(SixDigitFloat(n)+t),n=pageData.TAG_IO_E8_H||-999.9,e.html(SixDigitFloat(n)+t),n=pageData.TAG_IO_E40_H||-999.9,o.html(SixDigitFloat(n)+t),n=pageData.TAG_IO_E_S||-999.9,s.html(SixDigitFloat(n)+i),n=pageData.TAG_IO_E8_S||-999.9,h.html(SixDigitFloat(n)+i),n=pageData.TAG_IO_E40_S||-999.9,c.html(SixDigitFloat(n)+i))};r.leave=function(){n.hide();liveTab.hide();popMHCnt()}}};PageArray[tbId.Overall][pgId.SEL]={controls:[OSEL,RunTime],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_LWDE","TAG_IO_E_H","TAG_IO_E8_H","TAG_IO_E40_H","TAG_IO_E_S","TAG_IO_E8_S","TAG_IO_E40_S"]};PageArray[tbId.Current][pgId.SEL]={controls:[OSEL,RunTime],refDRate:RefreshRates.ms250,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_LWDE","TAG_IO_E_H","TAG_IO_E8_H","TAG_IO_E40_H","TAG_IO_E_S","TAG_IO_E8_S","TAG_IO_E40_S",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.SEL]={controls:[OSEL,StartTime],refDRate:RefreshRates.ms500,condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_RUN_TIME","TAG_IO_LWDE","TAG_IO_E_H","TAG_IO_E8_H","TAG_IO_E40_H","TAG_IO_E_S","TAG_IO_E8_S","TAG_IO_E40_S",{g:"overall",data:["TAG_IO_DURATION"]}]};GpsPage={id:"GpsPage",html:"",refreshRate:RefreshRates.ms1000,isInit:!1,init:function(){var t=GpsPage;t.isInit=!0;var u=$("#gpsTable"),n=u,i=[];i[0]="GPS Not Synchronized";i[1]="GPS Synchronized";var o=n.find("#gpsAcquiredAt"),s=n.find("#gpsLatitude"),h=n.find("#gpsLongitude"),f=n.find("#gpsElevation"),r=n.find("#gpsStatus"),e=n.find("#gpsSats");t.enter=function(){u.show();liveTab.show();e.show();r.show()};t.update=function(){var n,u,t;if(upMHCntTitle(),pageData.TAG_IO_GPS_TIME!=undefined)if(pageData.TAG_IO_GPS_TIME==0||tbId.Measure==curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0)o.html("--:--:--"),s.html("---"),h.html("---"),f.html("---"),e.html(""),tbId.Measure==curTabIndex?r.html("No Data"):r.html("GPS Not Synchronized");else{if(n=pageData.TAG_IO_GPS_TIME+"",n.length<6)for(u=6-n.length,t=0;t<u;t++)n="0"+n;o.html(n.substr(0,2)+":"+n.substr(2,2)+":"+n.substr(4,2));s.html(pageData.TAG_IO_GPS_LAT_DEGREE+"&#176;"+formD(pageData.TAG_IO_GPS_LAT_MINUTE,4)+"'");h.html(pageData.TAG_IO_GPS_LON_DEGREE+"&#176;"+formD(pageData.TAG_IO_GPS_LON_MINUTE,4)+"'");SystemProperties.TAG_UNIT_CONV==1?f.html(pageData.TAG_IO_GPS_ELEVATION.toFixed(0)+" ft"):f.html(pageData.TAG_IO_GPS_ELEVATION.toFixed(0)+" m");i[pageData.TAG_IO_GPS_STATUS]!=undefined&&r.html(i[pageData.TAG_IO_GPS_STATUS]);e.html(pageData.TAG_IO_GPS_SATELLITES+" Satellites")}};t.leave=function(){u.hide();liveTab.hide();popMHCnt()}}};PageArray[tbId.Live][pgId.GPS]={controls:[GpsPage,LiveTime],condition:function(){return SystemProperties.TAG_GPS_MODE===1},dataNeeded:["TAG_IO_GPS_LAT_DEGREE","TAG_IO_GPS_LAT_MINUTE","TAG_IO_GPS_LON_DEGREE","TAG_IO_GPS_LON_MINUTE","TAG_IO_GPS_ELEVATION","TAG_IO_GPS_TIME","TAG_IO_GPS_STATUS","TAG_IO_GPS_SATELLITES",{g:"Overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Overall][pgId.GPS]={controls:[GpsPage,LiveTime],condition:function(){return SystemProperties.TAG_GPS_MODE===1},dataNeeded:["TAG_IO_GPS_LAT_DEGREE","TAG_IO_GPS_LAT_MINUTE","TAG_IO_GPS_LON_DEGREE","TAG_IO_GPS_LON_MINUTE","TAG_IO_GPS_ELEVATION","TAG_IO_GPS_TIME","TAG_IO_GPS_STATUS","TAG_IO_GPS_SATELLITES","TAG_IO_DURATION"]};PageArray[tbId.Current][pgId.GPS]={controls:[GpsPage,LiveTime],condition:function(){return SystemProperties.TAG_GPS_MODE===1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_GPS_LAT_DEGREE","TAG_IO_GPS_LAT_MINUTE","TAG_IO_GPS_LON_DEGREE","TAG_IO_GPS_LON_MINUTE","TAG_IO_GPS_ELEVATION","TAG_IO_GPS_TIME","TAG_IO_GPS_STATUS","TAG_IO_GPS_SATELLITES",{g:"Overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.GPS]={controls:[GpsPage,StartTime],condition:function(){return SystemProperties.TAG_GPS_MODE===1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_GPS_LAT_DEGREE","TAG_IO_GPS_LAT_MINUTE","TAG_IO_GPS_LON_DEGREE","TAG_IO_GPS_LON_MINUTE","TAG_IO_GPS_ELEVATION","TAG_IO_GPS_TIME","TAG_IO_GPS_STATUS","TAG_IO_GPS_SATELLITES",{g:"overall",data:["TAG_IO_DURATION"]}]};WeatPg={id:"WeatPg",html:"",refreshRate:RefreshRates.ms1000,isInit:!1,init:function(){function k(){i=u[0].getContext("2d")}function d(){var t;if(i!=undefined){t=pageData.TAG_IO_WIND_DIR_STATS;(t==undefined||t.length<8)&&(t=[0,0,0,0,0,0,0,0]);var o=8,c=40,l=40,n=0,a=0,v=0,s=0,r=0,f=0,h=0,e=[{x:0,y:-1},{x:.707,y:-.707},{x:1,y:0},{x:.707,y:.707},{x:0,y:1},{x:-.707,y:.707},{x:-1,y:0},{x:-.707,y:-.707},];if(t!=undefined&&o>0){for(i.clearRect(0,0,u[0].width,u[0].height),i.beginPath(),n=0;n<o;n++)r<t[n]&&(r=t[n]),h=36/(r+.001);for(f=h*t[0],s=Math.floor(c+f*e[0].x),r=Math.floor(l+f*e[0].y),i.moveTo(s,r),n=1;n<o;n++)f=h*t[n],a=Math.floor(c+f*e[n].x),v=Math.floor(l+f*e[n].y),i.lineTo(a,v);i.lineTo(s,r);i.strokeStyle="#FF0000";i.lineWidth=2;i.stroke()}}}var f=WeatPg,i;f.isInit=!0;var r=$("#wtherTbl"),n=r,p=n.find("#TAG_IO_WIND_SPEED"),e=n.find("#TAG_IO_TEMPERATURE"),o=n.find("#TAG_IO_HUMIDITY"),s=n.find("#TAG_IO_WIND_DIRECTION"),w=n.find("#TAG_ADC1_DESCRIPTION"),b=n.find("#TAG_ADC2_DESCRIPTION"),h=n.find("#wdWindy"),c=n.find("#wWindy"),g=n.find("#wtComp"),l=n.find("#wtherLv"),a=n.find("#wAvg"),v=n.find("#wGust"),t=n.find(".gauge-c"),u=n.find("#wthCan"),y=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"];f.enter=function(){curTabIndex==0?(l.show(),h.hide(),r.css("font-size","16px"),t.show(),u.hide()):(l.hide(),h.show(),r.css("font-size","12px"),t.hide(),u.show(),k());w.html(MeasurementProperties.TAG_ADC1_DESCRIPTION);b.html(MeasurementProperties.TAG_ADC2_DESCRIPTION);liveTab.show();r.show()};f.update=function(){var i=" "+MeasurementProperties.TAG_WIND_UNITS,r=" "+MeasurementProperties.TAG_ADC1_UNITS,u=" "+MeasurementProperties.TAG_ADC2_UNITS,n,f;SystemProperties.TAG_UNIT_CONV==0&&MeasurementProperties.TAG_WEATHER_ENABLE==2?(i=" m/s",u=" % RH",r=" C"):MeasurementProperties.TAG_WEATHER_ENABLE==2&&(i=" mi/h",u=" % RH",r=" F");curTabIndex==0?(p.html(formD1("TAG_IO_WIND_SPEED",3)+i),e.html(formD1("TAG_IO_TEMPERATURE",3)+" "+r),o.html(formD1("TAG_IO_HUMIDITY",3)+" "+u)):(e.html(formD1("TAG_IO_TEMPERATURE",3)+" "+r+"<br>Low "+formD1("TAG_IO_TEMPERATURE_MIN",3)+"&nbsp;&nbsp;High "+formD1("TAG_IO_TEMPERATURE_MAX",3)),o.html(formD1("TAG_IO_HUMIDITY",3)+" "+u+"<br>Low "+formD1("TAG_IO_HUMIDITY_MIN",3)+"&nbsp;&nbsp;High "+formD1("TAG_IO_HUMIDITY_MAX",3)),pageData.TAG_IO_TEMPERATURE!==-99.9?(c.html(formD(pageData.TAG_IO_WINDY_PERCENT||0)),a.html(formD1("TAG_IO_WIND_SPEED_AVERAGE")+i),v.html(formD1("TAG_IO_WIND_GUST")+i),d()):(c.html("---"),a.html("---"),v.html("---")));n=0;f="DIRECTION";MeasurementProperties.TAG_WIND_DIRECTION==0&&(f="COMPASS");n=curTabIndex==0?pageData["TAG_IO_WIND_"+f]:pageData["TAG_IO_WIND_GUST_"+f];n<0&&(n=0);MeasurementProperties.TAG_WIND_DIRECTION==1?s.html(formD(n||0,2)+"&#176; "+y[Math.floor(n/22.5)]):(s.html(y[n]),n*=22.5);curTabIndex==0&&(n=="N"?t.css("transform","rotate(0turn)"):n=="NE"?t.css("transform","rotate(0.125turn)"):n=="E"?t.css("transform","rotate(0.250turn)"):n=="SE"?t.css("transform","rotate(0.375turn)"):n=="S"?t.css("transform","rotate(0.500turn)"):n=="SW"?t.css("transform","rotate(0.625turn)"):n=="W"?t.css("transform","rotate(0.750turn)"):n=="NW"?t.css("transform","rotate(0.875turn)"):(t.css("transform","rotate("+n+"deg)"),t.css("-webkit-transform:","rotate("+n+"deg)")))};f.leave=function(){liveTab.hide();r.hide();popMHCnt()}}};PageArray[tbId.Live][pgId.Weather]={controls:[WeatPg,LiveTime],condition:function(){return MeasurementProperties.TAG_WEATHER_ENABLE>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0},dataNeeded:["TAG_IO_WIND_SPEED","TAG_IO_TEMPERATURE","TAG_IO_HUMIDITY","TAG_IO_WIND_DIRECTION","TAG_IO_WIND_COMPASS",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Overall][pgId.Weather]={controls:[WeatPg,LiveTime],condition:function(){return MeasurementProperties.TAG_WEATHER_ENABLE>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0},dataNeeded:["TAG_IO_TEMPERATURE","TAG_IO_HUMIDITY","TAG_IO_DURATION","TAG_IO_TEMPERATURE_MAX","TAG_IO_TEMPERATURE_MIN","TAG_IO_HUMIDITY_MAX","TAG_IO_HUMIDITY_MIN","TAG_IO_WIND_GUST","TAG_IO_WIND_GUST_DIRECTION","TAG_IO_WIND_GUST_COMPASS","TAG_IO_WINDY_PERCENT","TAG_IO_WIND_SPEED_AVERAGE","TAG_IO_WIND_DIR_STATS"]};PageArray[tbId.Current][pgId.Weather]={controls:[WeatPg,LiveTime],condition:function(){return MeasurementProperties.TAG_WEATHER_ENABLE>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_TEMPERATURE","TAG_IO_HUMIDITY","TAG_IO_TEMPERATURE_MAX","TAG_IO_TEMPERATURE_MIN","TAG_IO_HUMIDITY_MAX","TAG_IO_HUMIDITY_MIN","TAG_IO_WIND_GUST","TAG_IO_WIND_GUST_DIRECTION","TAG_IO_WIND_GUST_COMPASS","TAG_IO_WINDY_PERCENT","TAG_IO_WIND_SPEED_AVERAGE","TAG_IO_WIND_DIR_STATS",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Weather]={controls:[WeatPg,StartTime],condition:function(){return MeasurementProperties.TAG_WEATHER_ENABLE>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_TEMPERATURE","TAG_IO_HUMIDITY","TAG_IO_TEMPERATURE_MAX","TAG_IO_TEMPERATURE_MIN","TAG_IO_HUMIDITY_MAX","TAG_IO_HUMIDITY_MIN","TAG_IO_WIND_GUST","TAG_IO_WIND_GUST_DIRECTION","TAG_IO_WIND_GUST_COMPASS","TAG_IO_WINDY_PERCENT","TAG_IO_WIND_SPEED_AVERAGE","TAG_IO_WIND_DIR_STATS",{g:"overall",data:["TAG_IO_DURATION"]}]};ViaWeatPage={id:"ViaWeatherPage",html:"",refreshRate:RefreshRates.ms1000,isInit:!1,init:function(){var i=ViaWeatPage;i.isInit=!0;var t=$("#viaWTbl"),n=t,e=n.find("#TAG_IO_RAIN_RATE"),o=n.find("#TAG_IO_HAIL_RATE"),s=n.find(".hail1"),h=n.find("#vwoRain"),c=n.find("#vwoHail"),l=n.find("#vwRUnits"),a=n.find("#vwHUnits"),v=n.find("#vwAccum0"),y=n.find("#vwDur0"),p=n.find("#vwAccum1"),w=n.find("#vwDur1"),r,u,f;i.enter=function(){SystemProperties.TAG_UNIT_CONV==0?(r="mm",u="<sup>mm</sup>/<sub>hr</sub>",f="<sup>hits</sup>/<sub>cmh</sub>"):(r="in",u="<sup>in</sup>/<sub>hr</sub>",f="<sup>hits</sup>/<sub>inh</sub>");s.css("-webkit-animation-duration",Math.random()*(1.5-.8)+.8+"s");s.css("-webkit-animation-delay",Math.random()*(.9-.3)+.3+"s");liveTab.show();t.show();0==curTabIndex?(l.html("Rain Rate"),a.html("Hail Rate"),t.css({"font-size":"16px"}),h.hide(),c.hide()):(l.html("Max Rate"),a.html("Max Rate"),t.css({"font-size":"12px"}),h.show(),c.show())};i.update=function(){0==curTabIndex?(e.html(formD(pageData.TAG_IO_RAIN_RATE||0,2)+" <span style='font-size:13px;'>"+u+"<\/span>"),o.html(formD(pageData.TAG_IO_HAIL_RATE||0,2)+" <span style='font-size:13px;'>"+f+"<\/span>")):(e.html(formD(pageData.TAG_IO_RAIN_RATE_MAX||0,2)+" <span style='font-size:12px;'>"+u+"<\/span>"),o.html(formD(pageData.TAG_IO_HAIL_RATE_MAX||0,2)+" <span style='font-size:12px;'>"+f+"<\/span>"),v.html((pageData.TAG_IO_RAIN_ACCUMULATION||0).toFixed(2)+" "+r),y.html((pageData.TAG_IO_RAIN_DURATION||0).toFixed(2)+" s"),p.html((pageData.TAG_IO_HAIL_ACCUMULATION||0).toFixed(2)+" "+r),w.html((pageData.TAG_IO_HAIL_DURATION||0).toFixed(2)+" s"))};i.leave=function(){liveTab.hide();t.hide();popMHCnt()}}};PageArray[tbId.Live][pgId.VaisalaWeather]={controls:[ViaWeatPage,LiveTime],condition:function(){return MeasurementProperties.TAG_WEATHER_ENABLE>1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0},dataNeeded:["TAG_IO_RAIN_RATE","TAG_IO_HAIL_RATE",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Overall][pgId.VaisalaWeather]={controls:[ViaWeatPage],condition:function(){return MeasurementProperties.TAG_WEATHER_ENABLE>1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0},dataNeeded:["TAG_IO_RAIN_RATE_MAX","TAG_IO_HAIL_RATE_MAX","TAG_IO_DURATION","TAG_IO_RAIN_ACCUMULATION","TAG_IO_RAIN_DURATION","TAG_IO_HAIL_ACCUMULATION","TAG_IO_HAIL_DURATION"]};PageArray[tbId.Current][pgId.VaisalaWeather]={controls:[ViaWeatPage],condition:function(){return MeasurementProperties.TAG_WEATHER_ENABLE>1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},dataNeeded:["TAG_IO_RAIN_RATE_MAX","TAG_IO_HAIL_RATE_MAX",{g:"overall",data:["TAG_IO_DURATION"]},"TAG_IO_RAIN_ACCUMULATION","TAG_IO_RAIN_DURATION","TAG_IO_HAIL_ACCUMULATION","TAG_IO_HAIL_DURATION"]};PageArray[tbId.Measure][pgId.VaisalaWeather]={controls:[ViaWeatPage],condition:function(){return MeasurementProperties.TAG_WEATHER_ENABLE>1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&512)>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_RAIN_RATE_MAX","TAG_IO_HAIL_RATE_MAX","TAG_IO_RAIN_ACCUMULATION","TAG_IO_RAIN_DURATION","TAG_IO_HAIL_ACCUMULATION","TAG_IO_HAIL_DURATION",{g:"overall",data:["TAG_IO_DURATION"]}]};PreAmpPage={id:"PreAmpPage",html:"",refreshRate:RefreshRates.ms250,isInit:!1,init:function(){function kt(){var i=SystemProperties.TAG_UNIT_CONV==0?" &#176;C":" &#176;F",n,t;rt.html(pageData.TAG_IO_ENV_PREAMP_SN||"");n=pageData.TAG_IO_ENV_PREAMP_FW_VERSION;t=n>>24&255;t+=(n>>16&255)/10;t+=(n>>8&255)/100;ut.html(formD(t,2));st.html(formD(pageData.TAG_IO_ENV_PREAMP_TEMPERATURE)+i);ht.html(formD(pageData.TAG_IO_ENV_PREAMP_HUMIDITY)+" %");ct.html(formD(pageData.TAG_IO_ENV_PREAMP_DEW_POINT)+i);lt.html((pageData.TAG_PREAMP_HEATER||0)==0?"Off":"On");pageData.TAG_IO_EA_STATUS||!1?(v.show(),y.hide()):(v.hide(),y.show())}function w(){if(r!=MeasurementProperties.TAG_PREAMPTYPE&&(r=MeasurementProperties.TAG_PREAMPTYPE,f=!0),f){if(PageArray[tbId.Live][pgId.Preamp].Registering=undefined,(r=="426A12"||r=="PRM2103")&&u?(b.show(),k.show(),d.show(),g.show(),nt.show(),o.show(),i.hide(),e||(PageArray[tbId.Live][pgId.Preamp].dataNeeded=wt),e=!0,console.log("About to get Env Preamp tags...")):(b.hide(),k.hide(),d.hide(),g.hide(),nt.hide(),o.hide(),r=="ICP"?(PageArray[tbId.Live][pgId.Preamp].dataNeeded=bt,i.show()):(PageArray[tbId.Live][pgId.Preamp].dataNeeded=p,i.hide()),e=!1),WebSocketComm&&WebSocketComm.Connected&&WebSocketComm.GetID){var t={},n=GroupTabToName(curTabIndex);page.Registering==undefined&&(page.Registering={});page.Registering[n]==undefined&&(page.Registering[n]=GenRegJSON(n,0,page.dataNeeded));t.Registering=page.Registering[n];WebSocketComm.SetDataNeeded(t);WebSocketComm.SetDataRate(page.refDRate)}f=!1}}var t=PreAmpPage;t.isInit=!0;var n=$("#lpreTbl"),it=n.find("#lprType"),b=n.find("#lprSNLine"),k=n.find("#lprTLine"),d=n.find("#lprRHLine"),g=n.find("#lprDPLine"),nt=n.find("#lprHLine"),s=n.find("#lprMPLine"),h=n.find("#lprWDLine"),rt=n.find("#lprSN"),ut=n.find("#lprVer"),ft=n.find("#lprLbLeq"),et=n.find("#lprLeq"),ot=n.find("#lprVDC"),i=n.find("#fltRow"),c=n.find("#lprFlt"),st=n.find("#lprTemp"),ht=n.find("#lprRH"),ct=n.find("#lprDP"),lt=n.find("#lprHeater"),at=n.find("#lprLI"),l=n.find("#lprLIStr"),vt=n.find("#lprLO"),a=n.find("#lprLOStr"),yt=n.find("#lprMP"),pt=n.find("#lprCount"),o=n.find("#lprCalOn"),v=o.find("#EAon"),y=o.find("#EAoff"),u=!1,r="",tt=536870912,f=!1,p=PageArray[tbId.Live][pgId.Preamp].dataNeeded,wt=p.concat(["TAG_IO_ENV_PREAMP_SN","TAG_IO_ENV_PREAMP_TEMPERATURE","TAG_IO_ENV_PREAMP_HUMIDITY","TAG_IO_ENV_PREAMP_DEW_POINT","TAG_IO_ENV_PREAMP_MODEL","TAG_IO_ENV_PREAMP_FW_VERSION"]),bt=p.concat(["TAG_IO_PREAMP_ICP_STATUS"]),e=!1;v.on("click",function(){t.toggleTone()});y.on("click",function(){t.toggleTone()});t.enter=function(){liveTab.show();n.show();w()};t.update=function(){CurrentStatus.uiLxTFlags&tt&&!u?(u=!0,f=!0,getProp("TAG_PREAMPTYPE","string",w)):CurrentStatus.uiLxTFlags&tt||!u||(u=!1,f=!0,getProp("TAG_PREAMPTYPE","string",w));e&&kt();it.html(r);ft.html(ShortLWDStr("L<sub>$#</sub>"));et.html(formD(pageData.TAG_IO_ANYLEVEL_SPL));ot.html(formD(pageData.TAG_IO_PREAMP_VOLTS)+" VDC");r=="ICP"?pageData.TAG_IO_PREAMP_ICP_STATUS==0?(c.html("None"),i.hide()):pageData.TAG_IO_PREAMP_ICP_STATUS==1?(c.html("Open"),i.show()):pageData.TAG_IO_PREAMP_ICP_STATUS==2&&(c.html("Shorted"),i.show()):i.hide();SystemProperties.TAG_INT_ET_WATCHDOG==1?getDataNeeded("live",["TAG_MAINS_OK","TAG_IO_COMM_WATCHDOG_COUNT","TAG_831_INT_STATE"],function(){if(pageData.TAG_831_INT_STATE==1){s.show();h.show();yt.html(pageData.TAG_MAINS_OK);var n=((3e3-pageData.TAG_IO_COMM_WATCHDOG_COUNT)/10-.5).toFixed(0);n<0&&(n=0);pt.html(n)}else s.hide(),h.hide()}):(s.hide(),h.hide());at.html(pageData.TAG_LOGIC_IN_STATE);switch(SystemProperties.TAG_LOGIC_IN||0){case 0:l.html("None");break;case 1:l.html("Run/Stop");break;case 2:l.html("Event")}vt.html(pageData.TAG_LOGIC_OUT_STATE);switch(SystemProperties.TAG_LOGIC_OUT||0){case 0:a.html("Off");break;case 1:a.html("Run State");break;case 2:a.html("Event")}};t.leave=function(){liveTab.hide();n.hide()};t.toggleTone=function(){if(e&&CurrentStatus.IsStopped){var n;n=pageData.TAG_IO_EA_STATUS||!1?CMD_EA_OFF:CMD_EA_ON;$.getJSON("/sdk?func=sendCommand&id="+n)}console.log("toggling tone")}}};PageArray[tbId.Live][pgId.Preamp]={controls:[PreAmpPage,LiveTime],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_ANYLEVEL_SPL",{g:"overall",data:["TAG_IO_DURATION"]},"TAG_LOGIC_IN_STATE","TAG_LOGIC_OUT_STATE","TAG_831_INT_STATE","TAG_OVERLOAD_IN_STATE","TAG_IO_PREAMP_VOLTS","TAG_IO_EA_STATUS"]};metrixPage={id:"metrixPage",html:"",refreshRate:RefreshRates.ms250,isInit:!1,busy:!1,init:function(){function r(n){n.find(t[1]).checkFlags(0);n.find(t[2]).checkFlags(0);n.find(t[3]).checkFlags(0)}var i=metrixPage,n=$("#mmTbl"),s=n.find("#mmL"),f=n.find("#mm1"),e=n.find("#mm2"),o=n.find("#mm3"),h=n.find("#mmMnS"),c=n.find("#mmMnF"),l=n.find("#mmMnI"),u=n.find("#mmPk"),y=n.find("#mmDr"),p=n.find("#mmDrs"),w=n.find("#mmDl"),v=n.find("#mmDc"),t=["td:eq(0)","td:eq(1)","td:eq(2)","td:eq(3)"],k=[[s,f,e,o,u],[s,f,e,o,h,c,l,u]],a=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],b=[["TAG_ACZ_LEQ","TAG_ACZ_SPL_S","TAG_ACZ_SPL_F","TAG_ACZ_SPL_I","TAG_ACZ_PEAK"],["TAG_ACZ_LEQ","TAG_ACZ_MAX_S","TAG_ACZ_MAX_F","TAG_ACZ_MAX_I","TAG_ACZ_MIN_S","TAG_ACZ_MIN_F","TAG_ACZ_MIN_I","TAG_ACZ_PEAK"]];i.isInit=!0;mmCon.x=0;mmCon.y=0;i.enter=function(){n.show();s.show();u.show();liveTab.show();i.sel=curTabIndex==tbId.Live?0:1;r(s);r(f);r(e);r(o);r(u);i.sel==0?(h.hide(),c.hide(),l.hide(),y.hide(),p.hide(),f.find(t[0]).html("L<sub>S<\/sub>"),e.find(t[0]).html("L<sub>F<\/sub>"),o.find(t[0]).html("L<sub>I<\/sub>"),u.find(t[0]).html("L<sub>Peak<\/sub>")):(h.show(),c.show(),l.show(),y.show(),p.show(),r(h),r(c),r(l),f.find(t[0]).html("L<sub>S(max)<\/sub>"),e.find(t[0]).html("L<sub>F(max)<\/sub>"),o.find(t[0]).html("L<sub>I(max)<\/sub>"),u.find(t[0]).html("L<sub>Peak(max)<\/sub>"))};i.update=function(){var f,n,o,r,e,u;for(upMHCntTitle(),f=k[i.sel],n=0,o=f.length;n<o;++n)if(pageData[b[i.sel][n]]!=undefined)for(r=0;r<3;++r)e=f[n].find(t[r+1]),u=pageData[b[i.sel][n]][r],e.checkFlags(u.flags),e.html(formD(u.val)),a[n][r]!=u.dt&&(a[n][r]=u.dt,curTabIndex!=tbId.Live&&i.updateDetail(mmCon.x,mmCon.y))};i.updateDetail=function(n,t){var i,r,u;a[t][n]!=0?(r=-1,t>6?i="<sub>Peak(max)<\/sub>":t>3?(r=6-t,i="<sub>(min)<\/sub>"):t>0&&(r=3-t,i="<sub>(max)<\/sub>"),i+=" occurred at:",w.html(MakeLWeightDetectorString(n,r,"","L<sub>$#</sub>")+i),u=new Date(1970,0,1),u.setMilliseconds(a[t][n]*1e3),SystemProperties.TAG_DISPLAY_DATE==1?v.html(u.format("d-m-Y H:i:s")):v.html(u.format("Y-m-d H:i:s"))):(w.html(""),v.html(""))};i.leave=function(){n.hide();liveTab.hide();popMHCnt()}}};PageArray[tbId.Live][pgId.MM]={controls:[metrixPage],refDRate:RefreshRates.ms250,dataNeeded:["TAG_ACZ_LEQ","TAG_ACZ_SPL_S","TAG_ACZ_SPL_F","TAG_ACZ_SPL_I","TAG_ACZ_PEAK",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Overall][pgId.MM]={controls:[metrixPage],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_DURATION","TAG_ACZ_LEQ","TAG_ACZ_MAX_S","TAG_ACZ_MAX_F","TAG_ACZ_MAX_I","TAG_ACZ_MIN_S","TAG_ACZ_MIN_F","TAG_ACZ_MIN_I","TAG_ACZ_PEAK"]};PageArray[tbId.Current][pgId.MM]={controls:[metrixPage],refDRate:RefreshRates.ms250,dataNeeded:["TAG_ACZ_LEQ","TAG_ACZ_MAX_S","TAG_ACZ_MAX_F","TAG_ACZ_MAX_I","TAG_ACZ_MIN_S","TAG_ACZ_MIN_F","TAG_ACZ_MIN_I","TAG_ACZ_PEAK",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.MM]={controls:[metrixPage],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_ACZ_LEQ","TAG_ACZ_MAX_S","TAG_ACZ_MAX_F","TAG_ACZ_MAX_I","TAG_ACZ_MIN_S","TAG_ACZ_MIN_F","TAG_ACZ_MIN_I","TAG_ACZ_PEAK",{g:"overall",data:["TAG_IO_DURATION"]}]};var DtCtl={id:"DtCtl",html:"",refreshRate:RefreshRates.ms250,isInit:!1,busy:!1,init:function(){var t=DtCtl;t.isInit=!0;var n=$("#dtTbl"),i=n.find("#dtTimeInd"),r=n.find("#dtDate"),f=n.find("#dtTime"),u=0;t.enter=function(){curTabIndex===tbId.Overall&&i.show();n.show()};t.update=function(){if(CurrentStatus!=undefined&&CurrentStatus.tv_sec>0){var n=new Date(CurrentStatus.tv_sec*1e3);n.setMinutes(n.getMinutes()+n.getTimezoneOffset());SystemProperties.TAG_DISPLAY_DATE==1?r.html(n.format("d-m-Y")):r.html(n.format("Y-m-d"));f.html(returnTime(n))}u=timeInd(i,u)};t.leave=function(){n.hide();i.hide()}}},MuCtl={id:"MuCtl",html:"",refreshRate:RefreshRates.ms250,isInit:!1,busy:!1,init:function(){var n=MuCtl;n.isInit=!0;var t=$("#memUTbl"),i=$("#TAG_IO_TOTAL_FLASH"),r=$("#TAG_IO_FREE_FLASH"),u=$("#pmMemUsage"),f=$("#pmDataFiles");n.enter=function(){t.show()};n.update=function(){var e=pageData.TAG_IO_TOTAL_FLASH||0,n,o,t;i.html(getFSz(e*1024));n=pageData.TAG_IO_FREE_FLASH||0;r.html(getFSz(n*1024));o=n*100/(e+1e-6);u.html(o.toFixed(0)+"% Free");t=pageData.TAG_IO_NUM_FILES||0;f.html(t+(t==1?" Data File":" Data Files"))};n.leave=function(){t.hide()}}},chargeStrings={1:"Charger Off",2:"Precharge",4:"Charging",8:"",16:"Maintain Charge",32:"Hot Batteries",64:"Charging Stopped",128:"Charging Stopped"},battTypeStrings=["Alkaline","NiMH","Lithium"],PowerMemoryPage={id:"PowerMemoryPage",html:"",refreshRate:RefreshRates.ms250,isInit:!1,busy:!1,init:function(){var u=PowerMemoryPage;u.isInit=!0;var n=$("#pmTable"),e=n.find("#pmRunTimer"),t=n.find("#TAG_IO_POWER_STATUS"),o=n.find("#TAG_IO_BATTERY_VOLTS"),i=n.find("#TAG_IO_BATTERY_TIME"),s=n.find("#pmBatteryType"),r=n.find("#TAG_IO_BATTERY_PERCENT"),f=n.find("#TAG_IO_EXTERNAL_VOLTS");u.enter=function(){n.show();liveTab.show()};u.update=function(){var c,h,u;if(o.html(formD(pageData.TAG_IO_BATTERY_VOLTS||0)+" V"),f.html(formD(pageData.TAG_IO_EXTERNAL_VOLTS||0)+" V").show(),s.html(battTypeStrings[SystemProperties.TAG_POWER_BATT]),pageData.TAG_IO_POWER_STATUS!=undefined)switch(pageData.TAG_IO_POWER_STATUS){case-4:t.html("Ext Powered");r.html("");i.html(chargeStrings[pageData.TAG_IO_CHARGE_STATE]);break;case-5:t.html("Ext Powered Low");r.html("");i.html(chargeStrings[pageData.TAG_IO_CHARGE_STATE]);break;case-3:t.html("USB Powered");r.html("");i.html(chargeStrings[pageData.TAG_IO_CHARGE_STATE]);break;case-2:case-1:r.html(formD(pageData.TAG_IO_BATTERY_PERCENT||0)+"%");i.html(formD(pageData.TAG_IO_BATTERY_TIME||0)+"h");t.html("Battery Low");f.hide();break;default:r.html(formD(pageData.TAG_IO_BATTERY_PERCENT||0)+"%");i.html(formD(pageData.TAG_IO_BATTERY_TIME||0)+"h");t.html("Batt Powered");f.hide()}c=Math.round((pageData.TAG_IO_RUN_TIMER||0)*1e5)/100;h=new Date(1970,0,1);h.setMilliseconds(c);e.html(h.format(timeFm));u=pageData.TAG_IO_SYS_TEMP||0;u=SystemProperties.TAG_UNIT_CONV==0?u.toFixed(0)+" C":u.toFixed(0)+" F";n.find("#TAG_IO_SYS_TEMP").html(u)};u.leave=function(){n.hide();liveTab.hide()}}};PageArray[tbId.Live][pgId.Power]={controls:[DtCtl,PowerMemoryPage,MuCtl,StartTime],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_BATTERY_VOLTS","TAG_IO_INPUT_VOLTS","TAG_IO_BATTERY_TIME","TAG_IO_BATTERY_PERCENT","TAG_IO_EXTERNAL_VOLTS","TAG_IO_TOTAL_FLASH","TAG_IO_FREE_FLASH","TAG_IO_POWER_STATUS","TAG_IO_CHARGE_STATE","TAG_IO_NUM_FILES","TAG_IO_START_TIME","TAG_IO_SYS_TEMP",{g:"current",data:["TAG_IO_RUN_TIMER"]},{g:"overall",data:["TAG_IO_DURATION"]}]};MemoryPage={id:"MemoryPage",html:"",refreshRate:RefreshRates.ms250,isInit:!1,busy:!1,init:function(){var n=MemoryPage;n.isInit=!0;var t=$("#memTbl"),i=$("#memSess"),r=$("#memMeas"),u=$("#memEvnt"),f=$("#memTH"),e=$("#memSR");n.enter=function(){t.show();liveTab.show()};n.update=function(){CurrentStatus.IsDataReset&&curTabIndex!=tbId.Live&&!inFileDsp?(i.html("---"),r.html("---"),u.html("---"),f.html("---"),e.html("---")):(i.html(pageData.TAG_SLOG_NUM_RECORDS||0),r.html(pageData.TAG_IO_NUM_HISTORY_RECORDS||0),u.html(pageData.TAG_IO_NUM_EVENT_RECORDS||0),f.html(pageData.TAG_IO_TIME_HIST_NUM_RECORDS||0),e.html(pageData.TAG_IO_NUM_SOUND_RECORDINGS||0))};n.leave=function(){t.hide();liveTab.hide()}}};PageArray[tbId.Overall][pgId.Memory]={controls:[DtCtl,MemoryPage,MuCtl,StartTime],refDRate:RefreshRates.ms250,dataNeeded:["TAG_IO_DURATION","TAG_IO_TOTAL_FLASH","TAG_IO_FREE_FLASH","TAG_IO_NUM_FILES","TAG_IO_RUN_TIME","TAG_IO_START_TIME","TAG_SLOG_NUM_RECORDS","TAG_IO_NUM_SOUND_RECORDINGS",{g:"measurement",data:["TAG_IO_NUM_HISTORY_RECORDS"]},{g:"time",data:["TAG_IO_TIME_HIST_NUM_RECORDS"]},{g:"events",data:["TAG_IO_NUM_EVENT_RECORDS"]},{g:"live",data:["TAG_IO_EVENT_HIST_CUR_RECORD"]}]};var chrgState=-1,pr=0,lvlInd=undefined,chrgInd=undefined,plgInd=undefined,batt=undefined,bUnk=undefined;var SLM_OVER_ALL=16,SLM_OVER_BLINK=32,SLM_OBA_OVER_ALL=128,SLM_OBA_OVER_BLINK=256,SLM_OBA_UNDER_NOW=33554432,SLM_UNDER_NOW=67108864,SLM_SLEEP=16384,NID_NONE=0,NID_PREAMP_CONNECTED=1,NID_PREAMP_DISCONNECTED=2,NID_IMPROPER_SHUTDOWN_SAVE_FILE=3,NID_FILE_OPERATION_COMPLETE=4,NID_CHECK_FS_SUCCESS=5,NID_CHECK_FS_ERROR=6,NID_FORMAT_SUCCESS=7,NID_FORMAT_ERROR=8,NID_FORMAT_RESTORE_SUCCESS=9,NID_FORMAT_RESTORE_ERROR=10,NID_FILE_OPERATION_FAILURES=11,NID_BATTERY_LOW_WARNING_1=12,NID_BATTERY_LOW_WARNING_2=13,NID_BATTERY_LOW_WARNING_3=14,NID_BATTERY_LOW_WARNING_4=15,NID_BATTERY_LOW_SHUTDOWN=16,NID_EXT_POWER_LOW_WARNING_1=17,NID_EXT_POWER_LOW_SHUTDOWN=18,NID_USB_ACTIVE_FILE_PRESENT=19,NID_USB_ACTIVE_FILE_NOT_VALID=20,NID_USB_HOST_OL_LP=21,NID_USB_HOST_OL_HP=22,NID_PROMPT_STORE=23,NID_PLAYBACK_STOPPED=24,IND_SETTINGS_CHANGE_BITS=100663296;var lastSettingsStatus=undefined,isRunning=!1,pauseCnt=0,lastState=0,usbInd=$("#usbInd"),fileInd=$("#fileInd"),obaInd=$("#obaInd"),obaImg=$("#obaImg"),obaTog=!1,slmInd=$("#slmInd"),slmImg=$("#slmImg"),slmTog=!1,fileCount=0,hasUSB=!1,lastNoti=0,colCnt=0,periodCount=1,lastFileWifiInd=-1,backEraseAct=!1,waitingStore=!1,audioStreaming=!1,printerPresent=undefined,recoveryImg=!1,visibleConf=0,sysUtilsCmdCounter=0,closingFileCounter=0,upgrading=!1;var notifForceCount=0,stoppingPlayback=!1,lastNotifSeqNum=undefined;pausNot=!1;micCorrStr=["Off","RI:FF","FF:RI","FF:RI 2106/8","FF:FF 2106/8","FF:90 2106/8","FF:RI 2116","FF:FF 2116","FF:90 2116"];var slContent=$("#slContent"),clusterize={},Sess={id:"Sess",html:"",refreshRate:RefreshRates.ms500,isInit:!1,started:!1,init:function(){function dt(t,i,r){r.SessionLogEntries!==undefined&&(gt(t,r.SessionLogEntries,i),clusterize.update(a),f<0&&s.length>0&&(f=s.slice(-1).pop().ItemId),tt=!1,n.fo(slContent.find("[data-id='"+f+"']"),f),n.started=!0)}function b(n,t,i,r){if(lockedGetData==0){++lockedGetData;try{var u=st;inFileDsp&&(u=ht);$.getJSON("/sdk?func=sessionLog&id=2&amount="+t+"&index="+n+"&group="+u).done(function(t){r?r(n,i,t):dt(n,i,t);lockedGetData=0}).fail(function(){lockedGetData=0}).error(function(){lockedGetData=0})}catch(f){alert(f);lockedGetData=0}return!0}return!1}function gt(n,t,i){var c=n+t.length,e=a.length,u="",r;try{for(r=t.length-1;r>=0;--r){var o=t[r].Action.toString(),l=t[r].Cause.toString(),f="<div class='header' data-id='"+t[r].ItemId+"' tabindex='"+t[r].Number+"'><img src='/images/firmware/"+k[o].i+".png' class='hdrImages'>"+SecsToFullDate(t[r].DateTime)+"<\/div>";i?u+='"'+f+'",':a[e++]=f;s[t[r].ItemId]=t[r]}i&&(u=u.substr(0,u.length-1),eval("Sess.sRows().unshift("+u+")"))}catch(h){console.error(h)}return a}var n=Sess,rt,st,ht;n.isInit=!0;var w=$("#SessionLog"),r=$("#sRecPlayer"),at=r.find("#srClose"),vt=r.find("#srStop"),o=r.find("#srPlay"),l=r.find("#srPause"),u=r.find("#srProg"),d=r.find("#srWait"),yt=r.find("#srPlayer"),g=r.find("#srContent"),a=[],s=[];n.dtRows=function(){return s};n.sRows=function(){return a};var e=0,et=0,h=1e3,p=0,f=-1,v=0,ot=w.find("#sLog"),nt=!1,tt=!1,c=$("#sumDiv"),pt=c.find("#sdAct"),wt=c.find("#sdInd"),bt=c.find("#sdCau"),kt=c.find("#sdType"),it=c.find("#sdNum"),i;n.selIndex=0;n.fo=function(t){var a=$(t),o,h,l;if(a.addClass("hactive").siblings().removeClass("hactive"),o=a.data("id"),o>=0&&s[o]!==undefined){i=s[o];var v=i.Action.toString(),r=i.Action,u=i.Cause.toString();r===32?u=""+(parseInt(u,10)+1):(r===140||r===141||r===129)&&(u=""+(parseInt(u,10)+2));h=ct[u];k[v].n=="Mark"&&(h=MeasurementProperties["TAG_MARKER_NAMES_"+lt[u]]);pt.html(k[v].n);wt.html(i.Number+"/"+e);bt.html(h);l="";l=r<=8?"Measurement":r===64?"Level (dB)":r===132?"Change (dB)":r===130?"Seconds":r===140||r===141||r===129?"Seconds":"Record";kt.html(l);r===130?it.html(i.Measurement-65536):(r===140||r===141||r===129)&&i.Measurement>3600?it.html("> 3600"):it.html(i.Measurement);nt&&c.show();n.selIndex=f=o}};clusterize=new Clusterize({rows:['<div class="clusterize-no-data"><\/div>'],scrollId:"sLog",contentId:"slContent",callbacks:{keep_parity:!0,verify_change:!0,clusterWillChange:function(){},clusterChanged:function(){tt=!0;var t=s.length;t>0&&f>=0&&(n.fo(slContent.find("[data-id='"+f+"']"),-1),console.log("clusterNum: "+clusterize.getClusterNum(t)),tt=!1)}},rows_in_block:12});slContent.on("click","div",function(t){n.fo(this,t)});slContent.on("focus","div",function(t){n.fo(this,t)});n.scroll=function(n){n?ot.scrollTop(0):ot.scrollTop(a.length*21)};rt=0;n.enter=function(){return nt=!0,pageArrows.hide(),w.show(),b(0,1,!1,function(t,i,r){if(r.SessionLogEntries!==undefined){var u=r.SessionLogEntries[0].DateTime;rt!==u&&(n.reset(),rt=u)}}),n.fo(slContent.find("[data-id='"+f+"']"),f),!0};n.update=function(){var r=pageData.TAG_SLOG_NUM_RECORDS,f=pageData.TAG_IO_START_TIME,u=pageData.TAG_IO_DURATION,t,i;if((r===0||r<e)&&n.started)n.reset();else if(et>u)n.reset();else{if(!n.started&&r>0&&e!==r)return t=r,i=0,r>h&&(t=h,i=r-h),v=i,p+=t,b(i,t)&&(e=i+t),!0;if(r>0&&e!==r&&n.started)return t=r-e,t>h&&(t=h),i=e,v=i,p+=t,b(i,t,!0)&&(e=i+t),!0;p<r&&v>0&&(v>h?(i=v-h,t=h):(i=0,t=v),b(i,t)&&(v=i,p+=t))}et=u};n.leave=function(){nt=!1;pageArrows.show();c.hide();w.hide()};n.reset=function(){e=-1;p=0;n.started=!1;c.hide();f=-1;clusterize.clear();a=[];s=[];i=undefined};StopWatch=function(){this.StartMilliseconds=0;this.ElapsedMilliseconds=0};StopWatch.prototype.Start=function(){this.StartMilliseconds=(new Date).getTime()};StopWatch.prototype.Stop=function(){return this.ElapsedMilliseconds=(new Date).getTime()-this.StartMilliseconds};var ut=new StopWatch,y=undefined,ft=undefined,t=undefined;n.activateEntry=function(){if(i!==undefined&&(i.Action==16||i.Action==32)){var f="/",e=new Date,s=e.getMilliseconds()+""+e.getSeconds()+""+e.getMinutes()+""+e.getHours();f+=inFileDsp?(DFMan.fileInfo.loc=="0"?"internal":"usb")+"/"+DFMan.fileInfo.name+"/"+s+"-"+i.Measurement:s+"-"+i.Measurement;f+=MeasurementProperties.TAG_AUDIO_COMPRESSION?".ogg":".wav";y!=undefined?(bgOvly.hide(),r.hide(),kbCon.pop(),y==="aplay"?(clearTimeout(ft),ft=undefined,$.getJSON(f+"?op=stop")):(u[0].value=0,d.show(),o.hide(),l.hide(),t.pause(),t.src="",t.onended=undefined,t.oncanplay=undefined,t.ondurationchange=undefined,t.onplay=undefined,t.onpause=undefined,t.ontimeupdate=undefined,t=undefined,g.html("")),y=undefined):$.getJSON(f+"?op=ready").done(function(e){if(e.FileState=="Ready")if(IsRemote)try{bgOvly.show();r.show();kbCon.push(srCon,r);g.html("Playing Sound Rec. "+i.Measurement+"<br />");t=new Audio(f);t.onended=n.activateEntry;t.oncanplay=function(){t.ready==undefined?(t.ready=!0,d.hide(),o.show(),t.play()):t.paused?(l.hide(),o.show()):(l.show(),o.hide())};t.ondurationchange=function(){u[0].max=t.duration};t.onplay=function(){o.hide();l.show()};t.onpause=function(){o.show();l.hide()};t.ontimeupdate=function(){u[0].value=t.currentTime.toString()};l.off("click").on("click",function(){t.pause()});o.off("click").on("click",function(){t.play()});u.off("change").on("change",function(){t.currentTime=parseFloat(u[0].value)});y="audioTag"}catch(s){}else g.html("Playing Sound Rec. "+i.Measurement+"<br />"),yt.show(),o.hide(),l.hide(),d.hide(),u.show(),$.getJSON(f+"?op=start").done(function(t){if(t.DeviceState!==undefined&&t.DeviceState=="Not Found")confDialog.callConfirm("","No compatible playback device was found.",function(){},{Can:{on:"off"}});else if(t.DeviceState=="Found"&&t.FileState=="Started playback"){ut.Start();bgOvly.show();r.show();kbCon.push(srCon,r);u[0].value=0;u[0].max=t.Time;y="aplay";function i(){var t=ut.Stop()*.001;if(ut.Start(),u[0].value=parseFloat(u[0].value)+t,y=="aplay"){if(parseFloat(u[0].value)<u[0].max-.1)return setTimeout(i,100);n.activateEntry()}}ft=i()}else confDialog.callConfirm("Warning","An error has occurred while attempting to play the sound record.",function(){},{Can:{on:"off"}})}).fail(function(n){console.log("Failed "+n)});else confDialog.callConfirm("","The requested sound record is not yet playable.",function(){},{Can:{on:"off"}})})}};vt.on("click",n.activateEntry);at.on("click",n.activateEntry);w.on("click",".header",n.activateEntry);n.closeSoundPlayback=function(){y!=undefined&&(IsLocal||!inFileDsp)&&(n.activateEntry(),confDialog.timeout=5e3,confDialog.callConfirm("","Playback has stopped due to a file operation.",function(){},{Can:{on:"off"}}))};st=230;ht=231;var k={},ct=[],lt=[];n.initAct();k=n.Actions;ct=n.Causes;lt=n.Markers}};Sess.initAct=function(){var n={},t,r,i;for(n["0"]={n:"Error",i:"warning"},n["1"]={n:"Stop",i:"bmp_stop"},n["2"]={n:"Run",i:"bmp_run1"},n["4"]={n:"Pause",i:"bmp_pause"},n["8"]={n:"Resume",i:"bmp_runnext"},n["16"]={n:"Voice",i:"audio"},n["32"]={n:"Sound",i:"audio"},n["64"]={n:"Cal. Check",i:"bmp_cal"},n["128"]={n:"Clear",i:"bmp_stopreset"},n["129"]={n:"GPS Time Sync",i:"gps"},n["130"]={n:"Back Erase",i:"back_erase"},n["131"]={n:"Mark",i:"x_mark"},n["132"]={n:"Cal. Change",i:"bmp_cal"},n["133"]={n:"Preamp Disconnected",i:"warning"},n["134"]={n:"Preamp Connected",i:"warning"},n["135"]={n:"File Avg",i:"bmp_CreateAvg"},n["136"]={n:"Comms Watchdog",i:"warning"},n["137"]={n:"USB",i:"bmp_usb"},n["138"]={n:"Panic",i:"warning"},n["139"]={n:"Charging Stopped",i:"warning"},n["140"]={n:"NTP Time Sync",i:"ntpSync"},n["141"]={n:"Time Adjustment",i:"clock"},Sess.Actions=n,t=[],t["256"]="Keypress",t["257"]="Event",t["258"]="Positive Adjustment",t["512"]="IO Command",t["513"]="Measurement",t["514"]="Negative Adjustment",t["1024"]="Timer",t["1025"]="Markers",t["2048"]="Power",t["4096"]="Out of memory",t["8192"]="Preamp Connected",t["16384"]="Preamp Disconnected",t["32768"]="Stable",t["33024"]="Comms Watchdog",t["33280"]="Comms Watchdog",t["33536"]="Other",t["33792"]="Internal Fault",t["34048"]="Other",t["34304"]="Hot Batteries",t["34560"]="Over Voltage",t["34816"]="Batt Age or Type",Sess.Causes=t,r=[],i=0;i<NUM_MARKERS;++i)r[""+(i+1)*256]=i;Sess.Markers=r};PageArray[tbId.SessLog][0]={controls:[Sess],refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_DURATION","TAG_SLOG_NUM_RECORDS"]};var LAeqVal=67.2,LApeakVal=61.2,LLargeDigitVal=65.4,lastFullOctavePosition=0,lastThirdOctavePosition=0;var lockedGetData=0,LiveData=[],OneOctaveData=[],ThirdOctaveData=[],ovlFOMax=[],ovlFOMin=[],ovlTOMax=[],ovlTOMin=[],floatPrecision=1;var TAG_IO_PROFILE_SERIES=1330794567,TAG_IO_OBA_SERIES_LIVE_1_1=827081295,TAG_IO_OBA_SERIES_LIVE_1_3=860635727,TAG_IO_OBA_SERIES_1_3=860635727,outsidePromise={};updateInterval=1e3;var totalPoints=120,curRefFo=1,curRefTo=1;for(defOffset=[],o=0;o<120;++o)defOffset[o]=0;wgtOffset=[];wgtOffset[0]=[77.78,56.69,39.44,26.19,16.1,8.63,3.23,0,-1.2,-.97,1.11,6.6];wgtOffset[1]=[-77.78,-56.69,-39.44,-26.19,-16.1,-8.63,-3.23,0,1.2,.97,-1.11,-6.6];wgtOffset[2]=[17.7,8.53,3.01,.82,.17,0,-.03,0,.17,.82,3.01,8.53];wgtOffset[3]=[-17.7,-8.53,-3.01,-.82,-.17,0,.03,0,-.17,-.82,-3.01,-8.53];wgtOffset[4]=[85.35,77.78,70.43,63.37,56.69,50.45,44.7,39.44,34.63,30.23,26.19,22.5,19.14,16.1,13.35,10.87,8.63,6.61,4.81,3.23,1.9,.82,0,-.59,-.98,-1.2,-1.27,-1.2,-.97,-.55,.12,1.11,2.49,4.32,6.6,9.32];wgtOffset[5]=[-85.35,-77.78,-70.43,-63.37,-56.69,-50.45,-44.7,-39.44,-34.63,-30.23,-26.19,-22.5,-19.14,-16.1,-13.35,-10.87,-8.63,-6.61,-4.81,-3.23,-1.9,-.82,0,.59,.98,1.2,1.27,1.2,.97,.55,-.12,-1.11,-2.49,-4.32,-6.6,-9.32];wgtOffset[6]=[21.27,17.7,14.33,11.25,8.53,6.24,4.41,3.01,2,1.29,.82,.5,.3,.17,.09,.03,0,-.02,-.03,-.03,-.03,-.02,0,.03,.09,.17,.3,.5,.82,1.29,2,3.01,4.41,6.24,8.53,11.25];wgtOffset[7]=[-21.27,-17.7,-14.33,-11.25,-8.53,-6.24,-4.41,-3.01,-2,-1.29,-.82,-.5,-.3,-.17,-.09,-.03,0,.02,.03,.03,.03,.02,0,-.03,-.09,-.17,-.3,-.5,-.82,-1.29,-2,-3.01,-4.41,-6.24,-8.53,-11.25];var mLiveThirdOctave={},mThirdOctaveData=[],OBAChartSetup13=function(){mLiveThirdOctave=$.plot(ThirdOctave.graph,[{data:liveGraph.getRandom(37,mThirdOctaveData),color:mainClr}],{bars:{show:!0,barWidth:.75,fill:0,fillColor:mainClr},series:{color:mainClr,lineWidth:0,shadowSize:0},yaxis:{tickColor:tickClr,min:SystemProperties.TAG_OBA_GRAPH_BOTTOM,tickSize:20,ticks:tickForm,max:SystemProperties.TAG_OBA_GRAPH_HEIGHT+SystemProperties.TAG_OBA_GRAPH_BOTTOM},xaxis:{show:!1},crosshair:{color:chClr,mode:"x",lineWidth:3},grid:{hoverable:!0,autoHighlight:!1,backgroundColor:{colors:bkGrad}}},GraphTypes.DATADISPLAY);var n=mLiveThirdOctave.crosshair;ThirdOctave.pdIndex===-1&&(ThirdOctave.pdIndex=22);pageDataIndex=ThirdOctave.pdIndex;n.x=ThirdOctave.pdIndex+.4;console.log(n.x);mLiveThirdOctave.setCrosshair(n)},ThirdOctave={id:"ThirdOctave",html:"",refreshRate:RefreshRates.ms250,isInit:!1,init:function(){var t=ThirdOctave;t.isInit=!0;var n=$("#ThirdOctave"),l=n.find("#toTopLb"),o=n.find("#toTop"),s=n.find("#toMidLb"),i=n.find("#toMid"),a=n.find("#toBotLb"),r=n.find("#toBot"),u=n.find("#toIndex"),f=n.find("#toSIL3"),e=n.find("#toSIL4"),h=n.find("#tLegTop"),c=n.find("#tLegMid"),v=n.find("#tLegBot");t.graph=n.find("#liveThirdOctave");t.pdIndex=-1;t.enter=function(){curPageIndex===pgId.Octave13&&curTabIndex===tbId.Live?c.addClass("spLeg octv1"):curPageIndex===pgId.Octave3N&&curTabIndex===tbId.Live?h.addClass("spLeg octv1"):(h.addClass("spLeg octv1"),c.addClass("spLeg octv2"),v.addClass("spLeg octv3"));t.group=getGroup();SystemProperties.TAG_DISPLAY_DECIMAL==1?(thirdFreqs[0]="6,3",thirdFreqs[3]="12,5",thirdFreqs[7]="31,5",thirdFreqs[23]="1,25k",thirdFreqs[24]="1,6k",thirdFreqs[26]="2,5k",thirdFreqs[27]="3,15k",thirdFreqs[30]="6,3k",thirdFreqs[33]="12,5k"):(thirdFreqs[0]="6.3",thirdFreqs[3]="12.5",thirdFreqs[7]="31.5",thirdFreqs[23]="1.25k",thirdFreqs[24]="1.6k",thirdFreqs[26]="2.5k",thirdFreqs[27]="3.15k",thirdFreqs[30]="6.3k",thirdFreqs[33]="12.5k");(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&131072)>0?(f.show(),e.show()):(f.hide(),e.hide());adjustOffset=SystemProperties.TAG_OBA_GRAPH_BOTTOM;var r=MeasurementProperties.TAG_OBA_WEIGHTING,u=MeasurementProperties.TAG_FREQ_WEIGHTING,i=MeasurementProperties.TAG_DET_WEIGHTING;return curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex===tbId.Measure?(l.html(MakeLWeightDetectorString(r,i,"","L<sub>$#eq</sub>",MeasurementProperties.TAG_INTEGRATION_INPUT)),s.html(MakeLWeightDetectorString(r,i,"","L<sub>$#max</sub>")),a.html(MakeLWeightDetectorString(r,i,"","L<sub>$#min</sub>"))):(l.html(MakeLWeightDetectorString(r,i,"","$-@")),a.html(MakeLWeightDetectorString(u,i,"","L<sub>$#</sub>")),o.html("")),liveTab.show(),n.show(),OBAChartSetup13(),!0};t.update=function(){upMHCntTitle();t.updateTOGraph()};t.leave=function(){h.removeClass();c.removeClass();v.removeClass();pageArrows.show();dispHG(!1);n.hide();liveTab.hide();popMHCnt()};t.updateTOGraph=function(){var y=36,ut=[],h,n=[],tt=2,g=1,w,b,v,ft,d,l,a,et,ot;if(curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex===tbId.Measure)if(tbId.Measure===curTabIndex&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0?(ThirdOctaveData=[],ThirdOctaveMaxData=[],ThirdOctaveMinData=[]):(ThirdOctaveData=prepProfileSeries(pageData.TAG_IO_OBA_SERIES_1_3,DataTags.TAG_IO_OBA_SERIES_1_3.ID),ThirdOctaveMaxData=prepProfileSeries(pageData.TAG_IO_OBA_SERIES_MAX_1_3,DataTags.TAG_IO_OBA_SERIES_MAX_1_3.ID),ThirdOctaveMinData=prepProfileSeries(pageData.TAG_IO_OBA_SERIES_MIN_1_3,DataTags.TAG_IO_OBA_SERIES_MIN_1_3.ID)),isRunning||ThirdOctaveData.length>0&&ThirdOctaveData[0]instanceof Array||ovlTOMin[0]&&ovlTOMin[0][1]<300)n.push({data:ThirdOctaveData,color:mainClr,fill:1,fillColor:mainClr}),n.push({data:ThirdOctaveMaxData,color:maxClr}),n.push({data:ThirdOctaveMinData,color:minClr}),h=n[0];else{for(w=[],b=0;b<=y;++b)w[b]=[b,-99.9];n.push({data:w});n.push({data:w});n.push({data:w});h=n[0]}else ThirdOctaveData=prepProfileSeries(pageData.TAG_IO_OBA_SERIES_LIVE_1_3,DataTags.TAG_IO_OBA_SERIES_LIVE_1_3.ID),n.push({data:ThirdOctaveData,color:mainClr,fill:1,fillColor:mainClr}),h=n[0];var p=0,it=200,rt=-99.9,k=0,nt=0;if(ThirdOctaveData.length>=y)try{for(v=0;v<y;v++)ft=Math.pow(10,parseFloat(h.data[v][1])/10),p+=ft,(curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex===tbId.Measure)&&(rt<n[g].data[v][1]&&(rt=n[g].data[v][1]),it>n[tt].data[v][1]&&(it=n[tt].data[v][1]))}catch(ot){}p=10*Math.log(p)/Math.LN10;ut[y]=[y,p];h.data[22]!=undefined?(k=parseFloat(h.data[22][1])+parseFloat(h.data[25][1])+parseFloat(h.data[28][1]),nt=k+parseFloat(h.data[19][1]),k/=3,nt/=4):k=nt=-99.9;n[0].data[y]=[];n.push({data:ut,color:"rgb(175, 99, 225)",fill:1,fillColor:"rgb(175, 99, 225)"});mLiveThirdOctave.setData(n);mLiveThirdOctave.draw();var c=mLiveThirdOctave.crosshair,st=mLiveThirdOctave.getData(),t=0;c===null?c=0:(d=mLiveThirdOctave.getAxes(),c.x<d.xaxis.min||c.x>d.xaxis.max||c.y<d.yaxis.min||c.y>d.yaxis.max?c=mLiveThirdOctave.crosshair:lastThirdOctavePosition=c,c.x>.5&&(t=(thirdFreqs.length*c.x/mLiveThirdOctave.width()).toFixed(0)));l=st[0];l.x=thirdFreqs[t];l!==undefined&&l.data!==undefined&&l.data[t]!==undefined&&(a=l.data[t][1]);pageDataIndex=Math.floor(t);ThirdOctave.pdIndex=pageDataIndex;curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex===tbId.Measure?(t>=thirdFreqs.length?(u.html("&#8721;"),o.html(""+formD(p)+" dB"),i.html(""+formD(rt)+" dB"),r.html(""+formD(it)+" dB")):(u.html(""+l.x+"Hz"),n[g].data[t]!=undefined&&(et=n[g].data[t][1]||-99.9,i.html(formD(et)+" dB"),a=h.data[t][1]||-99.9,o.html(""+(a.toFixed&&formD(a))+" dB"),ot=n[tt].data[t][1]||-99.9,r.html(""+formD(ot)+" dB"))),f.html("SIL3 "+formD(k)+" dB"),e.html("SIL4 "+formD(nt)+" dB")):(f.html(""),e.html(""),t>=thirdFreqs.length?(u.html("&#8721;"),s.html("&#8721;"),a=p,i.html(""+(a.toFixed&&formD(a))+" dB")):(u.html(""+l.x+"Hz"),s.html(MakeLWeightDetectorString(MeasurementProperties.TAG_OBA_WEIGHTING,MeasurementProperties.TAG_DET_WEIGHTING,"","L<sub>("+l.x+"Hz)#<\/sub>"))),a!==undefined&&i.html(""+formD(a)+" dB"),pageData.TAG_IO_ANYLEVEL_SPL!=undefined?r.html(""+formD(pageData.TAG_IO_ANYLEVEL_SPL)+" dB"):r.html("--.- dB"))}}};PageArray[tbId.Live][pgId.Octave13]={controls:[ThirdOctave,LiveTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_ANYLEVEL_SPL","TAG_IO_OBA_SERIES_LIVE_1_3",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Overall][pgId.Octave13]={controls:[ThirdOctave,RunTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_OBA_SERIES_1_3","TAG_IO_OBA_SERIES_MIN_1_3","TAG_IO_OBA_SERIES_MAX_1_3"]};PageArray[tbId.Current][pgId.Octave13]={controls:[ThirdOctave,RunTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_OBA_SERIES_1_3","TAG_IO_OBA_SERIES_MIN_1_3","TAG_IO_OBA_SERIES_MAX_1_3",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Octave13]={controls:[ThirdOctave,StartTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_OBA_SERIES_1_3","TAG_IO_OBA_SERIES_MIN_1_3","TAG_IO_OBA_SERIES_MAX_1_3",{g:"overall",data:["TAG_IO_DURATION"]}]};var mLiveFullOctave,mFullOctaveData=[],OBAChartSetup=function(n,t,i){n=n||curTabIndex;t=t||curPageIndex;var e=pgId.SpectralTH==n,f=t===pgId.Octave11||t===pgId.Octave1N||e&&MeasurementProperties.TAG_OBA_BANDWIDTH==1,r=SystemProperties.TAG_OBA_GRAPH_BOTTOM,u=SystemProperties.TAG_OBA_GRAPH_HEIGHT+SystemProperties.TAG_OBA_GRAPH_BOTTOM;f?(i==undefined&&(i=13),t===pgId.Octave1N&&(r=-(SystemProperties.TAG_OBA_GRAPH_HEIGHT/2),u=SystemProperties.TAG_OBA_GRAPH_HEIGHT/2)):(i==undefined&&(i=37),t===pgId.Octave3N&&(r=-(SystemProperties.TAG_OBA_GRAPH_HEIGHT/2),u=SystemProperties.TAG_OBA_GRAPH_HEIGHT/2));mLiveFullOctave=$.plot(FullOctave.graph,[{data:liveGraph.getRandom(i,mFullOctaveData),color:mainClr,fillColor:mainClr}],{stack:0,bars:{show:!0,barWidth:.75,fill:0},series:{bars:{fill:0},lineWidth:0,shadowSize:0},yaxis:{tickColor:tickClr,min:r,tickSize:20,ticks:tickForm,max:u},xaxis:{show:!1},crosshair:{mode:"x",lineWidth:f?10:3,color:chClr},grid:{hoverable:!0,autoHighlight:!1,backgroundColor:{colors:bkGrad}}},GraphTypes.DATADISPLAY);FullOctave.upCH()},FullOctave={id:"FullOctave",html:"",refreshRate:250,isInit:!1,init:function(){function oi(){if(o){var t=transFlag(p);t!==""&&(t="("+t+")");lt.html("Record "+t).addClass("tpDg").show();b.show();u[n.onState].show();u[3].hide()}else v?(lt.html("Record").addClass("tpDg").show(),b.show(),u[n.onState].show(),u[3].hide()):(lt.hide(),b.hide(),u[0].show(),u[3].hide());e>0||pageData.TAG_IO_TIME_HIST_NUM_RECORDS>0||!o?(curTabIndex==tbId.Live?(r=0,st.html(MakeLWeightDetectorString(c,h,"","L<sub>$#</sub>",1))):st.html(MakeLWeightDetectorString(c,h,"",l[r],r>0?undefined:nt)),ft.html(""),gt.html("Ref"),pt.html("Set Reference"),dt?d.html("1/1 Octave"):(d.html("1/3 Octave"),ht=37)):dt?d.html("1/1 Octave"):(d.html("1/3 Octave"),ht=37)}function ot(){var ni=mLiveFullOctave.crosshair,li=mLiveFullOctave.getData(),n=0,st=fullFreqs,ot,y,hi,ri,u,ht,l,yt,kt,f,oi;if(curPageIndex!==pgId.Octave13&&curPageIndex!==pgId.Octave3N&&dt||(st=thirdFreqs),ni===null?ni=0:ni.x>.5&&(n=(st.length*ni.x/mLiveFullOctave.width()).toFixed(0)),y=0,ot=li[0],ot.x=st[n],ot!==undefined&&ot.data!=undefined&&ot.data[n]!=undefined&&(y=ot.data[n][1]),pageDataIndex=Math.floor(n),FullOctave.pdIndex[curPageIndex]=pageDataIndex,a){if(hi=!1,n>=st.length){it.html("&#8721;");ri=k;switch(r){case 1:ri=fi;break;case 2:ri=ct}rt.html(formD(ri)+" dB")}else it.html(""+ot.x+"Hz"),ur(r,n);o?e>0?(b.html(i+1+"/"+e),p!==0&&p!==TIMEHIST_PARTIAL&&(ii&255)!=0?(ir(ii),hi=!0,et.removeClass(),w.removeClass(),bt.removeClass()):w.addClass("spLeg "+vi[r])):b.html("No Data"):v&&(at>0?b.html(i+1+"/"+at):b.html("No Data"))}else if(curTabIndex===tbId.Live)n>=st.length?(it.html("&#8721;"),gt.html("&#8721;"),y=k,ut.html((y.toFixed&&formD(y))+" dB")):(it.html(""+ot.x+"Hz"),gt.html(MakeLWeightDetectorString(c,h,"","L<sub>("+ot.x+"Hz)#<\/sub>")),y!=null&&ut.html((y.toFixed&&formD(y))+" dB")),pageData.TAG_IO_ANYLEVEL_SPL!==undefined?ft.html(formD(pageData.TAG_IO_ANYLEVEL_SPL)+" dB"):ft.html("--.- dB");else if(curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex===tbId.Measure)curPageIndex==pgId.Octave11&&(n>=st.length?(it.html("&#8721;"),rt.html(formD(k)+" dB"),ut.html(""+formD(fi)+" dB"),ft.html(""+formD(ct)+" dB")):(it.html(""+ot.x+"Hz"),t[vt]&&t[vt].data[n]!=undefined&&(f=t[vt].data[n][1]||-99.9,ut.html(formD(f)+" dB"),y=tt.data[n][1]||-99.9,rt.html((y.toFixed&&formD(y))+" dB"),oi=t[ui].data[n][1]||-99.9,ft.html(""+formD(oi)+" dB"))),lt.html("SIL3 "+formD(ei)+" dB"),b.html("SIL4 "+formD(si)+" dB"));else if(o)if(u=0,ht=MeasurementProperties.TAG_TIME_HISTORY_MISC,CurrentStatus.IsDataReset&&!inFileDsp||e===undefined||e<=0){for(et.removeClass(),w.removeClass(),bt.removeClass(),l=ot.x+"Hz ",yt=1;yt<6;++yt)s[yt].html("&nbsp;");n>=st.length?s[0].html("&#8721;"):s[0].html(l);pt.html("Record");ft.html("No Data");b.html("");wt.html("")}else{for(p!==0&&p!==TIMEHIST_PARTIAL&&(ii&255)!=0&&ir(ii)?(et.removeClass(),w.removeClass(),bt.removeClass()):(l=ot.x+"Hz ",dt?(n>=st.length?(d.html("&#8721;"),it.html(formD(k)+" dB"),rt.html("--- dB"),ut.html("--- dB"),++u,l=""):ht&THOptions.ID_TH_OBALEQ11.mask?(s[0].html(MakeLWeightDetectorString(c,h,"",l+"L<sub>$#eq</sub>",nt)),t[0]&&t[0].data[n]!==undefined&&(f=t[0].data[n][1]||-99.9,s[1].html(formD(f)+" dB")),et.addClass("spLeg octv1"),++u,l=""):ht&THOptions.ID_TH_OBASPL11.mask?(s[0].html(MakeLWeightDetectorString(c,h,"",l+"L<sub>$#</sub>",nt)),t[0]&&t[0].data[n]!=undefined&&(f=t[0].data[n][1]||-99.9,s[1].html(formD(f)+" dB")),et.addClass("spLeg octv1"),++u,l=""):d.html(" "),ht&THOptions.ID_TH_OBAMAX11.mask&&(s[u*2].html(MakeLWeightDetectorString(c,h,"",l+"L<sub>$#max</sub>")),t[1]&&t[1].data[n]!=undefined&&(f=t[1].data[n][1]||-99.9,s[u*2+1].html(formD(f)+" dB")),u===0?et.addClass("spLeg octv2"):u===1&&w.addClass("spLeg octv2"),++u,l=""),ht&THOptions.ID_TH_OBAMIN11.mask&&(s[u*2].html(MakeLWeightDetectorString(c,h,"",l+"L<sub>$#min</sub>")),t[2]&&t[2].data[n]!=undefined&&(f=t[2].data[n][1]||-99.9,s[u*2+1].html(formD(f)+" dB")),u==0?et.addClass("spLeg octv3"):u==1?w.addClass("spLeg octv3"):u==2&&bt.addClass("spLeg octv3"))):(n>=st.length?(d.html("&#8721;"),it.html(formD(k)+" dB"),rt.html("--- dB"),ut.html("--- dB"),++u,l=""):ht&THOptions.ID_TH_OBALEQ13.mask?(s[0].html(MakeLWeightDetectorString(c,h,"",l+"L<sub>$#eq</sub>",nt)),t[0]&&t[0].data[n]!=undefined&&(f=t[0].data[n][1]||-99.9,s[1].html(formD(f)+" dB")),et.addClass("spLeg octv1"),++u,l=""):ht&THOptions.ID_TH_OBASPL13.mask?(s[0].html(MakeLWeightDetectorString(c,h,"",l+"L<sub>$#</sub>",nt)),t[0]&&t[0].data[n]!=undefined&&(f=t[0].data[n][1]||-99.9,s[1].html(formD(f)+" dB")),et.addClass("spLeg octv1"),++u,l=""):d.html(" "),ht&THOptions.ID_TH_OBAMAX13.mask&&(s[u*2].html(MakeLWeightDetectorString(c,h,"",l+"L<sub>$#max</sub>")),t[1]&&t[1].data[n]!=undefined&&(f=t[1].data[n][1]||-99.9,s[u*2+1].html(formD(f)+" dB")),u===0?et.addClass("spLeg octv2"):u===1&&w.addClass("spLeg octv2"),++u,l=""),ht&THOptions.ID_TH_OBAMIN13.mask&&(s[u*2].html(MakeLWeightDetectorString(c,h,"",l+"L<sub>$#min</sub>")),t[2]&&t[2].data[n]!=undefined&&(f=t[2].data[n][1]||-99.9,s[u*2+1].html(formD(f)+" dB")),u===0?et.addClass("spLeg octv3"):u===1?w.addClass("spLeg octv3"):u===2&&bt.addClass("spLeg octv3")))),yt=(u+1)*2;yt<6;++yt)s[yt].html("&nbsp;");kt=transFlag(p);kt!==""&&(kt="("+kt+")");pt.html("Record "+kt);ft.html(i+1+"/"+e)}else v?(n>=st.length?(it.html("&#8721;"),rt.html(formD(k)+" dB")):(it.html(""+ot.x+"Hz(f)"),tt&&tt.data[n]!=undefined&&(y=tt.data[n][1]||-99.9,rt.html((y.toFixed&&formD(y))+" dB"))),gt.html("Record"),wt.html(SecsToDateTime(pageData.TAG_IO_EVENT_START_TIME)),ci.html(SecsToDateTime(ti)),at>0?(ut.html(i+1+"/"+e),ft.html(eventsCnt+1+"/"+at)):(ut.html("-"),ft.html("No Data"),wt.html(""),ci.html("&nbsp;"))):g&&(n>=st.length?(it.html("&#8721;"),rt.html(formD(k)+" dB"),ut.html(""+formD(fi)+" dB"),ft.html(""+formD(ct)+" dB")):(it.html(""+ot.x+"Hz"),t[vt]&&t[vt].data[n]!=undefined&&(f=t[vt].data[n][1]||-99.9,ut.html(formD(f)+" dB"),y=tt.data[n][1]||-99.9,rt.html((y.toFixed&&formD(y))+" dB"),oi=t[ui].data[n][1]||-99.9,ft.html(""+formD(oi)+" dB"))))}function ir(n){for(var r=!1,t=0;t<8;++t)s[t].html("&nbsp;");if(e>0){var u=(n&255).toString(),f=(n&65280).toString(),i=Sess.Actions[u];i!==undefined&&(s[0].html("<img src='/images/firmware/"+i.i+".png' class='hdrImages'/> &nbsp;"+i.n),s[2].html(Sess.Causes[f]),r=!0)}return r}function ur(n,i){if(e>0||!o)y=t[n]==undefined||t[n].data[i]==undefined||t[n].data[i][1]==undefined||CurrentStatus.IsDataReset&&!inFileDsp&&curTabIndex!=tbId.Live?-99.9:t[n].data[i][1],rt.html((y.toFixed&&formD(y))+" dB"),bi();else if(CurrentStatus.IsDataReset&&!inFileDsp||e<=0){for(var r=1;r<8;++r)s[r].html("&nbsp;");wt.html("")}else rt.html("No Data")}function bi(){var i,t,n;if(a)if(curPageIndex==pgId.Octave1N?(i="TAG_FULL_REF_SP",t=curRefFo):(i="TAG_THRD_REF_SP",t=curRefTo),t<5)ut.html(""+SystemProperties[i+t]);else{n="A";switch(t){case 5:n="A";break;case 6:n="-A";break;case 7:n="C";break;case 8:n="-C"}ut.html(n)}}function fr(){var t=207;inFileDsp&&(t=208);i!==-1?$.getJSON("/sdk?func=get&f=128&p1="+t+"&&vals=911427668,"+i+"&format=tag:u4,len:u4,flags:u4,timestamp:u4,action:u4,tms:f4").done(function(t){if(t.Response.flags!=undefined){p=t.Response.flags;ti=t.Response.timestamp;ii=t.Response.action;var i="";nr&&(i=decimalSep+padSz(Math.floor(t.Response.tms/pi),tr));o&&a?wt.html(SecsToDateTime(ti)+i):b.html(SecsToDateTime(ti)+i)}else ti=0,p=0,ii=0,b.html(""),n.onState=4;a&&oi()}).always(function(){ot()}):(ti=0,p=0,ii=0,b.html(""),a&&(n.onState=4,oi()),ot())}function rr(n){var i=r,t=!1,u=0;if(n!=undefined||l[r]==undefined||!(l[r].length>0))while(!t&&256>u++)r=n<0?r>0?r-1:l.length-1:r<l.length-1?r+1:0,i==r&&(t=!0),l[r]!=undefined&&l[r].length>0&&(t=!0)}function er(){if(o||g)if(g)l=["L<sub>$#eq</sub>","L<sub>$#max</sub>","L<sub>$#E</sub>"];else{l=[];var n=0,t=MeasurementProperties.TAG_TIME_HISTORY_MISC;curPageIndex==pgId.Octave1N?(t&THOptions.ID_TH_OBALEQ11.mask?l[n]="L<sub>$#eq</sub>":t&THOptions.ID_TH_OBASPL13.mask&&(l[n]="L<sub>$#</sub>"),n++,t&THOptions.ID_TH_OBAMAX11.mask&&(l[n]="L<sub>$#max</sub>"),n++,t&THOptions.ID_TH_OBAMIN11.mask&&(l[n]="L<sub>$#min</sub>")):(t&THOptions.ID_TH_OBALEQ13.mask?l[n]="L<sub>$#eq</sub>":t&THOptions.ID_TH_OBASPL13.mask&&(l[n]="L<sub>$#</sub>"),n++,t&THOptions.ID_TH_OBAMAX13.mask&&(l[n]="L<sub>$#max</sub>"),n++,t&THOptions.ID_TH_OBAMIN13.mask&&(l[n]="L<sub>$#min</sub>"))}else l=["L<sub>$#eq</sub>","L<sub>$#max</sub>","L<sub>$#min</sub>"]}var n=FullOctave,u,s,hi;n.isInit=!0;var f=$("#FullOctave"),yt=$("#foTab"),d=f.find("#foIdxLb"),it=f.find("#foIndex"),st=f.find("#foTopLb"),rt=f.find("#foTop"),pt=f.find("#foBotLb"),ft=f.find("#foBot"),gt=f.find("#foMidLb"),ut=f.find("#foMid"),ci=f.find("#foDate"),lt=f.find("#foSIL3"),b=f.find("#foSIL4"),wt=f.find("#foEnter"),w=f.find("#fLegTop"),bt=f.find("#fLegMid"),ki=f.find("#fLegBot"),et=f.find("#fLegTH");n.graph=f.find("#liveFullOctave");u=[];u[0]=f.find("#foArr0");u[1]=f.find("#foArr1");u[2]=f.find("#foArr2");u[3]=f.find("#foArr3");u[4]=f.find("#foArr4");s=[d,it,st,rt,gt,ut,pt,ft,lt,b];n.group="live";n.pdIndex=[];n.pdIndex[pgId.Octave11]=-1;n.pdIndex[pgId.Octave1N]=-1;n.pdIndex[pgId.Octave13]=-1;n.pdIndex[pgId.Octave3N]=-1;n.pdIndex[pgId.SpectralTH]=-1;n.pdIndex[pgId.SpectralTH]=-1;var or=curPageIndex,c=MeasurementProperties.TAG_OBA_WEIGHTING,di=MeasurementProperties.TAG_FREQ_WEIGHTING,h=MeasurementProperties.TAG_DET_WEIGHTING,nt=MeasurementProperties.TAG_INTEGRATION_INPUT,kt=1,e=0,at=-1,li=-1;n.onState=0;var gi=-1,ht=13,nr=!1,pi=100,tr=1,i=0,ri=-1,l=["L<sub>$#eq</sub>","L<sub>$#max</sub>","L<sub>$#min</sub>","L<sub>$#</sub>"],ai=[0,0],r=0,vi=["octv1","octv2","octv3"],yi=0,wi=0,o=!1,g=!1,a=!1,ni=!1,dt=!1,v=!1;n.index=0;Sess.Actions==undefined&&Sess.initAct();n.enter=function(){if(kt=5,lockedGetData=0,a=pgId.Octave1N===curPageIndex||pgId.Octave3N===curPageIndex,o=tbId.TimeHist===curTabIndex,g=tbId.Events===curTabIndex,v=pgId.SpectralTH===curPageIndex&&g,ni=curPageIndex===pgId.Octave11||curPageIndex===pgId.Octave13,dt=pgId.Octave1N===curPageIndex||curPageIndex===pgId.Octave11||v&&MeasurementProperties.TAG_OBA_BANDWIDTH==1,pushMHCnt(),er(),yi=curPageIndex,wi=curTabIndex,r=curTabIndex===tbId.Live?0:curPageIndex===pgId.Octave1N||curPageIndex===pgId.Octave11?ai[0]:ai[1],pi=thProfile.getTmsDiv(),tr=thProfile.getTmsSz(pi),updFreq(),rr(),n.onState=0,n.group=getGroup(),(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&131072)>0?(lt.show(),b.show()):(lt.hide(),b.hide()),(MeasurementProperties.TAG_TIME_HISTORY_PERIOD<5||MeasurementProperties.TAG_TIME_HISTORY_PERIOD>20)&&MeasurementProperties.TAG_TIME_HISTORY_OPTIONS3&2048&&(nr=!0),lt.html(""),b.html(""),adjustOffset=SystemProperties.TAG_OBA_GRAPH_BOTTOM,c=MeasurementProperties.TAG_OBA_WEIGHTING,di=MeasurementProperties.TAG_FREQ_WEIGHTING,h=MeasurementProperties.TAG_DET_WEIGHTING,nt=MeasurementProperties.TAG_INTEGRATION_INPUT,ht=13,liveTab.show(),ni&&(curTabIndex===tbId.Live?bt.addClass("spLeg octv1"):o||(w.addClass("spLeg octv1"),bt.addClass("spLeg octv2"),ki.addClass("spLeg octv3"))),a)w.removeClass(),(!CurrentStatus.IsDataReset||inFileDsp)&&w.addClass("spLeg "+vi[r]),adjustOffset=0,(o||v)&&(n.onState=4),oi(),n.upCH(),yt.find("td:nth-child(1)").addClass("pmTCol1"),o?(i=thRecord,n.setRec(thRecord)):(g||v)&&(i=evRecord,n.setRec(evRecord)),(pageData.TAG_IO_TIME_HIST_NUM_RECORDS>0||!o)&&bi();else if(curTabIndex===tbId.Live)st.html(MakeLWeightDetectorString(c,h,"","$-@")),pt.html(MakeLWeightDetectorString(di,h,"","L<sub>$#</sub>")),d.html("1/1 Octave"),rt.html(""),yt.find("td:nth-child(1)").addClass("pmTCb");else if(curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex===tbId.Measure)pgId.Octave11===curPageIndex&&(st.html(MakeLWeightDetectorString(c,h,"","L<sub>$#eq</sub>",nt)),gt.html(MakeLWeightDetectorString(c,h,"","L<sub>$#max</sub>")),pt.html(MakeLWeightDetectorString(c,h,"","L<sub>$#min</sub>")),d.html("1/1 Octave")),yt.find("td:nth-child(1)").addClass("pmTCb");else if(o||v){yt.find("td:nth-child(1)").addClass("pmTCol1");i=thRecord;n.setRec(thRecord);for(var t=0;t<6;++t)s[t].html("&nbsp;");wt.html("").show();dt?v&&d.html("1/1 Octave")&st.html(MakeLWeightDetectorString(c,h,"","L<sub>$#eq</sub>",nt)):(v&&d.html("1/3 Octave")&st.html(MakeLWeightDetectorString(c,h,"","L<sub>$#eq</sub>",nt)),ht=37);v?(w.addClass("spLeg octv1"),bumpEvents(0),pt.html("Events"),ci.parent().parent().show(),wt.show().addClass("smDTime"),u[0].hide(),u[2].show(),n.onState=2,n.refreshRate=500):(u[0].hide(),u[3].show(),n.onState=3);b.show();yt.find("td:nth-child(1)").addClass("pmTCol1")}else g&&(w.addClass("spLeg octv1"),bumpEvents(0),i=evRecord,n.setRec(evRecord),st.html(MakeLWeightDetectorString(c,h,"","L<sub>$#eq</sub>",nt)),gt.html(MakeLWeightDetectorString(c,h,"","L<sub>$#max</sub>")),pt.html(MakeLWeightDetectorString(c,h,"","L<sub>$#E</sub>",nt)),pgId.Octave11===curPageIndex?d.html("1/1 Octave"):(d.html("1/3 Octave"),ht=37),yt.find("td:nth-child(1)").addClass("pmTCb"));return f.show(),OBAChartSetup(curTabIndex,curPageIndex,ht),n.updateFOGraph(),!0};n.update=function(){checkEvents();var t=pageData.TAG_IO_EVENT_STATE||1;curTabIndex===tbId.Live||curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex===tbId.Measure?n.updateFOGraph():(o||v||g)&&(o?((e!==pageData.TAG_IO_TIME_HIST_NUM_RECORDS||kt>0)&&(e=pageData.TAG_IO_TIME_HIST_NUM_RECORDS,e===undefined?e=-1:i<0&&(i=0),ot()),(ri!==i||kt>0)&&(n.updateFOGraph(),ri=i),--kt):v?((e!==pageData.TAG_IO_EVENT_TIME_HIST_NUM_RECORDS||li!==pageData.TAG_IO_EVENT_HIST_CUR_RECORD||ri!==i||at!==pageData.TAG_IO_NUM_EVENT_RECORDS||kt>0)&&(e=pageData.TAG_IO_EVENT_TIME_HIST_NUM_RECORDS,at=pageData.TAG_IO_NUM_EVENT_RECORDS,at===undefined&&(at=-1),e===undefined?e=-1:i<0&&(i=0),li=eventsCnt=pageData.TAG_IO_EVENT_HIST_CUR_RECORD,ri=i,ot(),n.updateFOGraph()),--kt):g&&((e!==pageData.TAG_IO_NUM_EVENT_RECORDS||li!==pageData.TAG_IO_EVENT_HIST_CUR_RECORD||ri!==i||kt>0||lastTrigState!==t)&&(e=pageData.TAG_IO_NUM_EVENT_RECORDS,e===undefined?e=-1:i<0&&(i=0),lastTrigState=t,li=eventsCnt=pageData.TAG_IO_EVENT_HIST_CUR_RECORD,ri=i,ot(),n.updateFOGraph()),--kt),gi!==CurrentStatus.uiRunFlags&&(n.updateFOGraph(),gi=CurrentStatus.uiRunFlags),upMHCntTitle());e>0?i>=e&&(i=e-1):i=0};n.leave=function(){et.removeClass();w.removeClass();bt.removeClass();ki.removeClass();n.refreshRate=250;liveTab.hide();pageArrows.show();dispHG(!1);f.hide();wt.removeClass("smDTime").hide();lt.removeClass("tpDg").hide();yt.find("td:nth-child(1)").removeClass("pmTCol1 pmTCb");ci.parent().parent().hide();u[0].hide();u[1].hide();u[2].hide();u[3].hide();u[4].hide();curTabIndex!==tbId.Live&&(yi===pgId.Octave1N||yi===pgId.Octave11?ai[0]=r:ai[1]=r);a=!1;popMHCnt();tbId.TimeHist===wi?thRecord=i:tbId.Events===wi&&yi===pgId.SpectralTH&&(evRecord=i)};n.upCH=function(){var t=curPageIndex,r=.4,i;(n.pdIndex[t]==-1||n.pdIndex[t]>ht)&&(dt?n.pdIndex[t]=7:(n.pdIndex[t]=22,r=.6));n.pdIndex[t]&&mLiveFullOctave!==undefined&&(i=mLiveFullOctave.crosshair,pageDataIndex=n.pdIndex[t],i.x=n.pdIndex[t]+r,mLiveFullOctave.setCrosshair(i))};var t=[],ui=2,vt=1,tt,k,ct,fi,ei,si;n.updateFOGraph=function(){function f(){var i,r,f,u,n,e,s;try{if(i=12,curPageIndex!==pgId.Octave13&&curPageIndex!==pgId.Octave3N&&dt||(i=36),!inFileDsp&&(CurrentStatus.IsDataReset||CurrentStatus.IsDataStored)&&(curTabIndex!=tbId.Live&&(OneOctaveData=[]),ovlFOMax=[],ovlFOMin=[]),curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex===tbId.Measure||o||g||v)if((inFileDsp||!CurrentStatus.IsDataReset)&&(isRunning||OneOctaveData.length>0&&OneOctaveData[0]instanceof Array||ovlFOMin[0]&&ovlFOMin[0][1]<300))t.push({data:OneOctaveData,color:mainClr,fill:1,fillColor:mainClr}),typeof OneOctaveMaxData!="undefined"&&t.push({data:OneOctaveMaxData,color:maxClr}),typeof OneOctaveMinData!="undefined"&&t.push({data:OneOctaveMinData,color:minClr}),tt=t[0];else{for(r=[],f=-99.9,a&&(f=0),u=0;u<=i;++u)r[u]=[u,f];t.push({data:r});t.push({data:r});t.push({data:r});tt=t[0]}if(k=0,ct=999999,fi=-99.9,ei=0,si=0,curTabIndex==tbId.Events&&(ct=0),OneOctaveData&&OneOctaveData.length>=i)try{for(n=0;n<i;n++)e=Math.pow(10,parseFloat(tt.data[n][1])/10),k+=e,(curTabIndex==tbId.Overall||curTabIndex==tbId.Current||curTabIndex==tbId.Measure||curTabIndex==tbId.Events)&&(fi<t[vt].data[n][1]&&(fi=t[vt].data[n][1]),curTabIndex==tbId.Events?(s=Math.pow(10,parseFloat(t[ui].data[n][1])/10),ct+=s):ct>t[ui].data[n][1]&&(ct=t[ui].data[n][1]))}catch(h){}curTabIndex==tbId.Events&&(ct=10*Math.log(ct)/Math.LN10);k=k!==i&&k!==0?10*Math.log(k)/Math.LN10:a?0:-99.9;l[i]=[i,k];t[0]!=undefined;t.push({data:l,color:"rgb(175, 99, 225)",fill:1,fillColor:"rgb(175, 99, 225)"});mLiveFullOctave.setData(t);mLiveFullOctave.draw();tt.data[6]!=undefined?(ei=parseFloat(tt.data[7][1])+parseFloat(tt.data[8][1])+parseFloat(tt.data[9][1]),si=ei+parseFloat(tt.data[6][1]),ei/=3,si/=4):ei=si=-99.9}catch(h){console.error(h)}o||ot()}var l=[],s,e,n;if(t=[],ovlFOMax=[],ovlFOMin=[],ui=2,vt=1,curTabIndex==tbId.Live)n="TAG_IO_OBA_SERIES_LIVE_1_1",curPageIndex==pgId.Octave3N&&(n="TAG_IO_OBA_SERIES_LIVE_1_3"),OneOctaveData=prepProfileSeries(pageData[n],DataTags[n].ID),t.push({data:OneOctaveData,color:mainClr,fill:1,fillColor:mainClr}),tt=t[0],f();else if(curTabIndex===tbId.Overall||curTabIndex===tbId.Current||curTabIndex==tbId.Measure){var r="TAG_IO_OBA_SERIES_1_1",u="TAG_IO_OBA_SERIES_MAX_1_1",h="TAG_IO_OBA_SERIES_MIN_1_1";curPageIndex===pgId.Octave3N&&(r="TAG_IO_OBA_SERIES_1_3",u="TAG_IO_OBA_SERIES_MAX_1_3",h="TAG_IO_OBA_SERIES_MIN_1_3");curTabIndex===tbId.Measure&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0?OneOctaveData=ovlFOMax=OneOctaveMaxData=ovlFOMin=OneOctaveMinData=[]:(OneOctaveData=prepProfileSeries(pageData[r],DataTags[r].ID),ovlFOMax=OneOctaveMaxData=prepProfileSeries(pageData[u],DataTags[u].ID),ovlFOMin=OneOctaveMinData=prepProfileSeries(pageData[h],DataTags[h].ID));f()}else if(v)s=240,inFileDsp&&(s=241),n=DataTags.TAG_IO_EVENT_TH_OBA_BY_FREQ.ID,e="/sdk?func=get&f=128&p1="+s+"&vals="+n+",0,"+i+","+ht+"&format=tag:u4,len:u4,value:af"+ht,$.getJSON(e).done(function(n){OneOctaveData=parseOvlOBAData(n.Response.value);ovlFOMax=OneOctaveMaxData=[];ovlFOMin=OneOctaveMinData=[];e="/sdk?func=get&f=128&p1="+s+"&vals=0x54545645,0,"+i+",1&format=tag:u4,len:u4,time:ai1";$.getJSON(e).done(function(n){n.ResultCode==0&&n.Response.time!=undefined&&(ti=n.Response.time)});f()});else if(g){var r="TAG_IO_EVENT_OBA_1_1_LEQ_SERIES",u="TAG_IO_EVENT_OBA_1_1_MAX_SERIES",c="TAG_IO_EVENT_OBA_1_1_SEL_SERIES";(curPageIndex===pgId.Octave3N||curPageIndex===pgId.Octave13)&&(r="TAG_IO_EVENT_OBA_1_3_LEQ_SERIES",u="TAG_IO_EVENT_OBA_1_3_MAX_SERIES",c="TAG_IO_EVENT_OBA_1_3_SEL_SERIES");OneOctaveData=prepProfileSeries(pageData[r],DataTags[r].ID);ovlFOMax=OneOctaveMaxData=prepProfileSeries(pageData[u],DataTags[u].ID);ovlFOMin=OneOctaveMinData=prepProfileSeries(pageData[c],DataTags[c].ID);f()}else o&&(n=1395869780,(curPageIndex===pgId.Octave11||curPageIndex===pgId.Octave1N)&&(n=1395738708),LiveData=getOutsideData(OneOctaveData,"Data",parseOvlOBAData,n,getGroup(),i),outsidePromise.done(f),fr())};var ti=0,p=0,ii=0;hi=-1;n.bumpRec=function(t){i+=t;0>i&&(i=0);i>=e&&(i=e-1);a&&hi!=i&&(n.onState=4,oi(),hi=i);n.updateFOGraph()};n.setRec=function(t){i=t;0>i&&(i=0);var r=pageData.TAG_IO_TIME_HIST_NUM_RECORDS;i>=r&&(i=r-1);a&&hi!=i&&(n.onState=4,oi(),hi=i);mLiveFullOctave!=undefined&&n.updateFOGraph();n.index=i};yt.on("click","td:nth-child(n+1)",function(){var i,t;a&&!o||o&&e>0?(i=$(this),t=i.data("ndx"),u[n.onState].hide(),0!=t||tbId.Live!=curTabIndex&&p&&p&2147483648?1!=t||tbId.Live==curTabIndex||ni||o&&p&&p&2147483648?2!=t||ni||o&&p&&p&2147483648?3!=t||a&&p&&p&2147483648||!(curPageIndex==pgId.Octave1N&&curRefFo<5||curPageIndex==pgId.Octave3N&&curRefTo<5)?4==t&&a&&(n.onState=t):n.onState=t:n.onState=t:n.onState=t:n.onState=t,u[n.onState].show()):v&&(i=$(this),t=i.data("ndx"),u[n.onState].hide(),(0===t||2===t||3===t)&&(n.onState=t),u[n.onState].show())});n.switchCtrl=function(){if(v&&at>0){u[n.onState].hide();switch(n.onState){case 0:n.onState=2;break;case 2:n.onState=3;break;default:case 3:n.onState=0}u[n.onState].show()}else 3!==n.onState||tbId.Live!==curTabIndex&&p&&p&2147483648&&!g?ni||2===n.onState?(u[n.onState].hide(),n.onState=curPageIndex===pgId.Octave1N&&curRefFo>4||curPageIndex===pgId.Octave3N&&curRefTo>4?o?4:0:3,u[n.onState].show()):4!==n.onState||p&&p&2147483648?(0===n.onState||1===n.onState)&&(u[n.onState].hide(),curTabIndex==tbId.Live&&n.onState++,n.onState++,u[3].hide(),u[0].hide(),u[n.onState].show()):(u[n.onState].hide(),n.onState=0,u[n.onState].show()):(u[n.onState].hide(),n.onState=o&&a?4:0,u[n.onState].show());ot()};f.on("click","#liveFullOctave",function(){setTimeout(ot,10)});f.find("#foLf3").bind("click",function(){ni?n.bumpRec(-1):a?FullOctave.setRef():v&&bumpEvents(-1)});f.find("#foRt3").bind("click",function(){ni?n.bumpRec(1):a?FullOctave.setRef():v&&bumpEvents(-1)});f.find("#foLf4").bind("click",function(){a&&n.bumpRec(-1)});f.find("#foRt4").bind("click",function(){a&&n.bumpRec(1)});n.bumpMet=function(n){curTabIndex==tbId.Overall||curTabIndex==tbId.Current||curTabIndex==tbId.Measure||g?(r=n.direction>0?r<l.length-1?r+1:0:r>0?r-1:l.length-1,w.removeClass(),w.addClass("spLeg "+vi[r]),st.html(MakeLWeightDetectorString(c,h,"",l[r],r>0?undefined:nt)),a&&ot()):o?(rr(n.direction),st.html(MakeLWeightDetectorString(c,h,"",l[r],r>0?undefined:nt)),ot(),w.removeClass(),w.addClass("spLeg "+vi[r])):(r=0,st.html(MakeLWeightDetectorString(c,h,"","L<sub>$#</sub>",nt)))};f.find("#foLf1").bind("click",function(){var t={};t.direction=-1;n.bumpMet(t)});f.find("#foRt1").bind("click",function(){var t={};t.direction=1;n.bumpMet(t)});n.bumpFreq=function(n){mLiveFullOctave.bumpCHIndex(n,ht-1);ot()};f.find("#foLf0").bind("click",function(){var t={};t.lastBar=.3;t.direction=-1;n.bumpFreq(t)});f.find("#foRt0").bind("click",function(){var t={};t.lastBar=.3;t.direction=1;n.bumpFreq(t)});n.bumpRef=function(t){var i=t.direction;i<0?curPageIndex==pgId.Octave1N?curRefFo=curRefFo>1?curRefFo+i:8:curRefTo=curRefTo>1?curRefTo+i:8:curPageIndex==pgId.Octave1N?curRefFo=curRefFo<8?curRefFo+i:1:curRefTo=curRefTo<8?curRefTo+i:1;(o||g)&&n.updateFOGraph();bi();ot()};f.find("#foLf2").bind("click",function(){if(v)n.bumpRec(-1);else{var t={};t.direction=-1;n.bumpRef(t)}});f.find("#foRt2").bind("click",function(){if(v)n.bumpRec(1);else{var t={};t.direction=1;n.bumpRef(t)}});n.setRef=function(){var u,l,t;dispHG(!0);var i=curRefFo,f="TAG_FULL_OCTAVE_REFERENCE_SPECTRA",c="TAG_FULL_REF_SP";curPageIndex==pgId.Octave3N&&(f="TAG_THIRD_OCTAVE_REFERENCE_SPECTRA",c="TAG_THRD_REF_SP",i=curRefTo);confDialog.timeout=3e3;var e="%s Reference set to current %r OBA Spectra.",s="",h=OneOctaveData;1==r?(s="max",h=ovlFOMax):2==r&&(s="min",h=ovlFOMin);e=e.replace("%s","'"+SystemProperties[c+i]+"'").replace("%r",s);confDialog.callConfirm("",e,function(){},{Can:{on:"off"}});u=SystemProperties[f+i];try{for(l=pgId.Octave1N==curPageIndex?12:36,t=0;t<l;++t)u[t]=h[t][1]+parseFloat(u[t]);SystemProperties[f+i]=u;UpdateProperties("System").always(function(){console.log("Latching References");$.getJSON("/sdk?func=LATCHSETTINGS&data=1&marksettingschanged=true").always(function(t){console.log(t);getMeasSysProps(200,!0).always(function(){dispHG(!1);(o||g)&&n.updateFOGraph()})})})}catch(a){dispHG(!1)}}}};PageArray[tbId.Live][pgId.Octave11]={controls:[FullOctave,LiveTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_ANYLEVEL_SPL","TAG_IO_OBA_SERIES_LIVE_1_1",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Overall][pgId.Octave11]={controls:[FullOctave,RunTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_OBA_SERIES_1_1","TAG_IO_OBA_SERIES_MAX_1_1","TAG_IO_OBA_SERIES_MIN_1_1"]};PageArray[tbId.Current][pgId.Octave11]={controls:[FullOctave,RunTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_OBA_SERIES_1_1","TAG_IO_OBA_SERIES_MAX_1_1","TAG_IO_OBA_SERIES_MIN_1_1",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.TimeHist][pgId.Octave11]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(MeasurementProperties.TAG_TIME_HISTORY_MISC&251658240)!=0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_TIME_HIST_NUM_RECORDS",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Octave11]={controls:[FullOctave,StartTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_OBA_SERIES_1_1","TAG_IO_OBA_SERIES_MAX_1_1","TAG_IO_OBA_SERIES_MIN_1_1",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Overall][pgId.Octave1N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_DURATION","TAG_IO_OBA_SERIES_1_1","TAG_IO_OBA_SERIES_MAX_1_1","TAG_IO_OBA_SERIES_MIN_1_1"]};PageArray[tbId.TimeHist][pgId.Octave13]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(MeasurementProperties.TAG_TIME_HISTORY_MISC&4026531840)!=0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_TIME_HIST_NUM_RECORDS",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Overall][pgId.Octave3N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_DURATION","TAG_IO_OBA_SERIES_1_3","TAG_IO_OBA_SERIES_MAX_1_3","TAG_IO_OBA_SERIES_MIN_1_3"]};PageArray[tbId.Current][pgId.Octave1N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_OBA_SERIES_1_1","TAG_IO_OBA_SERIES_MAX_1_1","TAG_IO_OBA_SERIES_MIN_1_1",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Current][pgId.Octave3N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_OBA_SERIES_1_3","TAG_IO_OBA_SERIES_MAX_1_3","TAG_IO_OBA_SERIES_MIN_1_3",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Octave1N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_OBA_SERIES_1_1","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_OBA_SERIES_MAX_1_1","TAG_IO_OBA_SERIES_MIN_1_1",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.Octave3N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms1000,dataNeeded:["TAG_IO_OBA_SERIES_1_3","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_OBA_SERIES_MAX_1_3","TAG_IO_OBA_SERIES_MIN_1_3",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Live][pgId.Octave1N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_OBA_SERIES_LIVE_1_1",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Live][pgId.Octave3N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_OBA_SERIES_LIVE_1_3",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.TimeHist][pgId.Octave1N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(MeasurementProperties.TAG_TIME_HISTORY_MISC&251658240)!=0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_TIME_HIST_NUM_RECORDS",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.TimeHist][pgId.Octave3N]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(MeasurementProperties.TAG_TIME_HISTORY_MISC&251658240)!=0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_TIME_HIST_NUM_RECORDS",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Events][pgId.Octave11]={controls:[FullOctave,StartTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_STATE","TAG_IO_EVENT_OBA_1_1_LEQ_SERIES","TAG_IO_EVENT_OBA_1_1_MAX_SERIES","TAG_IO_EVENT_OBA_1_1_SEL_SERIES","TAG_IO_EVENT_START_TIME",{g:"live",data:["TAG_IO_EVENT_HIST_CUR_RECORD"]},{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Events][pgId.Octave13]={controls:[FullOctave,StartTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_STATE","TAG_IO_EVENT_OBA_1_3_LEQ_SERIES","TAG_IO_EVENT_OBA_1_3_MAX_SERIES","TAG_IO_EVENT_OBA_1_3_SEL_SERIES","TAG_IO_EVENT_START_TIME",{g:"live",data:["TAG_IO_EVENT_HIST_CUR_RECORD"]},{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Events][pgId.Octave1N]={controls:[FullOctave,StartTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_STATE","TAG_IO_EVENT_OBA_1_1_LEQ_SERIES","TAG_IO_EVENT_OBA_1_1_MAX_SERIES","TAG_IO_EVENT_OBA_1_1_SEL_SERIES","TAG_IO_EVENT_START_TIME",{g:"live",data:["TAG_IO_EVENT_HIST_CUR_RECORD"]},{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Events][pgId.Octave3N]={controls:[FullOctave,StartTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&1)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_STATE","TAG_IO_EVENT_OBA_1_3_LEQ_SERIES","TAG_IO_EVENT_OBA_1_3_MAX_SERIES","TAG_IO_EVENT_OBA_1_3_SEL_SERIES","TAG_IO_EVENT_START_TIME",{g:"live",data:["TAG_IO_EVENT_HIST_CUR_RECORD"]},{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Events][pgId.SpectralTH]={controls:[FullOctave],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&2)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE>0&&MeasurementProperties.TAG_EVENT_TH_ENABLE>0&&MeasurementProperties.TAG_EVENT_TH_SPECTRA_ENABLE==1},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_START_TIME","TAG_IO_EVENT_TIME_HIST_NUM_RECORDS","TAG_IO_EVENT_STATE",{g:"live",data:["TAG_IO_EVENT_HIST_CUR_RECORD"]},{g:"overall",data:["TAG_IO_DURATION"]}]};console.log("FullOctave Graph needs to be fixed.");liveGraph={};profgraph=$("#profileGraph");liveGraph.getRandom=getRandomData;SpectralLn={id:"SpectralLn",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){function p(){MeasurementProperties.TAG_OBA_BANDWIDTH!=null&&MeasurementProperties.TAG_OBA_BANDWIDTH>1?(o=36,f=thirdFreqs,s="1/3",e==-1&&(e=22),h=5,c=.2):(o=12,f=fullFreqs,s="1/1",e==-1&&(e=7),h=11,c=.4)}function w(){var n=t.crosshair,l=t.getData(),i=0,u,o,h,c,s;for(n===null?n=0:(u=t.getAxes(),n.x<u.xaxis.min||n.x>u.xaxis.max||n.y<u.yaxis.min||n.y>u.yaxis.max?n=t.crosshair:a=n,n.x>.5&&(i=((f.length-1)*n.x/t.width()).toFixed(0))),i>=f.length&&(i=f.length-1),e=Math.floor(i),h=-99.9,c=f[i],y.html("<b>"+c+"Hz<\/b>"),s=0;s<6;++s)o=l[s],o!=undefined&&o.data!=undefined&&o.data[i]!=undefined&&(h=o.data[i][1]),(curTabIndex==tbId.Overall||curTabIndex==tbId.Current||curTabIndex==tbId.Measure)&&r[s].html(formD(h)+" dB")}function b(){LiveData=[];t=$.plot(l,[{data:liveGraph.getRandom(o),color:"rgba(55,160,255,1)"}],{lines:{steps:!1,fill:!1,lineWidth:1,zero:-20},series:{lineWidth:1,shadowSize:0},yaxis:{tickColor:tickClr,min:SystemProperties.TAG_OBA_GRAPH_BOTTOM,tickSize:20,ticks:tickForm,max:SystemProperties.TAG_OBA_GRAPH_HEIGHT+SystemProperties.TAG_OBA_GRAPH_BOTTOM},xaxis:{mode:"time",show:!1},legend:{show:!1,color:mainClr,labelBoxBorderColor:"rgba(55,160,240,0.1)",backgroundOpacity:0,position:"ne"},crosshair:{mode:"x",lineWidth:h,color:"rgba(30, 190, 250, 0.5)"},grid:{hoverable:!0,autoHighlight:!1,backgroundColor:{colors:bkGrad}}},GraphTypes.DATADISPLAY);var n=t.crosshair;n.x=e+c;console.log(n.x);t.setCrosshair(n)}var u=SpectralLn,l;u.isInit=!0;var n=$("#SpectralLn"),t,i=[],o=37,a=0,f=fullFreqs,s="1/1",v=n.find("#lbSpSet"),y=n.find("#spSer"),e=-1,h=10,c=0,r=[];r[0]=n.find("#vLn1");r[1]=n.find("#vLn2");r[2]=n.find("#vLn3");r[3]=n.find("#vLn4");r[4]=n.find("#vLn5");r[5]=n.find("#vLn6");u.specLnG={};u.enter=function(){return adjustOffset=SystemProperties.TAG_GRAPH_BOTTOM,mTabName="SpectralLn",console.log("popul SpectralLn"),updFreq(),n.show(),liveTab.show(),p(),n.find("#lbLn1").html("<div class='spLeg' style='background:"+spClr[0]+"'><\/div>L<sub>"+swiToComma(parseFloat(MeasurementProperties.TAG_LN_0).toString())+"<\/sub>"),n.find("#lbLn2").html("<div class='spLeg' style='background:"+spClr[1]+"'><\/div>L<sub>"+swiToComma(parseFloat(MeasurementProperties.TAG_LN_1).toString())+"<\/sub>"),n.find("#lbLn3").html("<div class='spLeg' style='background:"+spClr[2]+"'><\/div>L<sub>"+swiToComma(parseFloat(MeasurementProperties.TAG_LN_2).toString())+"<\/sub>"),n.find("#lbLn4").html("<div class='spLeg' style='background:"+spClr[3]+"'><\/div>L<sub>"+swiToComma(parseFloat(MeasurementProperties.TAG_LN_3).toString())+"<\/sub>"),n.find("#lbLn5").html("<div class='spLeg' style='background:"+spClr[4]+"'><\/div>L<sub>"+swiToComma(parseFloat(MeasurementProperties.TAG_LN_4).toString())+"<\/sub>"),n.find("#lbLn6").html("<div class='spLeg' style='background:"+spClr[5]+"'><\/div>L<sub>"+swiToComma(parseFloat(MeasurementProperties.TAG_LN_5).toString())+"<\/sub>"),v.html(s+" Spectral Ln"),LastSelectedTab=tbId.Overall,b(),u.specLnG=t,!0};u.update=function(){var n,r;if(upMHCntTitle(),i=[],curTabIndex===tbId.Measure&&pageData.TAG_IO_NUM_HISTORY_RECORDS<=0)for(n=0;n<6;n++)r="TAG_IO_SPECTRAL_LN_SERIES_"+n,pageData[r]!=undefined&&i.push({data:[],color:spClr[n]});else for(n=0;n<6;n++)r="TAG_IO_SPECTRAL_LN_SERIES_"+n,pageData[r]!=undefined&&i.push({data:parseOvlOBAData(pageData[r]),color:spClr[n]});lockedGetData=0;i.length>0&&(w(),t.setData(i),t.draw())};u.leave=function(){n.hide();liveTab.hide();popMHCnt()};l=n.find("#specLnG")}};PageArray[tbId.Overall][pgId.SpectralLn]={controls:[SpectralLn,RunTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&3)>0&&MeasurementProperties.TAG_OBA_BANDWIDTH>0&&MeasurementProperties.TAG_SPECTRAL_LN==1},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_DURATION","TAG_IO_RUN_TIME","TAG_IO_SPECTRAL_LN_SERIES_0","TAG_IO_SPECTRAL_LN_SERIES_1","TAG_IO_SPECTRAL_LN_SERIES_2","TAG_IO_SPECTRAL_LN_SERIES_3","TAG_IO_SPECTRAL_LN_SERIES_4","TAG_IO_SPECTRAL_LN_SERIES_5"]};PageArray[tbId.Current][pgId.SpectralLn]={controls:[SpectralLn,RunTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&3)>0&&MeasurementProperties.TAG_OBA_BANDWIDTH>0&&MeasurementProperties.TAG_SPECTRAL_LN==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_SPECTRAL_LN_SERIES_0","TAG_IO_SPECTRAL_LN_SERIES_1","TAG_IO_SPECTRAL_LN_SERIES_2","TAG_IO_SPECTRAL_LN_SERIES_3","TAG_IO_SPECTRAL_LN_SERIES_4","TAG_IO_SPECTRAL_LN_SERIES_5",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Measure][pgId.SpectralLn]={controls:[SpectralLn,StartTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&3)>0&&MeasurementProperties.TAG_OBA_BANDWIDTH>0&&MeasurementProperties.TAG_SPECTRAL_LN==1&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_RUN_TIME","TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_SPECTRAL_LN_SERIES_0","TAG_IO_SPECTRAL_LN_SERIES_1","TAG_IO_SPECTRAL_LN_SERIES_2","TAG_IO_SPECTRAL_LN_SERIES_3","TAG_IO_SPECTRAL_LN_SERIES_4","TAG_IO_SPECTRAL_LN_SERIES_5",{g:"overall",data:["TAG_IO_DURATION"]}]};var TIMEHIST_MARKER1=1,TIMEHIST_MARKER2=2,TIMEHIST_MARKER3=4,TIMEHIST_MARKER4=8,TIMEHIST_MARKER5=16,TIMEHIST_MARKER6=32,TIMEHIST_MARKER7=64,TIMEHIST_MARKER8=128,TIMEHIST_MARKER9=256,TIMEHIST_MARKER10=512,TIMEHIST_OVERLOAD=1024,TIMEHIST_OBA_OVLD=2048,TIMEHIST_EXCDED=4096,TIMEHIST_T2READY=8192,TIMEHIST_PARTIAL=8192,TIMEHIST_SR=16384,TIMEHIST_BACKERASE=32768,TIMEHIST_MANUAL=65536,TIMEHIST_SESSION_LOG=2147483648,TIMEHIST_MARKER_MASK=TIMEHIST_MARKER1|TIMEHIST_MARKER2|TIMEHIST_MARKER3|TIMEHIST_MARKER4|TIMEHIST_MARKER5|TIMEHIST_MARKER6|TIMEHIST_MARKER7|TIMEHIST_MARKER8|TIMEHIST_MARKER9|TIMEHIST_MARKER10|TIMEHIST_BACKERASE|TIMEHIST_MANUAL,strThPer=[];strThPer[0]=" 20 ms".trim();strThPer[1]=" 50 ms".trim();strThPer[2]="100 ms".trim();strThPer[3]="200 ms".trim();strThPer[4]="500 ms".trim();strThPer[5]="  1 s".trim();strThPer[6]="  2 s".trim();strThPer[7]="  5 s".trim();strThPer[8]=" 10 s".trim();strThPer[9]=" 15 s".trim();strThPer[10]=" 20 s".trim();strThPer[11]=" 30 s".trim();strThPer[12]="  1 min".trim();strThPer[13]="  2 min".trim();strThPer[14]="  5 min".trim();strThPer[15]=" 10 min".trim();strThPer[16]=" 15 min".trim();strThPer[17]=" 20 min".trim();strThPer[18]=" 30 min".trim();strThPer[19]="  1 h".trim();strThPer[20]=" 24 h".trim();strThPer[21]="2.5 ms".trim();strThPer[22]="  5 ms".trim();strThPer[23]=" 10 ms".trim();OBArecNum=0;thProfile={id:"thProfile",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){function ri(){(s.length>0||l>0)&&(v.setData(s),ni(),v.draw())}function li(n){return n=n-(n>>1&1431655765),n=(n&858993459)+(n>>2&858993459),(n+(n>>4)&252645135)*16843009>>24}function rr(){var t=207,n;inFileDsp&&(t=208);n=li(MeasurementProperties.TAG_TIME_HISTORY_OPTIONS)+li(MeasurementProperties.TAG_TIME_HISTORY_MISC&16777215)+li(MeasurementProperties.TAG_TIME_HISTORY_OPTIONS3);n*=2;$.getJSON("/sdk?func=get&f=128&p1="+t+"&vals=1229801556&format=tag:x4,sz:i4,optNFlags:ai"+n).done(function(t){var s=0,u,r,h,i,o;for(f=[],e=0,nt=!1,lt=0,u=t.Response.optNFlags,r=0;r<n-1;r+=2){h=u[r];i=u[r+1];switch(h){case PropertyTags.TAG_TIME_HISTORY_OPTIONS.ID:f[e]={};f[e].name=THOptName.TAG_TIME_HISTORY_OPTIONS[i];nt||i!=1&&i!=1024&&i!=2097152||(nt=!0,lt=e);f[e].tag="TAG_TIME_HISTORY_OPTIONS";break;case PropertyTags.TAG_TIME_HISTORY_MISC.ID:f[e]={};f[e].name=THOptName.TAG_TIME_HISTORY_MISC[i];nt||i!=1?i==131072&&MeasurementProperties.TAG_WIND_DIRECTION==0&&(f[e].fnc=1/22.5):(nt=!0,lt=e);f[e].tag="TAG_TIME_HISTORY_MISC";break;case PropertyTags.TAG_TIME_HISTORY_OPTIONS3.ID:f[e]={};f[e].name=THOptName.TAG_TIME_HISTORY_OPTIONS3[i];i==2048?vt=e:i==256&&MeasurementProperties.TAG_WIND_DIRECTION==0?f[e].fnc=1/22.5:(i>=65536&&i<=2097152||i==4128768&&s<6)&&(o=MakeLWeightDetectorString(y,w,"","L<sub>$#</sub><sub>"),SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&8388608&&(o="L<sub>NF"),f[e].name=o+parseFloat(MeasurementProperties["TAG_LN_"+s++]).toString()+"<\/sub>");f[e].tag="TAG_TIME_HISTORY_OPTIONS3"}f[e]?(f[e].key=i,++e):console.log("You gave me the wrong stuff.")}})}function ur(){var i=" "+MeasurementProperties.TAG_WIND_UNITS,n=" "+MeasurementProperties.TAG_ADC1_UNITS,t=" "+MeasurementProperties.TAG_ADC2_UNITS,r="\u00b0",u=SystemProperties.TAG_UNIT_CONV==0?" C":" F";SystemProperties.TAG_UNIT_CONV==0&&MeasurementProperties.TAG_WEATHER_ENABLE!=1?(i=" m/s",t=" % RH",n=" C"):MeasurementProperties.TAG_WEATHER_ENABLE!=1?(i=" mi/h",t=" % RH",n=" F"):n=replaceInStr(n,65533,r);MeasurementProperties.TAG_WIND_DIRECTION==0&&(r="");ui={TAG_TIME_HISTORY_OPTIONS:{"32":"L<sub>AFTM5</sub>","64":"Ltwa1","128":"Ltwa2","256":"Ltwa3","512":"Ltwa4"},TAG_TIME_HISTORY_MISC:{"2048":"V","4096":"V","8192":u,"16384":u,"32768":" % RH","65536":i,"131072":r,"262144":n,"524288":t},TAG_TIME_HISTORY_OPTIONS3:{"1":i,"2":n,"4":n,"8":t,"16":t,"32":"kPa","64":"kPa","128":"kPa","256":r,"2048":""}}}function gt(){var e=MeasurementProperties.TAG_TIME_HISTORY_MISC,n=1,r=c[t],o,u;if(a)r=c[t]&&c[t][1],r!==TIMEHIST_SESSION_LOG&&nt&&f[lt]&&f[lt].name&&(wt=strThPer[MeasurementProperties.TAG_TIME_HISTORY_PERIOD],et.html(MakeLWeightDetectorString(y,w,"",f[lt].name,at)+" ("+wt+")")),i[2].html("Record"),i[3].html(""),i[4].html(""),ht.html(""),ft.html("");else if(onEventTH)u=transFlag(r,!0),u!==""&&(u="("+u+")"),i[2].html("Record "+u),i[3].html(""),i[4].html("Events"),bt>0?ht.html(eventsCnt+1+"/"+bt):ht.html(""),ft.show();else if(tt&&(it||ot))it?i[0].html("1/1 Octave"):i[0].html("1/3 Octave"),i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#eq</sub>",at)),i[2].html("Record"),i[3].html(""),i[4].html("Events"),ht.html(""),ft.show();else if(it){if(r=c[t]&&c[t][1],r===TIMEHIST_SESSION_LOG||r===undefined)b.removeClass(),ct.removeClass(),pt.removeClass();else if(e&THOptions.ID_TH_OBALEQ11.mask?(i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#eq</sub>",at)),b.addClass("spLeg octv1")):e&THOptions.ID_TH_OBASPL11.mask&&(i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#</sub>")),b.addClass("spLeg octv1")),e&THOptions.ID_TH_OBAMAX11.mask?(n==1?b.addClass("spLeg octv2"):n==2&&ct.addClass("spLeg octv2"),i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#max</sub>"))):(i[n].html(""),ut.html("")),e&THOptions.ID_TH_OBAMIN11.mask&&!(r&&r&2147483648)?(n==1?b.addClass("spLeg octv3"):n==2?ct.addClass("spLeg octv3"):n==3&&pt.addClass("spLeg octv3"),i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#min</sub>"))):(i[n].html(""),g.html("")),n<4)for(o=n;o<4;++o)i[o].html("");u=transFlag(r);u!==""&&(u="("+u+")");i[4].html("Record "+u);ft.show()}else if(ot){if(r=c[t]&&c[t][1],r===TIMEHIST_SESSION_LOG||r===undefined)b.removeClass(),ct.removeClass(),pt.removeClass();else if(e&THOptions.ID_TH_OBALEQ13.mask?(i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#eq</sub>",at)),b.addClass("spLeg octv1")):e&THOptions.ID_TH_OBASPL13.mask&&(i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#</sub>")),b.addClass("spLeg octv1")),e&THOptions.ID_TH_OBAMAX13.mask?(n==1?b.addClass("spLeg octv2"):n==2&&ct.addClass("spLeg octv2"),i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#max</sub>"))):(i[n].html(""),ut.html("")),e&THOptions.ID_TH_OBAMIN13.mask&&!(r&&r&2147483648)?(n==1?b.addClass("spLeg octv3"):n==2?ct.addClass("spLeg octv3"):n==3&&pt.addClass("spLeg octv3"),i[n++].html(MakeLWeightDetectorString(y,w,"","L<sub>$#min</sub>"))):(i[n].html(""),g.html("")),n<4)for(o=n;o<4;++o)i[o].html("");u=transFlag(r);u!==""&&(u="("+u+")");i[4].html("Record "+u);ft.show()}}function ki(n){for(var t=0;t<8;t++)h<e&&f[h].name.indexOf("OBA")>=0&&(h+=n)}function fi(n){var t={};t.index=n;t.lastBar=1.3;v.bumpCHIndex(t)}function ni(){var wi=v.crosshair,s=v.getData(),ct=120,e=v.crosshair.index,ci,o,pt,kt,ti,ii,hi,b;if(ct=s[0]&&s[0].data.length||120,e>=ct&&ct>0?(e=ct-1,fi(e)):0===ct&&(e=0,fi(e)),ci=10,d!=undefined&&0<d.length&&e>=d.length?(e=d.length-1,fi(e)):tt&&p!=undefined&&p.length<=e&&(e=p.length-1,fi(e)),t=Math.floor(e),d.length<=0&&p.length<=0||s[0]==undefined&&s[1]==undefined||CurrentStatus.IsDataReset&&!inFileDsp||onEventTH&&pageData.TAG_IO_NUM_EVENT_RECORDS<=0){onEventTH?(st.html("---"),ut.html(""),g.html("&nbsp;"),ht.html("No Data"),ft.html("&nbsp;")):(i[0].html(""),i[1].html(""),a?(yt.html("--- dB"),r[2].show(),r[1].hide(),n.onState=2):(i[2].html(""),i[3].html(""),r[0].hide(),r[3].show(),n.onState=3,yt.html("")),st.html(""),ut.html("No Data"),g.html(""));return}var ri=s[0].data[e],gt=d[e]&&d[e][1],oi=c[e]&&c[e][1];if(oi==TIMEHIST_SESSION_LOG||ri==null){if(gt!=undefined){var li=(gt&255).toString(),pi=(gt&65280).toString(),ni=Sess.Actions[li];ni!=undefined&&(et.html("<img src='/images/firmware/"+ni.i+".png' class='hdrImages'/> &nbsp;"+ni.n),i[1].html(Sess.Causes[pi]))}yt.html("");st.html("");ut.html("");g.html("");a||onEventTH||vi.html("");yi.html("")}else o=ri[1],tt||(nt||it||ot)&&o!==0?a?(yt.html(formD(o)+" dB"),nt&&f[lt]&&f[lt].name?(pt=transFlag(oi,!0),pt===""&&(wt=strThPer[MeasurementProperties.TAG_TIME_HISTORY_PERIOD],pt=wt),et.html(MakeLWeightDetectorString(y,w,"",f[lt].name,at)+" ("+pt+")")):et.html("")):onEventTH?st.html(formD(o)+" dB"):it?(et.html("1/1 Octave"),yt.html(dt[k]+"Hz(t)"),st.html(formD(o)+" dB")):ot&&(et.html("1/3 Octave"),yt.html(dt[k]+"Hz(t)"),st.html(formD(o)+" dB")):(yt.html(""),et.html("")),kt="dB",a&&0<=h&&(ti=f[h].tag,ii=f[h].key,ui[ti][ii]!=undefined&&(kt=ui[ti][ii])),s[1]!=undefined&&s[1].data[e]!==null?(o=s[1].data[e][1],a?(hi=f[h].fnc>0?tr[Math.round(o*.0444)]:formD2(o),st.html(hi+" "+kt)):(ut.html(formD(o)+" dB"),s[2]!=undefined&&s[2].data[e]!=undefined?(o=s[2].data[e][1],g.html(formD(o)+" dB")):g.html(""))):a?(st.html("--.- "+kt),ut.html(""),g.html("")):tt||(nt||it||ot||st.html(""),ut.html(""),g.html("")),a&&si.html(MakeLWeightDetectorString(y,w,"",f[h].name,at));b="";vt>0&&rt&&rt[e]!=undefined&&(b=decimalSep+padSz(Math.floor(rt[e][1]/ei),ai));a?(ut.html(parseInt(e,10)+1+u+"/"+l),g.html(SecsToDateTime(p[e][1])+b)):tt?(ut.html(parseInt(e,10)+1+u+"/"+l),g.html(SecsToDateTime(p[e][1])+b),ht.html(eventsCnt+1+"/"+bt),ft.html(SecsToDateTime(pageData.TAG_IO_EVENT_START_TIME)+b)):(ht.html(parseInt(e,10)+1+u+"/"+l),ft.html(SecsToDateTime(p[e][1])+b))}function fr(){var i=Math.min(l,120),e=207,f;inFileDsp&&(e=208);f=1093751874;ot&&(f=1093882946);var t="/sdk?func=get&f=128&p1="+e+"&vals="+f+","+k+","+u+","+i+"&format=tag:x4,",n=MeasurementProperties.TAG_TIME_HISTORY_MISC,r=0;it?(n&THOptions.ID_TH_OBALEQ11.mask?t+="sz:i4,series"+r+++":af"+i:n&THOptions.ID_TH_OBASPL11.mask&&(t+="sz:i4,series"+r+++":af"+i),n&THOptions.ID_TH_OBAMAX11.mask&&(r>0&&(t+=","),t+="sz:i4,series"+r+++":af"+i),n&THOptions.ID_TH_OBAMIN11.mask&&(r>0&&(t+=","),t+="sz:i4,series"+r+++":af"+i)):(n&THOptions.ID_TH_OBALEQ13.mask?t+="sz:i4,series"+r+++":af"+i:n&THOptions.ID_TH_OBASPL13.mask&&(t+="sz:i4,series"+r+++":af"+i),n&THOptions.ID_TH_OBAMAX13.mask&&(r>0&&(t+=","),t+="sz:i4,series"+r+++":af"+i),n&THOptions.ID_TH_OBAMIN13.mask&&(r>0&&(t+=","),t+="sz:i4,series"+r+++":af"+i));t+=",flagtag:x4,flagsz:i4,thFlags:ai"+i+",timetag:x4,timesz:i4,thTime:ai"+i+",acttag:x4,actsz:i4,thAction:ai"+i;vt>0&&(t+=",tmstag:x4,tmssz:i4,thTms:af"+i);$.getJSON(t).done(function(t){if(s=[],t.ResultCode==0&&t.Response.series0!=undefined){var i=0;it?(n&THOptions.ID_TH_OBALEQ11.mask?s.push({data:parseOvlOBAData(t.Response["series"+i++]),fill:1,fillColor:mainClr,color:mainClr}):n&THOptions.ID_TH_OBASPL11.mask&&s.push({data:parseOvlOBAData(t.Response["series"+i++]),fill:1,fillColor:mainClr,color:mainClr}),n&THOptions.ID_TH_OBAMAX11.mask&&s.push({data:parseOvlOBAData(t.Response["series"+i++]),color:maxClr}),n&THOptions.ID_TH_OBAMIN11.mask&&s.push({data:parseOvlOBAData(t.Response["series"+i++]),color:minClr})):(n&THOptions.ID_TH_OBALEQ13.mask?s.push({data:parseOvlOBAData(t.Response["series"+i++]),fill:1,fillColor:mainClr,color:mainClr}):n&THOptions.ID_TH_OBASPL13.mask&&s.push({data:parseOvlOBAData(t.Response["series"+i++]),fill:1,fillColor:mainClr,color:mainClr}),n&THOptions.ID_TH_OBAMAX13.mask&&s.push({data:parseOvlOBAData(t.Response["series"+i++]),color:maxClr}),n&THOptions.ID_TH_OBAMIN13.mask&&s.push({data:parseOvlOBAData(t.Response["series"+i++]),color:minClr}));er(t.Response)}else t.ResultCode==0&&(s=[],s.push({data:liveGraph.getRandom(ti),fill:1,fillColor:mainClr,color:mainClr}),c=[],d=[],p=[],rt=[])}).fail(function(n){console.log(n)}).always(function(){lockedGetData=0;ri()})}function er(n){c=parseOvlOBAData(n.thFlags);d=parseOvlOBAData(n.thAction);p=parseOvlOBAData(n.thTime);rt=n.thTms!=undefined?parseOvlOBAData(n.thTms):[]}function or(){for(var i=c.length,r=v.getYAxes()[0].max-1,t=[],n=0;n<i;++n)(c[n][1]&TIMEHIST_MARKER_MASK)!=0&&t.push([n,r]);return t}function sr(n){switch(n){case 0:return 50;case 1:return 20;case 2:return 10;case 3:return 5;case 4:return 2;case 5:return 1;case 6:return.5;case 7:return 1/5}}function hr(){var f=!1,i,t,r=240,n;if(inFileDsp&&(r=241),n=120,pageData.TAG_IO_EVENT_TIME_HIST_NUM_RECORDS>0?n=pageData.TAG_IO_EVENT_TIME_HIST_NUM_RECORDS:pageData.TAG_IO_EVENT_RUN_TIME>0&&(n=pageData.TAG_IO_EVENT_RUN_TIME*sr(MeasurementProperties.TAG_EVENT_TH_PERIOD),n=Math.ceil(Math.min(n,120))),pgId.O11Time===curPageIndex||pgId.O13Time===curPageIndex?(i=1414485573,t="/sdk?func=get&f=128&p1="+r+"&vals="+i+","+k+","+u+","+n+"&format=tag:u4,len:u4,value:af"+n):(n=120,i=1398036037,t="/sdk?func=get&f=128&p1="+r+"&vals="+i+",0,"+u+","+n+"&format=t:u4,lt:u4,tag:u4,len:u4,value:af"+n+",tag1:u4,len1:u4,time:ai"+n),lockedGetData===0){++lockedGetData;try{f=!0;$.getJSON(t).done(function(i){i.ResultCode==0&&i.Response.value!=undefined?(c=[],rt=[],d=[],s=[],s.push({data:parseOvlOBAData(i.Response.value),fill:1,fillColor:mainClr,color:mainClr}),i.Response.time!=undefined?p=parseOvlOBAData(i.Response.time):(t="/sdk?func=get&f=128&p1="+r+"&vals=0x54545645,"+k+","+u+","+n+"&format=tag:u4,len:u4,time:ai"+n,$.getJSON(t).done(function(n){p=[];n.ResultCode==0&&n.Response.time!=undefined&&(p=parseOvlOBAData(n.Response.time))}))):i.ResultCode==0&&(s=[],s.push({data:liveGraph.getRandom(ti),fill:1,fillColor:mainClr,color:mainClr}),c=[],d=[],p=[],rt=[]);lockedGetData=0}).always(function(){lockedGetData=0;ri()})}catch(e){console.error("Error in Spectral: "+e)}}return f}function cr(){var t=!1,n="time",i;if(inFileDsp&&(n="file"+n),lockedGetData===0){++lockedGetData;try{t=!0;h>=e&&(h=e-1);h<0&&(h=0);i="/sdk?func=timehistjson&group="+n+"&metric="+h+"&index="+u;$.getJSON(i).done(function(n){n.ResultCode==0&&n.thLeq!=undefined?(c=parseOvlOBAData(n.thFlags),a&&(s=[],nt?s.push({data:parseOvlOBAData(n.thLeq),fill:1,fillColor:mainClr,color:mainClr}):s.push({data:parseOvlOBAData(n.thLeq),fill:0,color:"rgba(0,0,0,0)"}),s.push({data:parseOvlOBAData(n.thMetrics),color:maxClr}),s.push({data:or(),color:"rgb(255,150,50)"})),d=parseOvlOBAData(n.thAction),p=parseOvlOBAData(n.thTime),rt=n.thTms!=undefined?parseOvlOBAData(n.thTms):[]):n.ResultCode==0&&(a&&(s=[],s.push({data:liveGraph.getRandom(ti),fill:1,fillColor:mainClr,color:mainClr})),c=[],d=[],p=[],rt=[]);lockedGetData=0}).always(function(){lockedGetData=0;ri()})}catch(r){console.error("Error in GetTHData: "+r)}}return t}var n=thProfile,r,ir,ui,f,vt,di;n.isInit=!0;var o=$("#thProfile"),v={},s=[],c=[],p=[],rt=[],ei=100,ai=1,d=[],ti=120,oi=o.find("#thTab"),yt=o.find("#thTop"),st=o.find("#vTh1"),ut=o.find("#vTh2"),g=o.find("#vTh3"),ht=o.find("#vTh4"),ft=o.find("#vTh5"),et=o.find("#lbThTop"),si=o.find("#lbTh1"),vi=o.find("#lbTh2"),yi=o.find("#lbTh3"),gi=o.find("#lbTh4"),b=o.find("#thLegTop"),ct=o.find("#thLegMid"),pt=o.find("#thLegBot"),i=[];i[0]=et;i[1]=si;i[2]=vi;i[3]=yi;i[4]=gi;r=[];r[0]=o.find("#thArr0");r[1]=o.find("#thArr1");r[2]=o.find("#thArr2");r[3]=o.find("#thArr3");var hi=o.find("#thHr0"),wt="",t=0,u=0,nr=.2,y=0,w=0,at=0,h=1,pi=-1,l=-1,bt=-1,wi=-1,bi=-1,e=1,kt=[];kt[0]=7;kt[1]=22;var k=7,dt=fullFreqs,it=!1,ot=!1,a=!0;n.onState=2;n.index=0;var ci=!1,nt=!1,lt=0,ii=5,tt=!1,tr=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"];n.thProfG={};Sess.Actions==undefined&&Sess.initAct();n.enter=function(){if(ii=5,bt=-1,adjustOffset=SystemProperties.TAG_GRAPH_BOTTOM,nt=!1,lockedGetData=0,n.onState=2,tt=tbId.Events===curTabIndex,onEventTH=pgId.EventTH===curPageIndex,it=pgId.O11Time===curPageIndex,ot=pgId.O13Time===curPageIndex,a=pgId.Metrics===curPageIndex,h=1,ei=n.getTmsDiv(),ai=thProfile.getTmsSz(ei),r[0].hide(),r[1].hide(),r[2].hide(),r[3].hide(),ht.show(),it?(dt=fullFreqs,n.onState=3,k=kt[0],hi.hide()):ot?(dt=thirdFreqs,n.onState=3,k=kt[1],hi.hide()):hi.show(),y=a?MeasurementProperties.TAG_FREQ_WEIGHTING:MeasurementProperties.TAG_OBA_WEIGHTING,w=MeasurementProperties.TAG_DET_WEIGHTING,at=MeasurementProperties.TAG_INTEGRATION_INPUT,console.log("popul thProfile"),tt?(b.addClass("spLeg octv1"),bumpEvents(0),LastSelectedTab=tbId.Events,l=pageData.TAG_IO_EVENT_TIME_HIST_NUM_RECORDS||-1,oi.find("td:nth-child(1)").addClass("pmTCol1"),onEventTH?(y=MeasurementProperties.TAG_FREQ_WEIGHTING,wt=strThPer[MeasurementProperties.TAG_EVENT_TH_PERIOD],si.html(MakeLWeightDetectorString(y,w,"","L<sub>$#eq</sub><sub>("+wt+")<\/sub>",at)),et.parent().parent().hide(),n.onState=2):n.onState=0,n.setRec(evRecord),g.addClass("smDTime").parent().parent().removeClass("rHgt"),ft.addClass("smDTime")):(LastSelectedTab=tbId.TimeHist,l=pageData.TAG_IO_TIME_HIST_NUM_RECORDS||-1,n.setRec(thRecord)),r[n.onState].show(),o.show(),liveTab.show(),n.setupGraph(),n.thProfG=v,vt=-1,a)ur(),rr();else{var t=MeasurementProperties.TAG_TIME_HISTORY_MISC;it?(t&THOptions.ID_TH_OBALEQ11.mask||t&THOptions.ID_TH_OBASPL11.mask)&&(nt=!0):ot&&(t&THOptions.ID_TH_OBALEQ13.mask||t&THOptions.ID_TH_OBASPL13.mask)&&(nt=!0)}return n.updateGraph(),ci=!0,pushMHCnt(),!0};n.update=function(){var i,r,e,f;eventsCnt=pageData.TAG_IO_EVENT_HIST_CUR_RECORD;i=pageData.TAG_IO_TIME_HIST_NUM_RECORDS||-1;tt&&(i=pageData.TAG_IO_EVENT_TIME_HIST_NUM_RECORDS||-1);r=pageData.TAG_IO_NUM_EVENT_RECORDS||-1;e=pageData.TAG_IO_EVENT_STATE||1;i<u&&(u=i>0?i-1:0);i<t+u&&u+t>0&&(t=i>u?i-u-1:u,f={},f.x=t,f.y=10,v.setCrosshair(f));((l!=i||bt!=r)&&(l<u+120||i<120)||bi!=eventsCnt||e!=wi)&&(ii=2,initialGet=!0);ii-->0?(upMHCntTitle(),l=i,bt=r,eventsCnt>=r&&(eventsCnt=r>0?r-1:0),bi=eventsCnt,wi=e,n.updateGraph()):(l=i,pi!=CurrentStatus.uiRunFlags?(ii++,n.updateGraph(),pi=CurrentStatus.uiRunFlags):0===lockedGetData&&ni())};n.leave=function(){b.removeClass();ct.removeClass();pt.removeClass();popMHCnt();ci=!1;it?kt[0]=k:ot&&(kt[1]=k);o.hide();liveTab.hide();r[0].hide();r[1].hide();r[2].hide();r[3].hide();et.parent().parent().show();ht.hide();oi.find("td:nth-child(1)").removeClass("pmTCol1");popMHCnt();tbId.TimeHist===LastSelectedTab?thRecord=t+u:tbId.Events===LastSelectedTab&&(g.removeClass("smDTime").parent().parent().addClass("rHgt"),ft.removeClass("smDTime"),evRecord=t+u)};n.updateGraph=function(){var n=!0;return a?n=cr():tbId.TimeHist===curTabIndex?fr():hr(),gt(),ri(),n};ir=[];ui={};f=[];vt=-1;oi.on("click","td:nth-child(n+1)",function(){if(tbId.TimeHist==curTabIndex){var f=$(this),i=f.data("ndx"),u=c[t];r[n.onState].hide();0!=i||a||u&&u&2147483648?1!=i||!a||u&&u&2147483648||CurrentStatus.IsDataReset&&!inFileDsp?2==i&&a?n.onState=i:3!=i||a||(n.onState=i):n.onState=i:n.onState=i;r[n.onState].show()}else if(tt){var f=$(this),i=f.data("ndx"),u=c[t];r[n.onState].hide();(0==i||3==i||2==i)&&(n.onState=i);r[n.onState].show()}});o.on("click","#thProfG",function(){tbId.TimeHist==curTabIndex?(gt(),setTimeout(ni,10),thRecord=t+u):tt&&(evRecord=t+u,setTimeout(ni,10))});n.bumpFreq=function(t){k+=t;k<0?k=0:k>=dt.length&&(k=dt.length-1);gt();n.updateGraph()};o.find("#thArr0Lf").bind("click",function(){var t={};t.lastBar=.3;t.direction=-1;n.bumpFreq(t.direction)});o.find("#thArr0Rt").bind("click",function(){var t={};t.lastBar=.3;t.direction=1;n.bumpFreq(t.direction)});o.find("#thRecLf").bind("click",function(){n.bumpRec(-1)});o.find("#thRecRt").bind("click",function(){n.bumpRec(1)});o.find("#thArr3Lf").bind("click",function(){tt?bumpEvents(-1):n.bumpRec(-1)});o.find("#thArr3Rt").bind("click",function(){tt?bumpEvents(1):n.bumpRec(1)});o.find("#thMetLf").bind("click",function(){n.bumpMet(-1)});o.find("#thMetRt").bind("click",function(){n.bumpMet(1)});n.bumpMet=function(t){t>0?(h++,ki(1),h==vt&&h++,h>=e&&(h=0)):(h--,h<0&&(h=e-1),h==vt&&h--,ki(-1));gt();n.updateGraph()};n.bumpRec=function(i){var r={};r.lastBar=.3;u+t+i>=l&&(i=l-u-t-1);r.direction=i;t<110&&i>0||i<0&&t>10?(i<0&&t+i<10&&(i=10-t),i>0&&t+i>110&&(i=110-t),r.direction=i,v.bumpCHIndex(r,120),ni(),gt()):(u>0&&i<0&&t<=10?(u+=i,u<0&&(u=0),n.updateGraph()):i>0&&t>=110&&u<l-120?(u+=i,u>l-120&&(u=l-120),n.updateGraph()):(i!=0&&v.bumpCHIndex(r,120),n.updateGraph()),gt())};n.setRec=function(i){var r={};i>=l&&(i=l-1);120>=l||i<110?(u=0,t=i):i>l-120?(u=l-120,t=i-u):(u=i-60,t=60);console.log(t,l);r.lastBar=.3;r.direction=0;r.index=t;n.index=t+u;v&&v.bumpCHIndex&&v.bumpCHIndex(r,120);ci&&n.updateGraph()};n.switchCtrl=function(){a?c.length>0&&!(c[t][1]&2147483648)&&r[2].is(":visible")&&!CurrentStatus.IsDataReset?(r[2].hide(),r[1].show(),n.onState=1):(r[2].show(),r[1].hide(),n.onState=2):onEventTH?(r[n.onState].hide(),n.onState=2===n.onState?3:2,r[n.onState].show()):tt?(r[n.onState].hide(),n.onState=0===n.onState?2:2===n.onState?3:0,r[n.onState].show()):0===n.onState?(r[0].hide(),r[3].show(),n.onState=3):(r[0].show(),r[3].hide(),n.onState=0)};di=o.find("#thProfG");n.setupGraph=function(){LiveData=[];v=$.plot(di,[{data:liveGraph.getRandom(ti),color:mainClr}],{bars:{show:!0,barWidth:1.5,fill:0},series:{bars:{fill:0},lineWidth:1,shadowSize:0},yaxis:{tickColor:tickClr,min:SystemProperties.TAG_GRAPH_BOTTOM,tickSize:20,ticks:tickForm,max:SystemProperties.TAG_GRAPH_HEIGHT+SystemProperties.TAG_GRAPH_BOTTOM},xaxis:{mode:"time",show:!1},crosshair:{mode:"x",lineWidth:1.5,color:"rgba(30, 190, 250, 0.8)"},grid:{hoverable:!0,autoHighlight:!1,backgroundColor:{colors:bkGrad}}},GraphTypes.DATADISPLAY);var n=v.crosshair;t<0&&(t=0);n.x=t+nr;console.log(n.x);v.setCrosshair(n)}}};PageArray[tbId.TimeHist][pgId.Metrics]={controls:[thProfile,msLeq1sAveCtl],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&32)>0&&MeasurementProperties.TAG_TIME_HISTORY_ENABLE==1&&(MeasurementProperties.TAG_TIME_HISTORY_OPTIONS|MeasurementProperties.TAG_TIME_HISTORY_MISC&16777215|MeasurementProperties.TAG_TIME_HISTORY_OPTIONS3&4294965247)!=0&&MeasurementProperties.TAG_TIME_HISTORY_PERIOD<21},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_TIME_HIST_NUM_RECORDS",{g:"overall",data:["TAG_IO_DURATION","TAG_IO_SOUND_RECORDER_STATE"]}]};PageArray[tbId.TimeHist][pgId.O11Time]={controls:[thProfile],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16416)>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&3)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==1||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&MeasurementProperties.TAG_TIME_HISTORY_ENABLE==1&&(MeasurementProperties.TAG_TIME_HISTORY_OPTIONS|MeasurementProperties.TAG_TIME_HISTORY_MISC|MeasurementProperties.TAG_TIME_HISTORY_OPTIONS3)!=0&&(MeasurementProperties.TAG_TIME_HISTORY_MISC&251658240)!=0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_TIME_HIST_NUM_RECORDS",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.TimeHist][pgId.O13Time]={controls:[thProfile],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16416)>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&3)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&MeasurementProperties.TAG_TIME_HISTORY_ENABLE==1&&(MeasurementProperties.TAG_TIME_HISTORY_OPTIONS|MeasurementProperties.TAG_TIME_HISTORY_MISC|MeasurementProperties.TAG_TIME_HISTORY_OPTIONS3)!=0&&(MeasurementProperties.TAG_TIME_HISTORY_MISC&4026531840)!=0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_TIME_HIST_NUM_RECORDS",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Events][pgId.EventTH]={controls:[thProfile],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_TH_ENABLE==1&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE==1},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_STATE","TAG_IO_EVENT_RUN_TIME","TAG_IO_EVENT_START_TIME","TAG_IO_EVENT_TIME_HIST_NUM_RECORDS","TAG_IO_EVENT_HIST_CUR_RECORD",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Events][pgId.O11Time]={controls:[thProfile],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&3)>0&&MeasurementProperties.TAG_OBA_BANDWIDTH==1&&MeasurementProperties.TAG_EVENT_TH_ENABLE==1&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE==1&&MeasurementProperties.TAG_EVENT_TH_SPECTRA_ENABLE==1},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_STATE","TAG_IO_EVENT_RUN_TIME","TAG_IO_EVENT_START_TIME","TAG_IO_EVENT_TIME_HIST_NUM_RECORDS","TAG_IO_EVENT_HIST_CUR_RECORD",{g:"overall",data:["TAG_IO_DURATION"]}]};PageArray[tbId.Events][pgId.O13Time]={controls:[thProfile],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&3)>0&&(MeasurementProperties.TAG_OBA_BANDWIDTH==2||MeasurementProperties.TAG_OBA_BANDWIDTH==3)&&MeasurementProperties.TAG_EVENT_TH_ENABLE==1&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE==1&&MeasurementProperties.TAG_EVENT_TH_SPECTRA_ENABLE==1},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_STATE","TAG_IO_EVENT_RUN_TIME","TAG_IO_EVENT_START_TIME","TAG_IO_EVENT_TIME_HIST_NUM_RECORDS","TAG_IO_EVENT_HIST_CUR_RECORD",{g:"overall",data:["TAG_IO_DURATION"]}]};thProfile.getTmsDiv=function(){var n=100;switch(MeasurementProperties.TAG_TIME_HISTORY_PERIOD){case 21:n=.1;break;case 22:n=1;break;case 23:case 0:case 1:n=10}return n};thProfile.getTmsSz=function(n){var t=1;return n===10?t=2:n===1?t=3:n===.1&&(t=4),t};MeasHist={id:"MeasHist",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){function k(){i.find("td:first").css("width","0px");adjustOffset=SystemProperties.TAG_GRAPH_BOTTOM;mTabName="MeasHist";console.log("popul MeasHist");var n=MeasurementProperties.TAG_FREQ_WEIGHTING,t=MeasurementProperties.TAG_DET_WEIGHTING,r=MeasurementProperties.TAG_INTEGRATION_INPUT;f[0].html(MakeLWeightDetectorString(n,t,"","L<sub>$#eq</sub>",r));f[1].html(MakeLWeightDetectorString(n,t,"","L<sub>$#max</sub>"));f[2].html("Record");f[3].html("Duration");f[4].html("")}function a(){var n={};n.index=u;n.lastBar=1.3;e.bumpCHIndex(n)}function d(n){var r=pageData.TAG_IO_NUM_HISTORY_RECORDS,i,u,f;if(r===undefined||r<=0||CurrentStatus.IsDataReset&&!inFileDsp)return i=$.Deferred(),h=[-99.9],setTimeout(function(){i.resolve()},0),i.promise();if(!(0>=t)){if(n===undefined&&(n="203"),inFileDsp&&(n="205"),lockedGetData===0&&l){l=!1;++lockedGetData;try{f="/sdk?func=get&f=128&p1="+n+"&p2=0&vals=0x51454C49,"+s+",40&format=tag:u4,len:u4,leq:af40,ack:u4";u=$.getJSON(f).done(function(n){h=[];h.push({data:parseOvlOBAData(n.Response.leq),color:mainClr});lockedGetData=0}).always(function(){lockedGetData=0})}catch(e){console.error("Error in Measure getSpecData: "+e)}}return u}}function g(){LiveData=[];e=$.plot(p,[{data:liveGraph.getRandom(v),color:mainClr}],{bars:{show:!0,barWidth:.75,fill:1,fillColor:mainClr},series:{lineWidth:1,shadowSize:0},yaxis:{tickColor:tickClr,min:SystemProperties.TAG_GRAPH_BOTTOM,tickSize:20,ticks:tickForm,max:SystemProperties.TAG_GRAPH_HEIGHT+SystemProperties.TAG_GRAPH_BOTTOM},xaxis:{mode:"time",show:!1},legend:{show:!1,color:mainClr,labelBoxBorderColor:"rgba(55,160,240,0.1)",backgroundOpacity:0,position:"ne"},crosshair:{mode:"x",lineWidth:w,color:"rgba(30, 190, 250, 0.5)"},grid:{hoverable:!0,autoHighlight:!1,backgroundColor:{colors:bkGrad}}},GraphTypes.DATADISPLAY);var n=e.crosshair;n.x=u+.4;console.log(n.x);e.setCrosshair(n)}var r=MeasHist,f,p;r.isInit=!0;var o=$("#thProfile"),e,h=[],v=40,u=0,s=0,w=3,t=-1,c=-1,i=o.find("#thTab"),y=o.find("tr:not(#thHr0) > :nth-child(1)"),b=!1,n=[],l=!1;n[0]=i.find("#thTop");n[1]=i.find("#vTh1");n[2]=i.find("#vTh2");n[3]=i.find("#vTh3");n[4]=i.find("#vTh4");n[5]=i.find("#vTh5");f=[];f[0]=i.find("#lbThTop");f[1]=i.find("#lbTh1");f[2]=i.find("#lbTh2");f[3]=i.find("#lbTh3");f[4]=i.find("#lbTh4");r.enter=function(){return y.hide(),k(),o.show(),liveTab.show(),v=40,LastSelectedTab=tbId.Measure,g(),t=-1,initialGet=!0,!0};r.update=function(){var n=pageData.TAG_IO_NUM_HISTORY_RECORDS;(n!=t||c!=pageData.TAG_IO_MEAS_HIST_CUR_RECORD||CurrentStatus.changeState)&&(upMHCntTitle(),n!=t&&(l=!0),t=n,c=measRecCnt=pageData.TAG_IO_MEAS_HIST_CUR_RECORD,c>n&&(c=measRecCnt=n),r.updateView())};r.leave=function(){o.hide();y.show();liveTab.hide();t=-1;b=!1;popMHCnt()};r.updateView=function(){r.moveGraph();var n=d();n!=undefined&&n.always(function(){h.length>0&&(e.setData(h),e.draw());r.setTable()})};o.on("click","#thProfG",function(){tbId.Measure===curTabIndex&&(u=e.crosshair.index,u>=t&&(u=t-1,e.crosshair.index=u,a()),measRecCnt=u,changeRecords(),r.updateView())});r.moveGraph=function(){var n=measRecCnt;u+s!==n&&(s=n>=34&&n<t-5?n-34:t>40&&n>=t-5?t-40:0,u=n-s,a())};r.setTable=function(){var o=e.getData(),t,i,f,r;a();i=-99.9;t=o[0];t&&t.data&&t.data[u]&&(i=t.data[u][1]);0<pageData.TAG_IO_NUM_HISTORY_RECORDS?(f=Math.round(pageData.TAG_IO_MEAS_HIST_INTERVAL_DURATION*1e5)/100,r=new Date(1970,0,1),r.setMilliseconds(f),n[0].html(formD(i)+" dB"),n[1].html(formD(pageData.TAG_IO_ANYLEVEL_LMAX)+" dB"),n[2].html(measRecCnt+1+"/"+pageData.TAG_IO_NUM_HISTORY_RECORDS),n[3].html(""+r.format(timeFm))):(n[0].html("--- dB"),n[1].html("--- dB"),n[2].html("No Data"),n[3].html("--:--:--.-"))};p=o.find("#thProfG")}};PageArray[tbId.Measure][pgId.History]={controls:[MeasHist,StartTime],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&256)>0&&MeasurementProperties.TAG_MEASUREMENT_HISTORY>0},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_HISTORY_RECORDS","TAG_IO_MEAS_HIST_CUR_RECORD","TAG_IO_MEAS_HIST_INTERVAL_DURATION","TAG_IO_MEAS_HIST_INTERVAL_TIMESTAMP","TAG_IO_ANYLEVEL_LMAX",{g:"overall",data:["TAG_IO_DURATION"]}]};EvntTrig={id:"EvntTrig",html:"",refreshRate:RefreshRates.ms500,isInit:!1,init:function(){function ot(){n.find("td:first").css("width","0px");adjustOffset=SystemProperties.TAG_GRAPH_BOTTOM;mTabName="EvntTrig";console.log("popul EvntTrig");var r=MeasurementProperties.TAG_FREQ_WEIGHTING,f=MeasurementProperties.TAG_DET_WEIGHTING,o=MeasurementProperties.TAG_INTEGRATION_INPUT;g=MakeLWeightDetectorString(r,f,"","L<sub>$#</sub>");u[0].html("");u[1].hide();t[2].addClass("cLbl");i[e].show();nt.show()}function tt(){y=[];for(var n=0;n<120;++n)y.push([n,a])}function it(){var n=pageData.TAG_IO_SOUND_RECORDER_STATE;n!==d&&(n===0?(v.show(),w.hide()):(v.hide(),w.show()));d=n}function rt(){e!=(pageData.TAG_IO_EVENT_STATE||0)&&(i[e].hide(),e=pageData.TAG_IO_EVENT_STATE||0,u[3].html(o[e]),i[e].show())}function ut(){var n={};n.index=h;n.lastBar=1.3;f.bumpCHIndex(n)}function st(n){var t,i;if(n==undefined&&(n="200"),lockedGetData===0&&(p||CurrentStatus.IsRunning)){p=!1;++lockedGetData;try{i="/sdk?func=get&f=128&p1="+n+"&p2=0&vals="+DataTags.TAG_IO_PROFILE_SERIES.ID+"&format=tag:u4,len:u4,leq:af120,ack:u4";t=$.getJSON(i).done(function(n){l=[];l.push({data:parseOvlOBAData(n.Response.leq),fill:1,fillColor:mainClr,color:mainClr});l.push({data:y,color:maxClr});lockedGetData=0}).always(function(){lockedGetData=0})}catch(r){console.error("Error in Spectral: "+r)}}return t}function ht(){LiveData=[];f=$.plot(ft,[{data:liveGraph.getRandom(120),color:mainClr}],{bars:{show:!0,barWidth:1.5,fill:0,fillColor:mainClr},series:{lineWidth:1,shadowSize:0},yaxis:{tickColor:tickClr,min:SystemProperties.TAG_GRAPH_BOTTOM,tickSize:20,ticks:tickForm,max:SystemProperties.TAG_GRAPH_HEIGHT+SystemProperties.TAG_GRAPH_BOTTOM},xaxis:{mode:"time",show:!1},grid:{hoverable:!0,autoHighlight:!1,backgroundColor:{colors:bkGrad}}},GraphTypes.DATADISPLAY)}var r=EvntTrig,u,i,o;r.isInit=!0;var c=$("#evTrig"),f,ft=c.find("#thProfG"),et=120,l=[],n=c.find("#thTab"),b=c.find("tr > :nth-child(1)"),s=-1,k=-1,d=-1,e=0,h=0,g="",a=MeasurementProperties.TAG_EVENT_LEVEL_0||65,y=[],t=[],p=!1;t[0]=n.find("#thTop");t[2]=n.find("#vTh2");t[3]=n.find("#vTh3");u=[];u[0]=n.find("#lbThTop");u[1]=n.find("#lbTh1");u[2]=n.find("#lbTh2");u[3]=n.find("#lbTh3");i=[];i[0]=n.find("#evState0");i[1]=n.find("#evState0");i[2]=n.find("#evState1");i[3]=n.find("#evState2");i[4]=n.find("#evState3");i[5]=n.find("#evState4");o=[];o[0]="Pre-Trigger?";o[1]="Pre-Trigger?";o[2]="Ready";o[3]="Trigger";o[4]="Valid";o[5]="Continue?";var v=n.find("#ehSndDis"),w=n.find("#ehSndRec"),nt=n.find("#vTha4");r.enter=function(){return v.show(),b.hide(),ot(),c.show(),liveTab.show(),et=120,tt(),LastSelectedTab=tbId.Events,ht(),s=-1,initialGet=!0,rt(),it(),pushMHCnt(),!0};r.update=function(){eventsCnt=pageData.TAG_IO_EVENT_HIST_CUR_RECORD;initialGet=!0;checkEvents();var n=pageData.TAG_IO_NUM_EVENT_RECORDS;(n!=s||k!=eventsCnt||CurrentStatus.changeState)&&(upMHCntTitle(),n!=s&&(p=!0),s=n,k=eventsCnt);a!=pageData.TAG_IO_DYNAMIC_TRIGGER_LEVEL&&(a=pageData.TAG_IO_DYNAMIC_TRIGGER_LEVEL,tt());rt();it();r.updateView()};r.leave=function(){c.hide();u[1].show();i[e].hide();t[2].removeClass("cLbl oranged");v.hide();w.hide();nt.hide();b.show();liveTab.hide();s=-1;e=0;refreshed=!1;popMHCnt()};r.updateView=function(){var n=st();n!=undefined&&n.always(function(){l.length>0&&(f.setData(l),f.draw());r.setTable()})};c.on("click","#thProfG",function(){tbId.Measure==curTabIndex&&(h=f.crosshair.index,h>=s&&(h=s-1,f.crosshair.index=h,ut()),measRecCnt=h,changeRecords(),r.updateView())});r.setTable=function(){var o=f.crosshair,e=f.getData(),r=h,n,u,i;ut();u=-99.9;n=e[0];n!=undefined&&n.data!=undefined&&n.data[r]!=undefined&&(u=n.data[r][1]);i=pageData.TAG_IO_ANYLEVEL_SPL;t[0].html(formD(i));t[2].html(g+" > "+formD(a)+" dB");i>=a?t[2].addClass("oranged").removeClass("cLbl"):t[2].removeClass("oranged").addClass("cLbl");0<pageData.TAG_IO_NUM_EVENT_RECORDS?t[3].html(pageData.TAG_IO_NUM_EVENT_RECORDS):t[3].html("0")}}};PageArray[tbId.Events][pgId.TrigStatus]={controls:[EvntTrig],condition:function(){return(SystemProperties.TAG_MASK_OPTION&SystemProperties.TAG_OPTION_FLAGS&16)>0&&MeasurementProperties.TAG_EVENT_HISTORY_ENABLE>0&&!inFileDsp},refDRate:RefreshRates.ms500,dataNeeded:["TAG_IO_NUM_EVENT_RECORDS","TAG_IO_EVENT_STATE","TAG_IO_EVENT_HIST_CUR_RECORD","TAG_IO_DYNAMIC_TRIGGER_LEVEL","TAG_IO_SOUND_RECORDER_STATE",{g:"overall",data:["TAG_IO_ANYLEVEL_SPL","TAG_IO_ANYLEVEL_SPL_3","TAG_IO_DURATION"]}]};