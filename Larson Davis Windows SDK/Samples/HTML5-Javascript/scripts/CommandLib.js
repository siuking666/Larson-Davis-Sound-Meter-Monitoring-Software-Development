function BeginBackErase(){bkErAct||(bkErAct=!0,$.getJSON("/sdk?func=backeraseavailable",function(n){0!==n.ResultCode?(console.log("!!!!! Error occurred while trying to begin back-erasing!!!!!"),bkErAct=!1):(beEn=n.can_be,beEn>0?(console.log("Enable BACK-ERASE"),curTabIndex===tbId.Overall&&Show5SecBtn(),menuOpen=!1):bkErAct=!1)}))}function EndBackErase(){bkErAct&&(bkErAct=!1,ftr.mi.pop(),ftr.mi.elem.find("#mibt").removeClass("bePad"),ftr.mi.elem.find("#mibt").addClass("mbPad"))}function Erase(n){if(console.log("Erasing "+n+" seconds of data"),n!=-1&&n!=5&&n!=10)console.error("Invalid value passed in to 'Erase()' function: "+n+" No back-erase will occur!");else{var t="/sdk?func=dobackerase&seconds="+n;$.getJSON(t,function(t){0!=t.ResultCode&&console.error("!!!!! Error occurred while trying to back-erase "+n+" seconds!!!!!")})}}function Show5SecBtn(){ftr.mi.push({type:"button",text:"Back-5s",handlr:function(){ftr.mi.pop();Erase(5);beEn==10?Show10SecBtn():ShowUndoBtn()},visible:!0});ftr.mi.elem.find("#mibt").removeClass("mbPad");ftr.mi.elem.find("#mibt").addClass("bePad")}function Show10SecBtn(){ftr.mi.push({type:"button",text:"Back-10s",handlr:function(){ftr.mi.pop();Erase(10);ShowUndoBtn()}});ftr.mi.elem.find("#mibt").removeClass("mbPad");ftr.mi.elem.find("#mibt").addClass("bePad")}function ShowUndoBtn(){ftr.mi.push({type:"button",text:"Undo",handlr:function(){ftr.mi.pop();Erase(-1);Show5SecBtn()}});ftr.mi.elem.find("#mibt").removeClass("bePad");ftr.mi.elem.find("#mibt").addClass("mbPad")}function ChkBkEr(n,t){if(CurrentStatus.IsPaused)if(bkErAct&&n==tbId.Overall&&t!=tbId.Overall)switch(beBtn){case"Back-5s":Show5SecBtn();break;case"Back-10s":Show10SecBtn();break;case"Undo":ShowUndoBtn();break;default:Show5SecBtn()}else bkErAct&&n!=tbId.Overall&&t==tbId.Overall&&(beBtn=ftr.mi.text(),ftr.mi.pop());else beBtn=ftr.mi.text(),beBtn!="Menu"&&console.error("Middle button may be in an incorrect state!")}function attach(n){n="#"+n;elemHolders[n]!=undefined&&(elem=elemHolders[n],elem.parent.append(elem.elem))}function detach(n){var t,i,r;n="#"+n;elemHolders[n]==undefined?(t=$(n),t.length>0&&(t.show(),i=t.parent(),r=t.detach(),elemHolders[n]={elem:r,parent:i})):elemHolders[n].elem.detach()}function dumpKbCon(){var t,n;if(typeof kbCon!="undefined")try{for(t="",n=0;n<kbCon.length;++n)t+=n<kbCon.length-1?kbCon[n].c.name+" ==> ":kbCon[n].c.name;console.log("kbCon: "+t)}catch(i){}}function prepkbCon(){function n(n){var t=!1;switch(curPageIndex){case pgId.Leq:curTabIndex==tbId.Events&&(bumpEvents(n.direction),t=!0);break;case pgId.Octave13:case pgId.Octave11:curTabIndex==tbId.TimeHist||curTabIndex==tbId.Events?FullOctave.onState==0?FullOctave.bumpFreq(n):FullOctave.bumpRec(n.direction):curPageIndex==pgId.Octave11?FullOctave.bumpFreq(n):mLiveThirdOctave.bumpCHIndex(n);t=!0;break;case pgId.Octave1N:case pgId.Octave3N:FullOctave.onState==0?FullOctave.bumpFreq(n):FullOctave.onState==2?FullOctave.bumpRef(n):FullOctave.onState==1?FullOctave.bumpMet(n):FullOctave.onState==3?FullOctave.setRef():FullOctave.onState==4&&FullOctave.bumpRec(n.direction);break;case pgId.SpectralTH:FullOctave.onState==0?FullOctave.bumpFreq(n):FullOctave.onState==2?FullOctave.bumpRec(n.direction):FullOctave.onState==3&&bumpEvents(n.direction);t=!0;break;case pgId.SpectralLn:SpectralLn.specLnG.bumpCHIndex(n);break;case pgId.Metrics:thProfile.onState===1?thProfile.bumpMet(n.direction):thProfile.bumpRec(n.direction);t=!0;break;case pgId.EventTH:case pgId.O11Time:case pgId.O13Time:thProfile.onState===0?thProfile.bumpFreq(n.direction):thProfile.onState===2?thProfile.bumpRec(n.direction):thProfile.onState===3&&tbId.Events===curTabIndex?bumpEvents(n.direction):thProfile.bumpRec(n.direction);t=!0}return t}function t(){ftr.mi.pop();dispFArr(!0);kbCon.pop();var n=$("#mmTbl");n.find("tr").eq(mmCon.y+2).find("td").eq(mmCon.x+1).removeClass("mmFoc")}function i(){dispFArr(!1);ftr.mi.push("button","Close",t);var n=$("#mmTbl");n.find("tr").eq(mmCon.y+2).find("td").eq(mmCon.x+1).addClass("mmFoc");kbCon.push(mmCon,n)}menuCon={name:"menuCon",keyUp:function(n){if(n!=KEY_SOFT_MID)return menuCon.__rn=!0,!0},keyDown:function(n,t){var o=!1,i,u,e;if(typeof t=="string"&&(t=$("#"+t)),i=t.find(".hover"),i.length==0)return!1;if(n==KEY_ENTER){if(u=$(i).data("func"),u!=undefined&&u!=""&&menuLinks[u]!==undefined)return e=$(i).data("p"),u!=undefined&&u!=""&&(e!=undefined&&(e.length==undefined||e.length>0)?menuLinks[u](e):menuLinks[u]()),menuCon.__rn=!0,!0;$(i).trigger("click");console.log("enter");menuCon.__rn=!0;o=!0}else{var f=t.find(".mnuItem:not(.greyed):visible"),s=t.find(".mnuItem:visible"),r=f.index(i);switch(n){case KEY_ARR_UP:--r;r<0&&(r=(r+f.length)%f.length);menuCon.__rn=!0;o=!0;console.log("up");break;case KEY_ARR_DOWN:++r;r>=f.length&&(r=r%f.length);menuCon.__rn=!0;o=!0;console.log("down")}i=$(f[r]);i.length>0&&(f.removeClass("hover"),i.addClass("hover"),$(t).scrollTop(i.position().top-$(s[0]).position().top-t.parent().height()/2))}return o}};alCon={name:"alCon",parent:menuCon,keyUp:function(n){if(n!=KEY_SOFT_MID)return alCon.__rn=!0,!0},keyDown:function(n,t){var i=!1,r=t.find(".hover");return n==KEY_ENTER?(anyLevelMenu.setAL($(r).data("val")),refreshViewData(),closeMenu(),alCon.__rn=!0,i=!0):i=alCon.parent.keyDown(n,t),i}};adjGra=$("#adjGra");agCon={name:"agCon",keyUp:function(n){if(n!=KEY_SOFT_MID)return agCon.__rn=!0,!0},keyDown:function(n){var t=!0;agCon.__rn=!0;switch(n){case KEY_ARR_UP:adjGra.find("#agMUp").click();break;case KEY_ARR_DOWN:adjGra.find("#agMDn").click();break;case KEY_ARR_LEFT:adjGra.find("#agmUp").click();break;case KEY_ARR_RIGHT:adjGra.find("#agmDn").click();break;default:t=!1;agCon.__rn=!1}return t}};pgCon={name:"pgCon",lastKey:0,pressed:0,combo:0,keyUp:function(n){switch(n){case KEY_ARR_LEFT:case KEY_ARR_RIGHT:pgCon.pressed=0;pgCon.combo=0}},keyDown:function(t){var r,u;if(curTabIndex==tbId.SessLog&&t!=KEY_ENTER)return!1;r=!1;pgCon.lastKey!=t&&(pgCon.pressed=0);switch(t){case KEY_ARR_RIGHT:u={};1===pgCon.combo&&(pgCon.combo=2);++pgCon.pressed;u.lastBar=.3;u.direction=pgCon.pressed>20?100:pgCon.pressed>13?50:pgCon.pressed>8?10:pgCon.pressed>3?5:1;r=n(u);r||curTabIndex!=tbId.Measure?r||curTabIndex!=tbId.Events||bumpEvents(u.direction):bumpRecord(u.direction);break;case KEY_ARR_LEFT:u={};0===pgCon.combo&&(pgCon.combo=1);++pgCon.pressed;u.lastBar=.3;u.direction=pgCon.pressed>20?-100:pgCon.pressed>13?-50:pgCon.pressed>8?-10:pgCon.pressed>3?-5:-1;r=n(u);r||curTabIndex!=tbId.Measure?r||curTabIndex!=tbId.Events||bumpEvents(u.direction):bumpRecord(u.direction);break;case KEY_ARR_UP:keyUpArrow();r=!0;break;case KEY_ARR_DOWN:keyDownArrow();r=!0;break;case KEY_ENTER:2===pgCon.combo&&(pgCon.combo=0,setFixedLen(2));bkErAct&&(ftr.mi.pop(),bkErAct=!1,console.log("Back-Erase cancelled!"));switch(curTabIndex){case tbId.Live:case tbId.Current:case tbId.Overall:case tbId.Measure:curPageIndex==pgId.Profile||curPageIndex==pgId.EnfMkt?(openAL(),r=!0):curPageIndex==pgId.MM&&curTabIndex!=tbId.Live?i():curPageIndex==pgId.Octave1N||curPageIndex==pgId.Octave3N?(FullOctave.switchCtrl(),r=!0):curPageIndex==pgId.Preamp&&(PreAmpPage.toggleTone(),r=!0);break;case tbId.Events:case tbId.TimeHist:curPageIndex==pgId.Metrics||curPageIndex==pgId.EventTH||curPageIndex==pgId.O11Time||curPageIndex==pgId.O13Time?(thProfile.switchCtrl(),r=!0):((curPageIndex==pgId.Octave11||curPageIndex==pgId.Octave13)&&curTabIndex===tbId.TimeHist||curPageIndex==pgId.Octave1N||curPageIndex==pgId.Octave3N||curPageIndex==pgId.SpectralTH)&&(FullOctave.switchCtrl(),r=!0);break;case tbId.SessLog:Sess.activateEntry()}break;case KEY_STOP:EndBackErase();break;case KEY_RUN:curTabIndex===tbId.Overall&&(CurrentStatus.IsRunning?setTimeout(BeginBackErase,200):EndBackErase());break;case KEY_TOOLS:case KEY_POWER:case KEY_RESET:bkErAct&&(ftr.mi.pop(),bkErAct=!1,console.log("Back-Erase cancelled!"))}return pgCon.lastKey=t,r}};srCon={name:"srCon",lastKey:0,pressed:0,combo:0,keyUp:function(){return srCon.__rn=!0,!0},keyDown:function(n){if(n!=KEY_ENTER)return srCon.__rn=!0,!0;Sess.activateEntry()}};mmCon={name:"mmCon",keyDown:function(n,i){if(curTabIndex==tbId.SessLog)return!1;var r=!1;i.find("tr").eq(mmCon.y+2).find("td").eq(mmCon.x+1).removeClass("mmFoc");switch(n){case KEY_ENTER:return t(),!0;case KEY_ARR_DOWN:++mmCon.y;r=!0;break;case KEY_ARR_LEFT:--mmCon.x;r=!0;break;case KEY_ARR_UP:--mmCon.y;r=!0;break;case KEY_ARR_RIGHT:++mmCon.x;r=!0}return mmCon.y<0&&(mmCon.y=7),mmCon.y>7&&(mmCon.y=0),mmCon.x<0&&(mmCon.x=2),mmCon.x>2&&(mmCon.x=0),i.find("tr").eq(mmCon.y+2).find("td").eq(mmCon.x+1).addClass("mmFoc"),metrixPage.updateDetail(mmCon.x,mmCon.y),r}};dlgCon={name:"dlgCon",keyUp:function(n){if(n!=KEY_SOFT_MID&&n!=KEY_SOFT_LEFT&&n!=KEY_SOFT_RIGHT)return dlgCon.__rn=!0,!0},keyDown:function(n,t){var r=!1,i=t.find(":focus,.ui-state-focus"),u,f;if(n==KEY_ENTER)i.hasClass("kbi")||(u=$(i).data("func"),f=$(i).data("p"),u!=undefined&&u!=""&&menuLinks[u]!==undefined?f!=undefined&&(f.length==undefined||f.length>0)?menuLinks[u](f):menuLinks[u]():$(i).trigger("click")),r=!0,dlgCon.__rn=!0;else{i.length<=0&&(i=t);switch(n){case KEY_ARR_UP:case KEY_ARR_LEFT:i.focusNextInputField(0,"input,.yes",t);dlgCon.__rn=!0;r=!0;break;case KEY_ARR_DOWN:case KEY_ARR_RIGHT:i.focusNextInputField(1,"input,.yes",t);dlgCon.__rn=!0;r=!0;break;case KEY_TOOLS:r=!0;break;default:dlgCon.__rn=!0;r=!0}}return r}};cnfCon={name:"cnfCon",keyUp:function(){return cnfCon.__rn=!0,!0},keyDown:function(n,t){var r,i;if(cnfCon.__rn=!0,n==KEY_ENTER)r=t.find(":focus,.ui-state-focus"),r.length==1&&$(r).trigger("click");else{i=t.find(":focus,.ui-state-focus");i.length<=0&&(i=t);switch(n){case KEY_ARR_UP:case KEY_ARR_LEFT:i.focusNextInputField(0,"button",t);break;case KEY_ARR_DOWN:case KEY_ARR_RIGHT:i.focusNextInputField(1,"button",t)}}return!0}};abCon={name:"abCon",keyDown:function(n){var t=!1;switch(n){case KEY_ARR_LEFT:t=abCon.left&&abCon.left();break;case KEY_ARR_RIGHT:t=abCon.right&&abCon.right()}return t}};calCon={name:"calCon",keyUp:function(n){var t=!1;return n==KEY_SOFT_MID||n==KEY_SOFT_LEFT||n==KEY_SOFT_RIGHT?(calCon.__rn=!1,t=!1):t=!0,t},keyDown:function(n,t){var u=t.find(":focus,.ui-state-focus"),r=!1,i;switch(n){case KEY_ARR_UP:i=t.find(":focus");i.length<=0&&(i=t);i.focusNextInputField(0,searchFoc,t);calCon.__rn=!0;r=!0;break;case KEY_ARR_DOWN:i=t.find(":focus");i.length<=0&&(i=t);i.focusNextInputField(1,searchFoc,t);calCon.__rn=!0;r=!0;break;case KEY_ENTER:calCon.__rn=!1;r=!1;break;case KEY_ARR_LEFT:calCon.__rn=!0;r=!0;break;case KEY_ARR_RIGHT:calCon.__rn=!0;r=!0;break;default:calCon.__rn=!1;r=!1}return r}};calHstCon={name:"calHstCon",keyUp:function(n){switch(n){case KEY_SOFT_MID:CalHistTab.clsSp();calCon.__rn=!0}return calHstCon.__rn=!0,!0},keyDown:function(n,t){var i=t.find(":focus,.ui-state-focus");switch(n){case KEY_ARR_LEFT:CalHistTab.RSleftKD();break;case KEY_ARR_RIGHT:CalHistTab.RSrightKD();break;case KEY_ENTER:CalHistTab.clsSp();calCon.__rn=!0}return calHstCon.__rn=!0,!0}};mgrCon={name:"mgrCon",keyDown:function(n,t){var r=!1,u,i;if(n==KEY_ENTER)u=t.find(".ui-state-active"),u.length==1&&(accordionRight(),r=!0),mgrCon.__rn=!0;else switch(n){case KEY_ARR_UP:i=pageAccord.find(".ui-state-active").prev().prev("h3");i.length==0&&(i=pageAccord.find("h3:last"));i.trigger("click");r=!0;break;case KEY_ARR_DOWN:i=pageAccord.find(".ui-state-active").next().next();i.length==0&&(i=pageAccord.find("h3:first"));i.trigger("click");r=!0}return r}};saveSetCon={name:"saveSetCon",keyUp:function(){return saveSetCon.__rn=!0,!0},keyDown:function(n,t){var r,i,u;if(saveSetCon.__rn=!0,r=!0,n==KEY_ENTER)i=t.find(":focus"),i.length>0&&(i.hasClass("cCB")?$(i).trigger("click"):i.hasClass("cSel")?showDropdown(i[0]):$(i).trigger("click"),r=!0),saveSetCon.__rn=!0;else{u=t.find(":focus");u.length<=0&&(u=t);switch(n){case KEY_ARR_UP:u.focusNextInputField(0,"button,input,textarea,select,a:not(.ydisabled,.mid)",t);r=!0;saveSetCon.__rn=!0;break;case KEY_ARR_DOWN:u.focusNextInputField(1,"button,input,textarea,select,a:not(.ydisabled,.mid)",t);r=!0;saveSetCon.__rn=!0}}return r}};setCon={name:"setCon",keyUp:function(n){if(n!=KEY_SOFT_MID)return!0},keyDown:function(n,t){var i,r,u;if(setCon.__rn=!1,i=!1,n==KEY_ENTER)r=t.find(":focus"),setCon.__rn=!0,r.length>0&&(i=!0,r.hasClass("cCB")?$(r).trigger("click"):r.hasClass("cSel")?(setCon.__rn=!1,showDropdown(r[0])):$(r).trigger("click"));else{u=t.find(":focus");u.length<=0&&(u=t);switch(n){case KEY_ARR_UP:u.focusNextInputField(0,"button,input,textarea,select,a:not(.ydisabled,.mid)",t);i=!0;setCon.__rn=!0;break;case KEY_ARR_DOWN:u.focusNextInputField(1,"button,input,textarea,select,a:not(.ydisabled,.mid)",t);i=!0;setCon.__rn=!0;break;case KEY_TOOLS:i=!0;setCon.__rn=!0;break;case KEY_ARR_LEFT:case KEY_ARR_RIGHT:i=!0;setCon.__rn=!0;break;default:setCon.__rn=!0;i=!0}}return i}};msCon={name:"msCon",keyUp:function(n){switch(n){case KEY_SOFT_MID:case KEY_SOFT_LEFT:case KEY_SOFT_RIGHT:break;default:return msCon.__rn=!0,!0}},keyDown:function(n,t){msCon.__rn=!0;var i=!1,r=t.find(":focus");r.length<=0&&(r=t);switch(n){case KEY_ARR_UP:r.focusNextInputField(0,"input",t);i=!0;break;case KEY_ARR_DOWN:r.focusNextInputField(1,"input",t);i=!0;break;case KEY_ARR_LEFT:case KEY_ARR_RIGHT:case KEY_ENTER:CurrentStatus.IsRunning&&r.length>0&&($(r).trigger("click"),i=!0);break;case KEY_STOP:msLeq1sAveCtl.recState="stop";msLeq1sAveCtl.runStateChanged=!0;msCon.__rn=!1;i=!1;break;case KEY_RUN:case KEY_RESET:msLeq1sAveCtl.runStateChanged=!0;msCon.__rn=!1;i=!1;break;case KEY_TOOLS:default:i=!0}}};grdCon={name:"grdCon",keyUp:function(n){if(n!=KEY_SOFT_MID)return!0},keyDown:function(n,t){var i,u,r,f;if(grdCon.__rn=!1,i=!1,n==KEY_ENTER)u=t.find(":focus"),u.length>0&&(u.hasClass("cCB")?$(u).trigger("click"):u.hasClass("cSel")?showDropdown(u[0]):$(u).trigger("click"),i=!0),grdCon.__rn=!0;else{r=t.find(":focus");r.length<=0&&(r=t);f=r.attr("cBit");switch(n){case KEY_ARR_UP:r.focusNextInputFieldInGrid(0,t,f);i=!0;grdCon.__rn=!0;break;case KEY_ARR_DOWN:r.focusNextInputFieldInGrid(1,t,f);i=!0;grdCon.__rn=!0;break;case KEY_ARR_RIGHT:r.focusNextInputFieldInGrid(2,t,f);i=!0;grdCon.__rn=!0;break;case KEY_ARR_LEFT:r.focusNextInputFieldInGrid(3,t,f);i=!0;grdCon.__rn=!0;break;case KEY_TOOLS:i=!0;break;default:grdCon.__rn=!0;i=!0}}return i}};refCon={name:"refCon",keyDown:function(n,t){var r=!1,i,u;if(refCon.__rn=!1,n==KEY_ENTER)i=t.find(":focus"),i.length>0&&(i.hasClass("cSel")?(showDropdown(i[0]),r=!0,refCon.__rn=!0):i.hasClass("yes")&&$(i).trigger("click"));else{r=!0;u=t.find(":focus");u.length<=0&&(u=t);switch(n){case KEY_ARR_LEFT:u.focusNextInputField(0,"button,input,select",t);r=!0;refCon.__rn=!0;break;case KEY_ARR_RIGHT:u.focusNextInputField(1,"button,input,select",t);r=!0;refCon.__rn=!0}}return r}};swKBCon={name:"swKBCon",keyUp:function(n){var t=!0;swKBCon.__rn=!0;switch(n){case KEY_POWER:swKBCon.__rn=!0;t=!0}return t},keyDown:function(n){switch(n){case KEY_POWER:return swKBCon.__rn=!0,!0;case KEY_ENTER:return swKBCon.__rn=!0,!0}return swKBCon.__rn=!1,!0}};noScrnCon={name:"noScrnCon",keyDown:function(){return console.log("Remove Pause"),PauseGetRunState=!1,isRunningState=!0,statusTmr!=undefined&&clearTimeout(statusTmr),statusTmr=setTimeout(wrapFunction(getRunningState,this,[emptyFun,tmrLastRunState]),10),!0}};lockCon={name:"lockCon",keyUp:function(n){var t=!1;lockCon.__rn=!1;switch(n){case KEY_POWER:pwrDnCnt=0;hndlPwrBtn();lockCon.__rn=!0;t=!0}return t},keyDown:function(n){lockCon.__rn=!1;switch(n){case KEY_ENTER:case KEY_TOOLS:if(initLocked)if(LkCdBad.dialog("isOpen")==!0)LkCdBad.dialog("close");else{if(UnLkPop.dialog("isOpen")==!0)return UnLkPop.dialog("close"),lkCdClose(!0),lockCon.__rn=!0,!0;UnLkPop.dialog("isOpen")==!1?(LkCdVal.val(""),Unlock(),lockCon.__rn=!0):lockCon.__rn=!1}else Unlock();break;case KEY_RUN:lockCon.__rn=!1;CurrentStatus.IsRunning&&(lockCon.__rn=!0);break;case KEY_STOP:var t=CurrentStatus.uiRunFlags&(DATA_STORED|DATA_RESET);0==t?3==SystemProperties.TAG_LOCK_MODE?lockCon.__rn=!0:1==SystemProperties.TAG_LOCK_MODE?lockCon.__rn=!1:2==SystemProperties.TAG_LOCK_MODE&&0==SystemProperties.TAG_AUTO_STORE&&(confDialog.confCan=function(){SendReset();lockCon.__rn=!0},confDialog.callConfirm("","Measurement OK?",function(){StoreCmd(!1);lockCon.__rn=!0})):lockCon.__rn=!0;break;case KEY_POWER:pwrDnCnt++;pwrDnCnt>40&&$.getJSON("/sdk?func=sendCommand&id="+CMD_METER_SHUTDOWN).done(function(n){console.log(n);confDialog.callConfirm("","Powering Off. Please wait...",function(){},{Can:{on:"off"},Conf:{on:"off"}})});break;case KEY_RESET:1<SystemProperties.TAG_LOCK_MODE&&(lockCon.__rn=2==SystemProperties.TAG_LOCK_MODE&&1==SystemProperties.TAG_AUTO_STORE?!1:!0);break;default:lockCon.__rn=!0}return lockCon.__rn}};rcCon={name:"rcCon",keyUp:function(){return rcCon.__rn=!0,!0},keyDown:function(){return rcCon.__rn=!0,!0}};calVlsCon={name:"calVlsCon",keyUp:function(){return calVlsCon.__rn=!0,!0},keyDown:function(n,t){res=!0;calVlsCon.__rn=!0;var i=t.find(":focus");i.length<=0&&(i=t);switch(n){case KEY_ARR_LEFT:i.focusNextInputField(1,"a:not(.ydisabled)",t);res=!1;calVlsCon.__rn=!1;break;case KEY_ARR_RIGHT:i.focusNextInputField(0,"a:not(.ydisabled)",t);res=!1;calVlsCon.__rn=!1;break;case KEY_ENTER:res=!1;calVlsCon.__rn=!1}return res}};locCon={name:"locCon",keyUp:function(n){return res=!0,locCon.__rn=!0,n==KEY_SOFT_MID&&locOpen&&clsLocate(),res},keyDown:function(n){res=!0;locCon.__rn=!0;switch(n){case KEY_SOFT_LEFT:locOpen&&goToRec(1);break;case KEY_SOFT_RIGHT:locOpen&&goToRec(pageData.TAG_IO_TIME_HIST_NUM_RECORDS)}return res}};kbCon.push(pgCon,mainContent)}var bkErAct=!1,beEn=10,beBtn="",ftr={init:function(){function t(n,t,i,r){function o(){var t=!1,i=!1,n=!1;if(u.length>0)switch(u[f][0]){case"arrow":t=!0;n=!0;a.show();h.show();break;case"button":i=!0;l.show();break;case"label":n=!0;h.show()}else console.error("You are broken.  Fix the states before trying to change them.");t?null:a.hide();i?null:l.hide();n?null:h.hide()}function s(){$(n+"t").html(u[f][1]);$(n+"bt").html(u[f][1])}function c(){u[f][3]?e.show():e.hide()}var e=$(n);this.elem=e;var l=e.find(n+"b"),h=e.find(n+"c"),a=e.find(n+"a"),u=[[t,i,r,!0]],f=0;this.hide=function(){e.hide();u[f][3]=!1};this.show=function(){u[f][3]=!0;o();e.show()};this.type=function(n){if(n!=undefined)u[f][0]!=n&&(u[f][0]=n,o());else return u[f][0]};this.text=function(n){if(n!=undefined&&n!=u[f][1])u[f][1]=n,s();else return u[f][1]};this.handler=function(n){if(n!=undefined&&n!=u[f][2])u[f][2]=n;else return u[f][2]};this.invoke=function(n){if(u[f][3]&&u[f][2]!=null){var t;return u[f][2].length>0?t=u[f][2](n):(t=u[f][2](),n!=undefined&&n instanceof Function&&n()),t!=undefined?t:!0}};this.push=function(n,t,i,r){if(t==undefined&&i==undefined&&r==undefined)if(n!=undefined)if(n===!1)r=n,n="",t="",i=null;else{var e=n;n=e.type;t=e.text;i=e.handlr;r=e.visible}else r=!1;r==undefined&&(r=u[f][3]);u.push([n,t,i,r]);++f;o();s();c();console.log("push: "+u.length)};this.pop=function(){u.length>1?(u.pop(),--f):console.error("What are you doing Lucy?");console.log("popd: "+u.length);o();s();c()};o();s();c();e.on("click",this.invoke)}var n=ftr;n.lf=new t("#lf","arrow","",keyLeftArrow);n.rt=new t("#rt","arrow","",keyRightArrow);n.mi=new t("#mi","button","Menu",showMenu);n.ovlf=$("#ovlf").bind("click",function(){n.lf.invoke()})}},elemHolders={},KEY_SOFT_LEFT=1,KEY_SOFT_MID=2,KEY_SOFT_RIGHT=3,KEY_STOP=4,KEY_RUN=5,KEY_ARR_LEFT=6,KEY_ARR_UP=7,KEY_ARR_RIGHT=8,KEY_ARR_DOWN=9,KEY_ENTER=10,KEY_RESET=11,KEY_POWER=12,KEY_TOOLS=13,keyMap=[],kbCon;keyMap[220]=KEY_SOFT_LEFT;keyMap[145]=KEY_SOFT_MID;keyMap[19]=KEY_SOFT_RIGHT;keyMap[36]=KEY_STOP;keyMap[33]=KEY_RUN;keyMap[37]=KEY_ARR_LEFT;keyMap[38]=KEY_ARR_UP;keyMap[39]=KEY_ARR_RIGHT;keyMap[40]=KEY_ARR_DOWN;keyMap[13]=KEY_ENTER;keyMap[45]=KEY_RESET;keyMap[35]=KEY_POWER;keyMap[34]=KEY_TOOLS;keyMap[46]=KEY_TOOLS;keyMap[110]=KEY_TOOLS;keyMap[190]=KEY_TOOLS;kbCon=[];kbCon.keyUp=function(n){return n=keyMap[n],n!==undefined?this[this.length-1].c.keyUp&&this[this.length-1].c.keyUp(n,this[this.length-1].e):!1};kbCon.keyDown=function(n){return n=keyMap[n],n!==undefined?this[this.length-1].c.keyDown&&this[this.length-1].c.keyDown(n,this[this.length-1].e):!1};kbCon._pop=kbCon.pop;kbCon.pop=function(n){var t,i;if(this.length>1)if(n)for(t=this.length-1;t>=0;--t)i=this[t],i.c==cnfCon&&n[0]&&i.e[0]==n[0]&&this.splice(t,1);else this._pop(),console.log("popping: "+this.length);else console.error("What were you thinking? Popping the last kbCon. You should be ashamed of yourself.");dumpKbCon()};kbCon.popAllOf=function(n){if(this.length>1)for(var t=this.length-1;t>=0;--t)this[t].c===n&&this.splice(t,1);dumpKbCon()};kbCon._push=kbCon.push;kbCon.push=function(n,t){this._push({c:n,e:t});console.log("pushing: "+this.length);dumpKbCon()};var menuCon=undefined,alCon=undefined,agCon=undefined,pgCon=undefined,srCon=undefined,mmCon=undefined,dlgCon=undefined,abCon=undefined,calCon=undefined,noScrnCon=undefined,swKBCon=undefined,mgrCon=undefined,setCon=undefined,saveSetCon=undefined,lockCon=undefined,msCon=undefined,calVlsCon=undefined,adjGra;